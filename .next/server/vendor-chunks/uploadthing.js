"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/uploadthing";
exports.ids = ["vendor-chunks/uploadthing"];
exports.modules = {

/***/ "(ssr)/./node_modules/uploadthing/dist/chunk-4PDGVH57.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-4PDGVH57.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getFullApiUrl: () => (/* binding */ getFullApiUrl)\n/* harmony export */ });\n// src/internal/get-full-api-url.ts\nfunction getFullApiUrl(maybeUrl) {\n    const base = (()=>{\n        var _a, _b;\n        if (false) {}\n        if (typeof process !== \"undefined\" && ((_a = process == null ? void 0 : process.env) == null ? void 0 : _a.VERCEL_URL)) {\n            return `https://${process.env.VERCEL_URL}`;\n        }\n        if ((_b = /* unsupported import.meta.env */ undefined) == null ? void 0 : _b.VERCEL_URL) {\n            return `https://${/* unsupported import.meta.env.VERCEL_URL */ undefined.VERCEL_URL}`;\n        }\n        return \"http://localhost:3000\";\n    })();\n    try {\n        const url = new URL(maybeUrl ?? \"/api/uploadthing\", base);\n        if (url.pathname === \"/\") {\n            url.pathname = \"/api/uploadthing\";\n        }\n        return url;\n    } catch (err) {\n        throw new Error(`Failed to parse '${maybeUrl}' as a URL. Make sure it's a valid URL or path`);\n    }\n}\n //# sourceMappingURL=chunk-4PDGVH57.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay00UERHVkg1Ny5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLG1DQUFtQztBQUNuQyxTQUFTQSxjQUFjQyxRQUFRO0lBQzdCLE1BQU1DLE9BQU8sQ0FBQztRQUNaLElBQUlDLElBQUlDO1FBQ1IsSUFBSSxLQUE2QixFQUFFLEVBRWxDO1FBQ0QsSUFBSSxPQUFPSSxZQUFZLGVBQWdCLEVBQUNMLEtBQUtLLFdBQVcsT0FBTyxLQUFLLElBQUlBLFFBQVFDLEdBQUcsS0FBSyxPQUFPLEtBQUssSUFBSU4sR0FBR08sVUFBVSxHQUFHO1lBQ3RILE9BQU8sQ0FBQyxRQUFRLEVBQUVGLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVSxDQUFDLENBQUM7UUFDNUM7UUFDQSxJQUFJLENBQUNOLEtBQUssMkNBQWUsS0FBSyxPQUFPLEtBQUssSUFBSUEsR0FBR00sVUFBVSxFQUFFO1lBQzNELE9BQU8sQ0FBQyxRQUFRLEVBQUUsaUVBQTBCLENBQUMsQ0FBQztRQUNoRDtRQUNBLE9BQU87SUFDVDtJQUNBLElBQUk7UUFDRixNQUFNQyxNQUFNLElBQUlDLElBQUlYLFlBQVksb0JBQW9CQztRQUNwRCxJQUFJUyxJQUFJRSxRQUFRLEtBQUssS0FBSztZQUN4QkYsSUFBSUUsUUFBUSxHQUFHO1FBQ2pCO1FBQ0EsT0FBT0Y7SUFDVCxFQUFFLE9BQU9HLEtBQUs7UUFDWixNQUFNLElBQUlDLE1BQ1IsQ0FBQyxpQkFBaUIsRUFBRWQsU0FBUyw4Q0FBOEMsQ0FBQztJQUVoRjtBQUNGO0FBSUUsQ0FDRiwyQ0FBMkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pc29tb3JwaGljLy4vbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvY2h1bmstNFBER1ZINTcubWpzPzI0ZGEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2ludGVybmFsL2dldC1mdWxsLWFwaS11cmwudHNcbmZ1bmN0aW9uIGdldEZ1bGxBcGlVcmwobWF5YmVVcmwpIHtcbiAgY29uc3QgYmFzZSA9ICgoKSA9PiB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiAoKF9hID0gcHJvY2VzcyA9PSBudWxsID8gdm9pZCAwIDogcHJvY2Vzcy5lbnYpID09IG51bGwgPyB2b2lkIDAgOiBfYS5WRVJDRUxfVVJMKSkge1xuICAgICAgcmV0dXJuIGBodHRwczovLyR7cHJvY2Vzcy5lbnYuVkVSQ0VMX1VSTH1gO1xuICAgIH1cbiAgICBpZiAoKF9iID0gaW1wb3J0Lm1ldGEuZW52KSA9PSBudWxsID8gdm9pZCAwIDogX2IuVkVSQ0VMX1VSTCkge1xuICAgICAgcmV0dXJuIGBodHRwczovLyR7aW1wb3J0Lm1ldGEuZW52LlZFUkNFTF9VUkx9YDtcbiAgICB9XG4gICAgcmV0dXJuIFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCI7XG4gIH0pKCk7XG4gIHRyeSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChtYXliZVVybCA/PyBcIi9hcGkvdXBsb2FkdGhpbmdcIiwgYmFzZSk7XG4gICAgaWYgKHVybC5wYXRobmFtZSA9PT0gXCIvXCIpIHtcbiAgICAgIHVybC5wYXRobmFtZSA9IFwiL2FwaS91cGxvYWR0aGluZ1wiO1xuICAgIH1cbiAgICByZXR1cm4gdXJsO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgRmFpbGVkIHRvIHBhcnNlICcke21heWJlVXJsfScgYXMgYSBVUkwuIE1ha2Ugc3VyZSBpdCdzIGEgdmFsaWQgVVJMIG9yIHBhdGhgXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQge1xuICBnZXRGdWxsQXBpVXJsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmstNFBER1ZINTcubWpzLm1hcCJdLCJuYW1lcyI6WyJnZXRGdWxsQXBpVXJsIiwibWF5YmVVcmwiLCJiYXNlIiwiX2EiLCJfYiIsIndpbmRvdyIsImxvY2F0aW9uIiwib3JpZ2luIiwicHJvY2VzcyIsImVudiIsIlZFUkNFTF9VUkwiLCJ1cmwiLCJVUkwiLCJwYXRobmFtZSIsImVyciIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/dist/chunk-4PDGVH57.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   maybeParseResponseXML: () => (/* binding */ maybeParseResponseXML),\n/* harmony export */   uploadPart: () => (/* binding */ uploadPart),\n/* harmony export */   uploadPartWithProgress: () => (/* binding */ uploadPartWithProgress)\n/* harmony export */ });\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uploadthing/shared */ \"(ssr)/./node_modules/@uploadthing/shared/dist/index.mjs\");\n// src/internal/multi-part.ts\n\n// src/internal/s3-error-parser.ts\nvar maybeParseResponseXML = (maybeXml)=>{\n    const codeMatch = maybeXml.match(/<Code>(.*?)<\\/Code>/s);\n    const messageMatch = maybeXml.match(/<Message>(.*?)<\\/Message>/s);\n    const code = codeMatch == null ? void 0 : codeMatch[1];\n    const message = messageMatch == null ? void 0 : messageMatch[1];\n    if (!code || !message) return null;\n    return {\n        code: s3CodeToUploadThingCode[code] ?? DEFAULT_ERROR_CODE,\n        message\n    };\n};\nvar DEFAULT_ERROR_CODE = \"UPLOAD_FAILED\";\nvar s3CodeToUploadThingCode = {\n    AccessDenied: \"FORBIDDEN\",\n    // 403 Forbidden\n    EntityTooSmall: \"TOO_SMALL\",\n    // 400 Bad Request\n    EntityTooLarge: \"TOO_LARGE\",\n    // 400 Bad Request\n    ExpiredToken: \"FORBIDDEN\",\n    // 400 Bad Request\n    IncorrectNumberOfFilesInPostRequest: \"TOO_MANY_FILES\",\n    // 400 Bad Request\n    InternalError: \"INTERNAL_SERVER_ERROR\",\n    // 500 Internal Server Error\n    KeyTooLongError: \"KEY_TOO_LONG\",\n    // 400 Bad Request\n    MaxMessageLengthExceeded: \"TOO_LARGE\"\n};\n// src/internal/multi-part.ts\nasync function uploadPart(opts, retryCount = 0) {\n    const s3Res = await opts.fetch(opts.url, {\n        method: \"PUT\",\n        body: opts.chunk,\n        headers: {\n            \"Content-Type\": opts.contentType,\n            \"Content-Disposition\": [\n                opts.contentDisposition,\n                `filename=\"${encodeURI(opts.fileName)}\"`,\n                `filename*=UTF-8''${encodeURI(opts.fileName)}`\n            ].join(\"; \")\n        }\n    });\n    if (s3Res.ok) {\n        const etag = s3Res.headers.get(\"Etag\");\n        if (!etag) {\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"UPLOAD_FAILED\",\n                message: \"Missing Etag header from uploaded part\"\n            });\n        }\n        return etag.replace(/\"/g, \"\");\n    }\n    if (retryCount < opts.maxRetries) {\n        const delay = 2 ** retryCount * 1e3;\n        await new Promise((r)=>setTimeout(r, delay));\n        return uploadPart(opts, retryCount++);\n    }\n    await opts.fetch((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateUploadThingURL)(\"/api/failureCallback\"), {\n        method: \"POST\",\n        body: JSON.stringify({\n            fileKey: opts.key\n        }),\n        headers: opts.utRequestHeaders\n    });\n    const text = await s3Res.text();\n    const parsed = maybeParseResponseXML(text);\n    if (parsed == null ? void 0 : parsed.message) {\n        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n            code: \"UPLOAD_FAILED\",\n            message: parsed.message\n        });\n    }\n    throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n        code: \"UPLOAD_FAILED\",\n        message: \"Failed to upload file to storage provider\",\n        cause: s3Res\n    });\n}\nasync function uploadPartWithProgress(opts, retryCount = 0) {\n    return new Promise((resolve, reject)=>{\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"PUT\", opts.url, true);\n        xhr.setRequestHeader(\"Content-Type\", opts.fileType);\n        xhr.setRequestHeader(\"Content-Disposition\", [\n            opts.contentDisposition,\n            `filename=\"${encodeURI(opts.fileName)}\"`,\n            `filename*=UTF-8''${encodeURI(opts.fileName)}`\n        ].join(\"; \"));\n        xhr.onload = async ()=>{\n            if (xhr.status >= 200 && xhr.status < 300) {\n                const etag = xhr.getResponseHeader(\"Etag\");\n                etag ? resolve(etag) : reject(\"NO ETAG\");\n            } else if (retryCount < opts.maxRetries) {\n                const delay = Math.pow(2, retryCount) * 1e3;\n                await new Promise((res)=>setTimeout(res, delay));\n                await uploadPartWithProgress(opts, retryCount + 1);\n            } else {\n                reject(\"Max retries exceeded\");\n            }\n        };\n        let lastProgress = 0;\n        xhr.onerror = async ()=>{\n            lastProgress = 0;\n            if (retryCount < opts.maxRetries) {\n                const delay = Math.pow(2, retryCount) * 100;\n                await new Promise((res)=>setTimeout(res, delay));\n                await uploadPartWithProgress(opts, retryCount + 1);\n            } else {\n                reject(\"Max retries exceeded\");\n            }\n        };\n        xhr.upload.onprogress = (e)=>{\n            const delta = e.loaded - lastProgress;\n            lastProgress += delta;\n            opts.onProgress(delta);\n        };\n        xhr.send(opts.chunk);\n    });\n}\n //# sourceMappingURL=chunk-S3R3VXRK.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1TM1IzVlhSSy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLDZCQUE2QjtBQUNrRDtBQUUvRSxrQ0FBa0M7QUFDbEMsSUFBSUUsd0JBQXdCLENBQUNDO0lBQzNCLE1BQU1DLFlBQVlELFNBQVNFLEtBQUssQ0FBQztJQUNqQyxNQUFNQyxlQUFlSCxTQUFTRSxLQUFLLENBQUM7SUFDcEMsTUFBTUUsT0FBT0gsYUFBYSxPQUFPLEtBQUssSUFBSUEsU0FBUyxDQUFDLEVBQUU7SUFDdEQsTUFBTUksVUFBVUYsZ0JBQWdCLE9BQU8sS0FBSyxJQUFJQSxZQUFZLENBQUMsRUFBRTtJQUMvRCxJQUFJLENBQUNDLFFBQVEsQ0FBQ0MsU0FDWixPQUFPO0lBQ1QsT0FBTztRQUFFRCxNQUFNRSx1QkFBdUIsQ0FBQ0YsS0FBSyxJQUFJRztRQUFvQkY7SUFBUTtBQUM5RTtBQUNBLElBQUlFLHFCQUFxQjtBQUN6QixJQUFJRCwwQkFBMEI7SUFDNUJFLGNBQWM7SUFDZCxnQkFBZ0I7SUFDaEJDLGdCQUFnQjtJQUNoQixrQkFBa0I7SUFDbEJDLGdCQUFnQjtJQUNoQixrQkFBa0I7SUFDbEJDLGNBQWM7SUFDZCxrQkFBa0I7SUFDbEJDLHFDQUFxQztJQUNyQyxrQkFBa0I7SUFDbEJDLGVBQWU7SUFDZiw0QkFBNEI7SUFDNUJDLGlCQUFpQjtJQUNqQixrQkFBa0I7SUFDbEJDLDBCQUEwQjtBQUU1QjtBQUVBLDZCQUE2QjtBQUM3QixlQUFlQyxXQUFXQyxJQUFJLEVBQUVDLGFBQWEsQ0FBQztJQUM1QyxNQUFNQyxRQUFRLE1BQU1GLEtBQUtHLEtBQUssQ0FBQ0gsS0FBS0ksR0FBRyxFQUFFO1FBQ3ZDQyxRQUFRO1FBQ1JDLE1BQU1OLEtBQUtPLEtBQUs7UUFDaEJDLFNBQVM7WUFDUCxnQkFBZ0JSLEtBQUtTLFdBQVc7WUFDaEMsdUJBQXVCO2dCQUNyQlQsS0FBS1Usa0JBQWtCO2dCQUN2QixDQUFDLFVBQVUs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Z0JBQzNDLE1BQU1ZLHVCQUF1Qi9CLE1BQU1DLGFBQWE7WUFDbEQsT0FBTztnQkFDTGdDLE9BQU87WUFDVDtRQUNGO1FBQ0FDLElBQUlhLE1BQU0sQ0FBQ0MsVUFBVSxHQUFHLENBQUNDO1lBQ3ZCLE1BQU1DLFFBQVFELEVBQUVFLE1BQU0sR0FBR047WUFDekJBLGdCQUFnQks7WUFDaEJsRCxLQUFLb0QsVUFBVSxDQUFDRjtRQUNsQjtRQUNBaEIsSUFBSW1CLElBQUksQ0FBQ3JELEtBQUtPLEtBQUs7SUFDckI7QUFDRjtBQU1FLENBQ0YsMkNBQTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaXNvbW9ycGhpYy8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L2NodW5rLVMzUjNWWFJLLm1qcz9hNDRmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9pbnRlcm5hbC9tdWx0aS1wYXJ0LnRzXG5pbXBvcnQgeyBnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMLCBVcGxvYWRUaGluZ0Vycm9yIH0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcblxuLy8gc3JjL2ludGVybmFsL3MzLWVycm9yLXBhcnNlci50c1xudmFyIG1heWJlUGFyc2VSZXNwb25zZVhNTCA9IChtYXliZVhtbCkgPT4ge1xuICBjb25zdCBjb2RlTWF0Y2ggPSBtYXliZVhtbC5tYXRjaCgvPENvZGU+KC4qPyk8XFwvQ29kZT4vcyk7XG4gIGNvbnN0IG1lc3NhZ2VNYXRjaCA9IG1heWJlWG1sLm1hdGNoKC88TWVzc2FnZT4oLio/KTxcXC9NZXNzYWdlPi9zKTtcbiAgY29uc3QgY29kZSA9IGNvZGVNYXRjaCA9PSBudWxsID8gdm9pZCAwIDogY29kZU1hdGNoWzFdO1xuICBjb25zdCBtZXNzYWdlID0gbWVzc2FnZU1hdGNoID09IG51bGwgPyB2b2lkIDAgOiBtZXNzYWdlTWF0Y2hbMV07XG4gIGlmICghY29kZSB8fCAhbWVzc2FnZSlcbiAgICByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIHsgY29kZTogczNDb2RlVG9VcGxvYWRUaGluZ0NvZGVbY29kZV0gPz8gREVGQVVMVF9FUlJPUl9DT0RFLCBtZXNzYWdlIH07XG59O1xudmFyIERFRkFVTFRfRVJST1JfQ09ERSA9IFwiVVBMT0FEX0ZBSUxFRFwiO1xudmFyIHMzQ29kZVRvVXBsb2FkVGhpbmdDb2RlID0ge1xuICBBY2Nlc3NEZW5pZWQ6IFwiRk9SQklEREVOXCIsXG4gIC8vIDQwMyBGb3JiaWRkZW5cbiAgRW50aXR5VG9vU21hbGw6IFwiVE9PX1NNQUxMXCIsXG4gIC8vIDQwMCBCYWQgUmVxdWVzdFxuICBFbnRpdHlUb29MYXJnZTogXCJUT09fTEFSR0VcIixcbiAgLy8gNDAwIEJhZCBSZXF1ZXN0XG4gIEV4cGlyZWRUb2tlbjogXCJGT1JCSURERU5cIixcbiAgLy8gNDAwIEJhZCBSZXF1ZXN0XG4gIEluY29ycmVjdE51bWJlck9mRmlsZXNJblBvc3RSZXF1ZXN0OiBcIlRPT19NQU5ZX0ZJTEVTXCIsXG4gIC8vIDQwMCBCYWQgUmVxdWVzdFxuICBJbnRlcm5hbEVycm9yOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAvLyA1MDAgSW50ZXJuYWwgU2VydmVyIEVycm9yXG4gIEtleVRvb0xvbmdFcnJvcjogXCJLRVlfVE9PX0xPTkdcIixcbiAgLy8gNDAwIEJhZCBSZXF1ZXN0XG4gIE1heE1lc3NhZ2VMZW5ndGhFeGNlZWRlZDogXCJUT09fTEFSR0VcIlxuICAvLyA0MDAgQmFkIFJlcXVlc3Rcbn07XG5cbi8vIHNyYy9pbnRlcm5hbC9tdWx0aS1wYXJ0LnRzXG5hc3luYyBmdW5jdGlvbiB1cGxvYWRQYXJ0KG9wdHMsIHJldHJ5Q291bnQgPSAwKSB7XG4gIGNvbnN0IHMzUmVzID0gYXdhaXQgb3B0cy5mZXRjaChvcHRzLnVybCwge1xuICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICBib2R5OiBvcHRzLmNodW5rLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IG9wdHMuY29udGVudFR5cGUsXG4gICAgICBcIkNvbnRlbnQtRGlzcG9zaXRpb25cIjogW1xuICAgICAgICBvcHRzLmNvbnRlbnREaXNwb3NpdGlvbixcbiAgICAgICAgYGZpbGVuYW1lPVwiJHtlbmNvZGVVUkkob3B0cy5maWxlTmFtZSl9XCJgLFxuICAgICAgICBgZmlsZW5hbWUqPVVURi04Jycke2VuY29kZVVSSShvcHRzLmZpbGVOYW1lKX1gXG4gICAgICBdLmpvaW4oXCI7IFwiKVxuICAgIH1cbiAgfSk7XG4gIGlmIChzM1Jlcy5vaykge1xuICAgIGNvbnN0IGV0YWcgPSBzM1Jlcy5oZWFkZXJzLmdldChcIkV0YWdcIik7XG4gICAgaWYgKCFldGFnKSB7XG4gICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgICAgICBtZXNzYWdlOiBcIk1pc3NpbmcgRXRhZyBoZWFkZXIgZnJvbSB1cGxvYWRlZCBwYXJ0XCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZXRhZy5yZXBsYWNlKC9cIi9nLCBcIlwiKTtcbiAgfVxuICBpZiAocmV0cnlDb3VudCA8IG9wdHMubWF4UmV0cmllcykge1xuICAgIGNvbnN0IGRlbGF5ID0gMiAqKiByZXRyeUNvdW50ICogMWUzO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyKSA9PiBzZXRUaW1lb3V0KHIsIGRlbGF5KSk7XG4gICAgcmV0dXJuIHVwbG9hZFBhcnQob3B0cywgcmV0cnlDb3VudCsrKTtcbiAgfVxuICBhd2FpdCBvcHRzLmZldGNoKGdlbmVyYXRlVXBsb2FkVGhpbmdVUkwoXCIvYXBpL2ZhaWx1cmVDYWxsYmFja1wiKSwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgZmlsZUtleTogb3B0cy5rZXlcbiAgICB9KSxcbiAgICBoZWFkZXJzOiBvcHRzLnV0UmVxdWVzdEhlYWRlcnNcbiAgfSk7XG4gIGNvbnN0IHRleHQgPSBhd2FpdCBzM1Jlcy50ZXh0KCk7XG4gIGNvbnN0IHBhcnNlZCA9IG1heWJlUGFyc2VSZXNwb25zZVhNTCh0ZXh0KTtcbiAgaWYgKHBhcnNlZCA9PSBudWxsID8gdm9pZCAwIDogcGFyc2VkLm1lc3NhZ2UpIHtcbiAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICBjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcbiAgICAgIG1lc3NhZ2U6IHBhcnNlZC5tZXNzYWdlXG4gICAgfSk7XG4gIH1cbiAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHVwbG9hZCBmaWxlIHRvIHN0b3JhZ2UgcHJvdmlkZXJcIixcbiAgICBjYXVzZTogczNSZXNcbiAgfSk7XG59XG5hc3luYyBmdW5jdGlvbiB1cGxvYWRQYXJ0V2l0aFByb2dyZXNzKG9wdHMsIHJldHJ5Q291bnQgPSAwKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oXCJQVVRcIiwgb3B0cy51cmwsIHRydWUpO1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIG9wdHMuZmlsZVR5cGUpO1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFxuICAgICAgXCJDb250ZW50LURpc3Bvc2l0aW9uXCIsXG4gICAgICBbXG4gICAgICAgIG9wdHMuY29udGVudERpc3Bvc2l0aW9uLFxuICAgICAgICBgZmlsZW5hbWU9XCIke2VuY29kZVVSSShvcHRzLmZpbGVOYW1lKX1cImAsXG4gICAgICAgIGBmaWxlbmFtZSo9VVRGLTgnJyR7ZW5jb2RlVVJJKG9wdHMuZmlsZU5hbWUpfWBcbiAgICAgIF0uam9pbihcIjsgXCIpXG4gICAgKTtcbiAgICB4aHIub25sb2FkID0gYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDApIHtcbiAgICAgICAgY29uc3QgZXRhZyA9IHhoci5nZXRSZXNwb25zZUhlYWRlcihcIkV0YWdcIik7XG4gICAgICAgIGV0YWcgPyByZXNvbHZlKGV0YWcpIDogcmVqZWN0KFwiTk8gRVRBR1wiKTtcbiAgICAgIH0gZWxzZSBpZiAocmV0cnlDb3VudCA8IG9wdHMubWF4UmV0cmllcykge1xuICAgICAgICBjb25zdCBkZWxheSA9IE1hdGgucG93KDIsIHJldHJ5Q291bnQpICogMWUzO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzKSA9PiBzZXRUaW1lb3V0KHJlcywgZGVsYXkpKTtcbiAgICAgICAgYXdhaXQgdXBsb2FkUGFydFdpdGhQcm9ncmVzcyhvcHRzLCByZXRyeUNvdW50ICsgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWplY3QoXCJNYXggcmV0cmllcyBleGNlZWRlZFwiKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGxldCBsYXN0UHJvZ3Jlc3MgPSAwO1xuICAgIHhoci5vbmVycm9yID0gYXN5bmMgKCkgPT4ge1xuICAgICAgbGFzdFByb2dyZXNzID0gMDtcbiAgICAgIGlmIChyZXRyeUNvdW50IDwgb3B0cy5tYXhSZXRyaWVzKSB7XG4gICAgICAgIGNvbnN0IGRlbGF5ID0gTWF0aC5wb3coMiwgcmV0cnlDb3VudCkgKiAxMDA7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXMpID0+IHNldFRpbWVvdXQocmVzLCBkZWxheSkpO1xuICAgICAgICBhd2FpdCB1cGxvYWRQYXJ0V2l0aFByb2dyZXNzKG9wdHMsIHJldHJ5Q291bnQgKyAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlamVjdChcIk1heCByZXRyaWVzIGV4Y2VlZGVkXCIpO1xuICAgICAgfVxuICAgIH07XG4gICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gKGUpID0+IHtcbiAgICAgIGNvbnN0IGRlbHRhID0gZS5sb2FkZWQgLSBsYXN0UHJvZ3Jlc3M7XG4gICAgICBsYXN0UHJvZ3Jlc3MgKz0gZGVsdGE7XG4gICAgICBvcHRzLm9uUHJvZ3Jlc3MoZGVsdGEpO1xuICAgIH07XG4gICAgeGhyLnNlbmQob3B0cy5jaHVuayk7XG4gIH0pO1xufVxuXG5leHBvcnQge1xuICBtYXliZVBhcnNlUmVzcG9uc2VYTUwsXG4gIHVwbG9hZFBhcnQsXG4gIHVwbG9hZFBhcnRXaXRoUHJvZ3Jlc3Ncbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1TM1IzVlhSSy5tanMubWFwIl0sIm5hbWVzIjpbImdlbmVyYXRlVXBsb2FkVGhpbmdVUkwiLCJVcGxvYWRUaGluZ0Vycm9yIiwibWF5YmVQYXJzZVJlc3BvbnNlWE1MIiwibWF5YmVYbWwiLCJjb2RlTWF0Y2giLCJtYXRjaCIsIm1lc3NhZ2VNYXRjaCIsImNvZGUiLCJtZXNzYWdlIiwiczNDb2RlVG9VcGxvYWRUaGluZ0NvZGUiLCJERUZBVUxUX0VSUk9SX0NPREUiLCJBY2Nlc3NEZW5pZWQiLCJFbnRpdHlUb29TbWFsbCIsIkVudGl0eVRvb0xhcmdlIiwiRXhwaXJlZFRva2VuIiwiSW5jb3JyZWN0TnVtYmVyT2ZGaWxlc0luUG9zdFJlcXVlc3QiLCJJbnRlcm5hbEVycm9yIiwiS2V5VG9vTG9uZ0Vycm9yIiwiTWF4TWVzc2FnZUxlbmd0aEV4Y2VlZGVkIiwidXBsb2FkUGFydCIsIm9wdHMiLCJyZXRyeUNvdW50IiwiczNSZXMiLCJmZXRjaCIsInVybCIsIm1ldGhvZCIsImJvZHkiLCJjaHVuayIsImhlYWRlcnMiLCJjb250ZW50VHlwZSIsImNvbnRlbnREaXNwb3NpdGlvbiIsImVuY29kZVVSSSIsImZpbGVOYW1lIiwiam9pbiIsIm9rIiwiZXRhZyIsImdldCIsInJlcGxhY2UiLCJtYXhSZXRyaWVzIiwiZGVsYXkiLCJQcm9taXNlIiwiciIsInNldFRpbWVvdXQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlsZUtleSIsImtleSIsInV0UmVxdWVzdEhlYWRlcnMiLCJ0ZXh0IiwicGFyc2VkIiwiY2F1c2UiLCJ1cGxvYWRQYXJ0V2l0aFByb2dyZXNzIiwicmVzb2x2ZSIsInJlamVjdCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJmaWxlVHlwZSIsIm9ubG9hZCIsInN0YXR1cyIsImdldFJlc3BvbnNlSGVhZGVyIiwiTWF0aCIsInBvdyIsInJlcyIsImxhc3RQcm9ncmVzcyIsIm9uZXJyb3IiLCJ1cGxvYWQiLCJvbnByb2dyZXNzIiwiZSIsImRlbHRhIiwibG9hZGVkIiwib25Qcm9ncmVzcyIsInNlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/uploadthing/dist/client.mjs":
/*!**************************************************!*\
  !*** ./node_modules/uploadthing/dist/client.mjs ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DANGEROUS__uploadFiles: () => (/* binding */ DANGEROUS__uploadFiles),\n/* harmony export */   INTERNAL_DO_NOT_USE__fatalClientError: () => (/* binding */ INTERNAL_DO_NOT_USE__fatalClientError),\n/* harmony export */   INTERNAL_doFormatting: () => (/* binding */ INTERNAL_doFormatting),\n/* harmony export */   allowedContentTextLabelGenerator: () => (/* binding */ allowedContentTextLabelGenerator),\n/* harmony export */   capitalizeStart: () => (/* binding */ capitalizeStart),\n/* harmony export */   classNames: () => (/* binding */ classNames),\n/* harmony export */   contentFieldToContent: () => (/* binding */ contentFieldToContent),\n/* harmony export */   genUploader: () => (/* binding */ genUploader),\n/* harmony export */   generateClientDropzoneAccept: () => (/* binding */ generateClientDropzoneAccept),\n/* harmony export */   generateMimeTypes: () => (/* binding */ generateMimeTypes),\n/* harmony export */   generatePermittedFileTypes: () => (/* binding */ generatePermittedFileTypes),\n/* harmony export */   getFullApiUrl: () => (/* reexport safe */ _chunk_4PDGVH57_mjs__WEBPACK_IMPORTED_MODULE_1__.getFullApiUrl),\n/* harmony export */   styleFieldToClassName: () => (/* binding */ styleFieldToClassName),\n/* harmony export */   styleFieldToCssObject: () => (/* binding */ styleFieldToCssObject)\n/* harmony export */ });\n/* harmony import */ var _chunk_S3R3VXRK_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-S3R3VXRK.mjs */ \"(ssr)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs\");\n/* harmony import */ var _chunk_4PDGVH57_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-4PDGVH57.mjs */ \"(ssr)/./node_modules/uploadthing/dist/chunk-4PDGVH57.mjs\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @uploadthing/shared */ \"(ssr)/./node_modules/@uploadthing/shared/dist/index.mjs\");\n\n\n// src/client.ts\n\n// src/internal/ut-reporter.ts\n\nvar createAPIRequestUrl = (config)=>{\n    const url = new URL(config.url);\n    const queryParams = new URLSearchParams(url.search);\n    queryParams.set(\"actionType\", config.actionType);\n    queryParams.set(\"slug\", config.slug);\n    url.search = queryParams.toString();\n    return url;\n};\nvar createUTReporter = (cfg)=>{\n    return async (type, payload)=>{\n        const url = createAPIRequestUrl({\n            url: cfg.url,\n            slug: cfg.endpoint,\n            actionType: type\n        });\n        const response = await fetch(url, {\n            method: \"POST\",\n            body: JSON.stringify(payload),\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        switch(type){\n            case \"failure\":\n                {\n                    const p = payload;\n                    const parsed = (0,_chunk_S3R3VXRK_mjs__WEBPACK_IMPORTED_MODULE_0__.maybeParseResponseXML)(p.s3Error ?? \"\");\n                    if (parsed == null ? void 0 : parsed.message) {\n                        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                            code: parsed.code,\n                            message: parsed.message\n                        });\n                    } else {\n                        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                            code: \"UPLOAD_FAILED\",\n                            message: `Failed to upload file ${p.fileName} to S3`,\n                            cause: p.s3Error\n                        });\n                    }\n                }\n        }\n        return response.ok;\n    };\n};\n// src/internal/component-theming.ts\n\nvar generatePermittedFileTypes = (config)=>{\n    const fileTypes = config ? (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.objectKeys)(config) : [];\n    const maxFileCount = config ? Object.values(config).map((v)=>v.maxFileCount) : [];\n    return {\n        fileTypes,\n        multiple: maxFileCount.some((v)=>v && v > 1)\n    };\n};\nvar capitalizeStart = (str)=>{\n    return str.charAt(0).toUpperCase() + str.slice(1);\n};\nvar INTERNAL_doFormatting = (config)=>{\n    if (!config) return \"\";\n    const allowedTypes = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.objectKeys)(config);\n    const formattedTypes = allowedTypes.map((f)=>f === \"blob\" ? \"file\" : f);\n    if (formattedTypes.length > 1) {\n        const lastType = formattedTypes.pop();\n        return `${formattedTypes.join(\"s, \")} and ${lastType}s`;\n    }\n    const key = allowedTypes[0];\n    const formattedKey = formattedTypes[0];\n    const { maxFileSize, maxFileCount } = config[key];\n    if (maxFileCount && maxFileCount > 1) {\n        return `${formattedKey}s up to ${maxFileSize}, max ${maxFileCount}`;\n    } else {\n        return `${formattedKey} (${maxFileSize})`;\n    }\n};\nvar allowedContentTextLabelGenerator = (config)=>{\n    return capitalizeStart(INTERNAL_doFormatting(config));\n};\nvar styleFieldToClassName = (styleField, args)=>{\n    if (typeof styleField === \"string\") return styleField;\n    if (typeof styleField === \"function\") {\n        const result = styleField(args);\n        if (typeof result === \"string\") return result;\n    }\n    return \"\";\n};\nvar styleFieldToCssObject = (styleField, args)=>{\n    if (typeof styleField === \"object\") return styleField;\n    if (typeof styleField === \"function\") {\n        const result = styleField(args);\n        if (typeof result === \"object\") return result;\n    }\n    return {};\n};\nvar contentFieldToContent = (contentField, arg)=>{\n    if (!contentField) return null;\n    if (typeof contentField !== \"function\") return contentField;\n    if (typeof contentField === \"function\") {\n        const result = contentField(arg);\n        return result;\n    }\n};\n// src/client.ts\nvar INTERNAL_DO_NOT_USE__fatalClientError = (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n        code: \"INTERNAL_CLIENT_ERROR\",\n        message: \"Something went wrong. Please report this to UploadThing.\",\n        cause: e\n    });\nvar DANGEROUS__uploadFiles = async (endpoint, opts)=>{\n    const reportEventToUT = createUTReporter({\n        endpoint: String(endpoint),\n        url: opts.url\n    });\n    const s3ConnectionRes = await fetch(createAPIRequestUrl({\n        url: opts.url,\n        slug: String(endpoint),\n        actionType: \"upload\"\n    }), {\n        method: \"POST\",\n        body: JSON.stringify({\n            input: \"input\" in opts ? opts.input : null,\n            files: opts.files.map((f)=>({\n                    name: f.name,\n                    size: f.size\n                }))\n        }),\n        // Express requires Content-Type to be explicitly set to parse body properly\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    }).then(async (res)=>{\n        if (!res.ok) {\n            const error = await _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError.fromResponse(res);\n            throw error;\n        }\n        const jsonOrError = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.safeParseJSON)(res);\n        if (jsonOrError instanceof Error) {\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: jsonOrError.message,\n                cause: res\n            });\n        }\n        return jsonOrError;\n    });\n    if (!s3ConnectionRes || !Array.isArray(s3ConnectionRes)) {\n        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n            code: \"BAD_REQUEST\",\n            message: \"No URL. How did you even get here?\",\n            cause: s3ConnectionRes\n        });\n    }\n    const fileUploadPromises = s3ConnectionRes.map(async (presigned)=>{\n        var _a;\n        const file = opts.files.find((f)=>f.name === presigned.fileName);\n        if (!file) {\n            console.error(\"No file found for presigned URL\", presigned);\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                code: \"NOT_FOUND\",\n                message: \"No file found for presigned URL\",\n                cause: `Expected file with name ${presigned.fileName} but got '${opts.files.join(\",\")}'`\n            });\n        }\n        const { presignedUrls, uploadId, chunkSize, contentDisposition, key, pollingUrl, pollingJwt } = presigned;\n        let uploadedBytes = 0;\n        let etags;\n        (_a = opts.onUploadBegin) == null ? void 0 : _a.call(opts, {\n            file: file.name\n        });\n        try {\n            etags = await Promise.all(presignedUrls.map(async (url, index)=>{\n                const offset = chunkSize * index;\n                const end = Math.min(offset + chunkSize, file.size);\n                const chunk = file.slice(offset, end);\n                const etag = await (0,_chunk_S3R3VXRK_mjs__WEBPACK_IMPORTED_MODULE_0__.uploadPartWithProgress)({\n                    url,\n                    chunk,\n                    contentDisposition,\n                    fileType: file.type,\n                    fileName: file.name,\n                    maxRetries: 10,\n                    onProgress: (delta)=>{\n                        var _a2;\n                        uploadedBytes += delta;\n                        const percent = uploadedBytes / file.size * 100;\n                        (_a2 = opts.onUploadProgress) == null ? void 0 : _a2.call(opts, {\n                            file: file.name,\n                            progress: percent\n                        });\n                    }\n                });\n                return {\n                    tag: etag,\n                    partNumber: index + 1\n                };\n            }));\n        } catch (error) {\n            await reportEventToUT(\"failure\", {\n                fileKey: key,\n                uploadId,\n                fileName: file.name,\n                s3Error: error.toString()\n            });\n            throw \"unreachable\";\n        }\n        const uploadOk = await reportEventToUT(\"multipart-complete\", {\n            uploadId,\n            fileKey: key,\n            etags\n        });\n        if (!uploadOk) {\n            console.log(\"Failed to alert UT of upload completion\");\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                code: \"UPLOAD_FAILED\",\n                message: \"Failed to alert UT of upload completion\"\n            });\n        }\n        await new Promise((r)=>setTimeout(r, 750));\n        const serverData = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.withExponentialBackoff)(async ()=>{\n            const res = await fetch(pollingUrl, {\n                headers: {\n                    authorization: pollingJwt\n                }\n            }).then((r)=>r.json());\n            return res.status === \"done\" ? res.callbackData : void 0;\n        });\n        return {\n            name: file.name,\n            size: file.size,\n            key: presigned.key,\n            serverData,\n            url: \"https://utfs.io/f/\" + key\n        };\n    });\n    return Promise.all(fileUploadPromises);\n};\nvar genUploader = (initOpts)=>{\n    const url = (initOpts == null ? void 0 : initOpts.url) instanceof URL ? initOpts.url : (0,_chunk_4PDGVH57_mjs__WEBPACK_IMPORTED_MODULE_1__.getFullApiUrl)(initOpts == null ? void 0 : initOpts.url);\n    return (endpoint, opts)=>// eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        DANGEROUS__uploadFiles(endpoint, {\n            ...opts,\n            url\n        });\n};\nvar classNames = (...classes)=>{\n    return classes.filter(Boolean).join(\" \");\n};\nvar generateMimeTypes = (fileTypes)=>{\n    const accepted = fileTypes.map((type)=>{\n        if (type === \"blob\") return \"blob\";\n        if (type === \"pdf\") return \"application/pdf\";\n        if (type.includes(\"/\")) return type;\n        else return `${type}/*`;\n    });\n    if (accepted.includes(\"blob\")) {\n        return void 0;\n    }\n    return accepted;\n};\nvar generateClientDropzoneAccept = (fileTypes)=>{\n    const mimeTypes = generateMimeTypes(fileTypes);\n    if (!mimeTypes) return void 0;\n    return Object.fromEntries(mimeTypes.map((type)=>[\n            type,\n            []\n        ]));\n};\n //# sourceMappingURL=client.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jbGllbnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRzhCO0FBR0E7QUFFOUIsZ0JBQWdCO0FBS2E7QUFFN0IsOEJBQThCO0FBQ3lCO0FBQ3ZELElBQUlPLHNCQUFzQixDQUFDQztJQUN6QixNQUFNQyxNQUFNLElBQUlDLElBQUlGLE9BQU9DLEdBQUc7SUFDOUIsTUFBTUUsY0FBYyxJQUFJQyxnQkFBZ0JILElBQUlJLE1BQU07SUFDbERGLFlBQVlHLEdBQUcsQ0FBQyxjQUFjTixPQUFPTyxVQUFVO0lBQy9DSixZQUFZRyxHQUFHLENBQUMsUUFBUU4sT0FBT1EsSUFBSTtJQUNuQ1AsSUFBSUksTUFBTSxHQUFHRixZQUFZTSxRQUFRO0lBQ2pDLE9BQU9SO0FBQ1Q7QUFDQSxJQUFJUyxtQkFBbUIsQ0FBQ0M7SUFDdEIsT0FBTyxPQUFPQyxNQUFNQztRQUNsQixNQUFNWixNQUFNRixvQkFBb0I7WUFDOUJFLEtBQUtVLElBQUlWLEdBQUc7WUFDWk8sTUFBTUcsSUFBSUcsUUFBUTtZQUNsQlAsWUFBWUs7UUFDZDtRQUNBLE1BQU1HLFdBQVcsTUFBTUMsTUFBTWYsS0FBSztZQUNoQ2dCLFFBQVE7WUFDUkMsTUFBTUMsS0FBS0MsU0FBUyxDQUFDUDtZQUNyQlEsU0FBUztnQkFBRSxnQkFBZ0I7WUFBbUI7UUFDaEQ7UUFDQSxPQUFRVDtZQUNOLEtBQUs7Z0JBQVc7b0JBQ2QsTUFBTVUsSUFBSVQ7b0JBQ1YsTUFBTVUsU0FBUy9CLDBFQUFxQkEsQ0FBQzhCLEVBQUVFLE9BQU8sSUFBSTtvQkFDbEQsSUFBSUQsVUFBVSxPQUFPLEtBQUssSUFBSUEsT0FBT0UsT0FBTyxFQUFFO3dCQUM1QyxNQUFNLElBQUk3QixpRUFBZ0JBLENBQUM7NEJBQ3pCOEIsTUFBTUgsT0FBT0csSUFBSTs0QkFDakJELFNBQVNGLE9BQU9FLE9BQU87d0JBQ3pCO29CQUNGLE9BQU87d0JBQ0wsTUFBTSxJQUFJ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LENBQUN4QixPQUFTO1lBQUNBO1lBQU0sRUFBRTtTQUFDO0FBQzlEO0FBZ0JFLENBQ0YsbUNBQW1DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaXNvbW9ycGhpYy8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L2NsaWVudC5tanM/YTQ1NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBtYXliZVBhcnNlUmVzcG9uc2VYTUwsXG4gIHVwbG9hZFBhcnRXaXRoUHJvZ3Jlc3Ncbn0gZnJvbSBcIi4vY2h1bmstUzNSM1ZYUksubWpzXCI7XG5pbXBvcnQge1xuICBnZXRGdWxsQXBpVXJsXG59IGZyb20gXCIuL2NodW5rLTRQREdWSDU3Lm1qc1wiO1xuXG4vLyBzcmMvY2xpZW50LnRzXG5pbXBvcnQge1xuICBzYWZlUGFyc2VKU09OLFxuICBVcGxvYWRUaGluZ0Vycm9yIGFzIFVwbG9hZFRoaW5nRXJyb3IyLFxuICB3aXRoRXhwb25lbnRpYWxCYWNrb2ZmXG59IGZyb20gXCJAdXBsb2FkdGhpbmcvc2hhcmVkXCI7XG5cbi8vIHNyYy9pbnRlcm5hbC91dC1yZXBvcnRlci50c1xuaW1wb3J0IHsgVXBsb2FkVGhpbmdFcnJvciB9IGZyb20gXCJAdXBsb2FkdGhpbmcvc2hhcmVkXCI7XG52YXIgY3JlYXRlQVBJUmVxdWVzdFVybCA9IChjb25maWcpID0+IHtcbiAgY29uc3QgdXJsID0gbmV3IFVSTChjb25maWcudXJsKTtcbiAgY29uc3QgcXVlcnlQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHVybC5zZWFyY2gpO1xuICBxdWVyeVBhcmFtcy5zZXQoXCJhY3Rpb25UeXBlXCIsIGNvbmZpZy5hY3Rpb25UeXBlKTtcbiAgcXVlcnlQYXJhbXMuc2V0KFwic2x1Z1wiLCBjb25maWcuc2x1Zyk7XG4gIHVybC5zZWFyY2ggPSBxdWVyeVBhcmFtcy50b1N0cmluZygpO1xuICByZXR1cm4gdXJsO1xufTtcbnZhciBjcmVhdGVVVFJlcG9ydGVyID0gKGNmZykgPT4ge1xuICByZXR1cm4gYXN5bmMgKHR5cGUsIHBheWxvYWQpID0+IHtcbiAgICBjb25zdCB1cmwgPSBjcmVhdGVBUElSZXF1ZXN0VXJsKHtcbiAgICAgIHVybDogY2ZnLnVybCxcbiAgICAgIHNsdWc6IGNmZy5lbmRwb2ludCxcbiAgICAgIGFjdGlvblR5cGU6IHR5cGVcbiAgICB9KTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxuICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9XG4gICAgfSk7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIFwiZmFpbHVyZVwiOiB7XG4gICAgICAgIGNvbnN0IHAgPSBwYXlsb2FkO1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBtYXliZVBhcnNlUmVzcG9uc2VYTUwocC5zM0Vycm9yID8/IFwiXCIpO1xuICAgICAgICBpZiAocGFyc2VkID09IG51bGwgPyB2b2lkIDAgOiBwYXJzZWQubWVzc2FnZSkge1xuICAgICAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgIGNvZGU6IHBhcnNlZC5jb2RlLFxuICAgICAgICAgICAgbWVzc2FnZTogcGFyc2VkLm1lc3NhZ2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBGYWlsZWQgdG8gdXBsb2FkIGZpbGUgJHtwLmZpbGVOYW1lfSB0byBTM2AsXG4gICAgICAgICAgICBjYXVzZTogcC5zM0Vycm9yXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlLm9rO1xuICB9O1xufTtcblxuLy8gc3JjL2ludGVybmFsL2NvbXBvbmVudC10aGVtaW5nLnRzXG5pbXBvcnQgeyBvYmplY3RLZXlzIH0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcbnZhciBnZW5lcmF0ZVBlcm1pdHRlZEZpbGVUeXBlcyA9IChjb25maWcpID0+IHtcbiAgY29uc3QgZmlsZVR5cGVzID0gY29uZmlnID8gb2JqZWN0S2V5cyhjb25maWcpIDogW107XG4gIGNvbnN0IG1heEZpbGVDb3VudCA9IGNvbmZpZyA/IE9iamVjdC52YWx1ZXMoY29uZmlnKS5tYXAoKHYpID0+IHYubWF4RmlsZUNvdW50KSA6IFtdO1xuICByZXR1cm4geyBmaWxlVHlwZXMsIG11bHRpcGxlOiBtYXhGaWxlQ291bnQuc29tZSgodikgPT4gdiAmJiB2ID4gMSkgfTtcbn07XG52YXIgY2FwaXRhbGl6ZVN0YXJ0ID0gKHN0cikgPT4ge1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xufTtcbnZhciBJTlRFUk5BTF9kb0Zvcm1hdHRpbmcgPSAoY29uZmlnKSA9PiB7XG4gIGlmICghY29uZmlnKVxuICAgIHJldHVybiBcIlwiO1xuICBjb25zdCBhbGxvd2VkVHlwZXMgPSBvYmplY3RLZXlzKGNvbmZpZyk7XG4gIGNvbnN0IGZvcm1hdHRlZFR5cGVzID0gYWxsb3dlZFR5cGVzLm1hcCgoZikgPT4gZiA9PT0gXCJibG9iXCIgPyBcImZpbGVcIiA6IGYpO1xuICBpZiAoZm9ybWF0dGVkVHlwZXMubGVuZ3RoID4gMSkge1xuICAgIGNvbnN0IGxhc3RUeXBlID0gZm9ybWF0dGVkVHlwZXMucG9wKCk7XG4gICAgcmV0dXJuIGAke2Zvcm1hdHRlZFR5cGVzLmpvaW4oXCJzLCBcIil9IGFuZCAke2xhc3RUeXBlfXNgO1xuICB9XG4gIGNvbnN0IGtleSA9IGFsbG93ZWRUeXBlc1swXTtcbiAgY29uc3QgZm9ybWF0dGVkS2V5ID0gZm9ybWF0dGVkVHlwZXNbMF07XG4gIGNvbnN0IHsgbWF4RmlsZVNpemUsIG1heEZpbGVDb3VudCB9ID0gY29uZmlnW2tleV07XG4gIGlmIChtYXhGaWxlQ291bnQgJiYgbWF4RmlsZUNvdW50ID4gMSkge1xuICAgIHJldHVybiBgJHtmb3JtYXR0ZWRLZXl9cyB1cCB0byAke21heEZpbGVTaXplfSwgbWF4ICR7bWF4RmlsZUNvdW50fWA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGAke2Zvcm1hdHRlZEtleX0gKCR7bWF4RmlsZVNpemV9KWA7XG4gIH1cbn07XG52YXIgYWxsb3dlZENvbnRlbnRUZXh0TGFiZWxHZW5lcmF0b3IgPSAoY29uZmlnKSA9PiB7XG4gIHJldHVybiBjYXBpdGFsaXplU3RhcnQoSU5URVJOQUxfZG9Gb3JtYXR0aW5nKGNvbmZpZykpO1xufTtcbnZhciBzdHlsZUZpZWxkVG9DbGFzc05hbWUgPSAoc3R5bGVGaWVsZCwgYXJncykgPT4ge1xuICBpZiAodHlwZW9mIHN0eWxlRmllbGQgPT09IFwic3RyaW5nXCIpXG4gICAgcmV0dXJuIHN0eWxlRmllbGQ7XG4gIGlmICh0eXBlb2Ygc3R5bGVGaWVsZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gc3R5bGVGaWVsZChhcmdzKTtcbiAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gXCJzdHJpbmdcIilcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgcmV0dXJuIFwiXCI7XG59O1xudmFyIHN0eWxlRmllbGRUb0Nzc09iamVjdCA9IChzdHlsZUZpZWxkLCBhcmdzKSA9PiB7XG4gIGlmICh0eXBlb2Ygc3R5bGVGaWVsZCA9PT0gXCJvYmplY3RcIilcbiAgICByZXR1cm4gc3R5bGVGaWVsZDtcbiAgaWYgKHR5cGVvZiBzdHlsZUZpZWxkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBjb25zdCByZXN1bHQgPSBzdHlsZUZpZWxkKGFyZ3MpO1xuICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSBcIm9iamVjdFwiKVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICByZXR1cm4ge307XG59O1xudmFyIGNvbnRlbnRGaWVsZFRvQ29udGVudCA9IChjb250ZW50RmllbGQsIGFyZykgPT4ge1xuICBpZiAoIWNvbnRlbnRGaWVsZClcbiAgICByZXR1cm4gbnVsbDtcbiAgaWYgKHR5cGVvZiBjb250ZW50RmllbGQgIT09IFwiZnVuY3Rpb25cIilcbiAgICByZXR1cm4gY29udGVudEZpZWxkO1xuICBpZiAodHlwZW9mIGNvbnRlbnRGaWVsZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gY29udGVudEZpZWxkKGFyZyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufTtcblxuLy8gc3JjL2NsaWVudC50c1xudmFyIElOVEVSTkFMX0RPX05PVF9VU0VfX2ZhdGFsQ2xpZW50RXJyb3IgPSAoZSkgPT4gbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgY29kZTogXCJJTlRFUk5BTF9DTElFTlRfRVJST1JcIixcbiAgbWVzc2FnZTogXCJTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHJlcG9ydCB0aGlzIHRvIFVwbG9hZFRoaW5nLlwiLFxuICBjYXVzZTogZVxufSk7XG52YXIgREFOR0VST1VTX191cGxvYWRGaWxlcyA9IGFzeW5jIChlbmRwb2ludCwgb3B0cykgPT4ge1xuICBjb25zdCByZXBvcnRFdmVudFRvVVQgPSBjcmVhdGVVVFJlcG9ydGVyKHtcbiAgICBlbmRwb2ludDogU3RyaW5nKGVuZHBvaW50KSxcbiAgICB1cmw6IG9wdHMudXJsXG4gIH0pO1xuICBjb25zdCBzM0Nvbm5lY3Rpb25SZXMgPSBhd2FpdCBmZXRjaChcbiAgICBjcmVhdGVBUElSZXF1ZXN0VXJsKHtcbiAgICAgIHVybDogb3B0cy51cmwsXG4gICAgICBzbHVnOiBTdHJpbmcoZW5kcG9pbnQpLFxuICAgICAgYWN0aW9uVHlwZTogXCJ1cGxvYWRcIlxuICAgIH0pLFxuICAgIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGlucHV0OiBcImlucHV0XCIgaW4gb3B0cyA/IG9wdHMuaW5wdXQgOiBudWxsLFxuICAgICAgICBmaWxlczogb3B0cy5maWxlcy5tYXAoKGYpID0+ICh7IG5hbWU6IGYubmFtZSwgc2l6ZTogZi5zaXplIH0pKVxuICAgICAgfSksXG4gICAgICAvLyBFeHByZXNzIHJlcXVpcmVzIENvbnRlbnQtVHlwZSB0byBiZSBleHBsaWNpdGx5IHNldCB0byBwYXJzZSBib2R5IHByb3Blcmx5XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICB9XG4gICAgfVxuICApLnRoZW4oYXN5bmMgKHJlcykgPT4ge1xuICAgIGlmICghcmVzLm9rKSB7XG4gICAgICBjb25zdCBlcnJvciA9IGF3YWl0IFVwbG9hZFRoaW5nRXJyb3IyLmZyb21SZXNwb25zZShyZXMpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGNvbnN0IGpzb25PckVycm9yID0gYXdhaXQgc2FmZVBhcnNlSlNPTihyZXMpO1xuICAgIGlmIChqc29uT3JFcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgIG1lc3NhZ2U6IGpzb25PckVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNhdXNlOiByZXNcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4ganNvbk9yRXJyb3I7XG4gIH0pO1xuICBpZiAoIXMzQ29ubmVjdGlvblJlcyB8fCAhQXJyYXkuaXNBcnJheShzM0Nvbm5lY3Rpb25SZXMpKSB7XG4gICAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgIG1lc3NhZ2U6IFwiTm8gVVJMLiBIb3cgZGlkIHlvdSBldmVuIGdldCBoZXJlP1wiLFxuICAgICAgY2F1c2U6IHMzQ29ubmVjdGlvblJlc1xuICAgIH0pO1xuICB9XG4gIGNvbnN0IGZpbGVVcGxvYWRQcm9taXNlcyA9IHMzQ29ubmVjdGlvblJlcy5tYXAoYXN5bmMgKHByZXNpZ25lZCkgPT4ge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCBmaWxlID0gb3B0cy5maWxlcy5maW5kKChmKSA9PiBmLm5hbWUgPT09IHByZXNpZ25lZC5maWxlTmFtZSk7XG4gICAgaWYgKCFmaWxlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiTm8gZmlsZSBmb3VuZCBmb3IgcHJlc2lnbmVkIFVSTFwiLCBwcmVzaWduZWQpO1xuICAgICAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgY29kZTogXCJOT1RfRk9VTkRcIixcbiAgICAgICAgbWVzc2FnZTogXCJObyBmaWxlIGZvdW5kIGZvciBwcmVzaWduZWQgVVJMXCIsXG4gICAgICAgIGNhdXNlOiBgRXhwZWN0ZWQgZmlsZSB3aXRoIG5hbWUgJHtwcmVzaWduZWQuZmlsZU5hbWV9IGJ1dCBnb3QgJyR7b3B0cy5maWxlcy5qb2luKFwiLFwiKX0nYFxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHtcbiAgICAgIHByZXNpZ25lZFVybHMsXG4gICAgICB1cGxvYWRJZCxcbiAgICAgIGNodW5rU2l6ZSxcbiAgICAgIGNvbnRlbnREaXNwb3NpdGlvbixcbiAgICAgIGtleSxcbiAgICAgIHBvbGxpbmdVcmwsXG4gICAgICBwb2xsaW5nSnd0XG4gICAgfSA9IHByZXNpZ25lZDtcbiAgICBsZXQgdXBsb2FkZWRCeXRlcyA9IDA7XG4gICAgbGV0IGV0YWdzO1xuICAgIChfYSA9IG9wdHMub25VcGxvYWRCZWdpbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwob3B0cywgeyBmaWxlOiBmaWxlLm5hbWUgfSk7XG4gICAgdHJ5IHtcbiAgICAgIGV0YWdzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIHByZXNpZ25lZFVybHMubWFwKGFzeW5jICh1cmwsIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gY2h1bmtTaXplICogaW5kZXg7XG4gICAgICAgICAgY29uc3QgZW5kID0gTWF0aC5taW4ob2Zmc2V0ICsgY2h1bmtTaXplLCBmaWxlLnNpemUpO1xuICAgICAgICAgIGNvbnN0IGNodW5rID0gZmlsZS5zbGljZShvZmZzZXQsIGVuZCk7XG4gICAgICAgICAgY29uc3QgZXRhZyA9IGF3YWl0IHVwbG9hZFBhcnRXaXRoUHJvZ3Jlc3Moe1xuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgY2h1bmssXG4gICAgICAgICAgICBjb250ZW50RGlzcG9zaXRpb24sXG4gICAgICAgICAgICBmaWxlVHlwZTogZmlsZS50eXBlLFxuICAgICAgICAgICAgZmlsZU5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICAgIG1heFJldHJpZXM6IDEwLFxuICAgICAgICAgICAgb25Qcm9ncmVzczogKGRlbHRhKSA9PiB7XG4gICAgICAgICAgICAgIHZhciBfYTI7XG4gICAgICAgICAgICAgIHVwbG9hZGVkQnl0ZXMgKz0gZGVsdGE7XG4gICAgICAgICAgICAgIGNvbnN0IHBlcmNlbnQgPSB1cGxvYWRlZEJ5dGVzIC8gZmlsZS5zaXplICogMTAwO1xuICAgICAgICAgICAgICAoX2EyID0gb3B0cy5vblVwbG9hZFByb2dyZXNzKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLmNhbGwob3B0cywgeyBmaWxlOiBmaWxlLm5hbWUsIHByb2dyZXNzOiBwZXJjZW50IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiB7IHRhZzogZXRhZywgcGFydE51bWJlcjogaW5kZXggKyAxIH07XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhd2FpdCByZXBvcnRFdmVudFRvVVQoXCJmYWlsdXJlXCIsIHtcbiAgICAgICAgZmlsZUtleToga2V5LFxuICAgICAgICB1cGxvYWRJZCxcbiAgICAgICAgZmlsZU5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgczNFcnJvcjogZXJyb3IudG9TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgICB0aHJvdyBcInVucmVhY2hhYmxlXCI7XG4gICAgfVxuICAgIGNvbnN0IHVwbG9hZE9rID0gYXdhaXQgcmVwb3J0RXZlbnRUb1VUKFwibXVsdGlwYXJ0LWNvbXBsZXRlXCIsIHtcbiAgICAgIHVwbG9hZElkLFxuICAgICAgZmlsZUtleToga2V5LFxuICAgICAgZXRhZ3NcbiAgICB9KTtcbiAgICBpZiAoIXVwbG9hZE9rKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkZhaWxlZCB0byBhbGVydCBVVCBvZiB1cGxvYWQgY29tcGxldGlvblwiKTtcbiAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBhbGVydCBVVCBvZiB1cGxvYWQgY29tcGxldGlvblwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHIpID0+IHNldFRpbWVvdXQociwgNzUwKSk7XG4gICAgY29uc3Qgc2VydmVyRGF0YSA9IGF3YWl0IHdpdGhFeHBvbmVudGlhbEJhY2tvZmYoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2gocG9sbGluZ1VybCwge1xuICAgICAgICBoZWFkZXJzOiB7IGF1dGhvcml6YXRpb246IHBvbGxpbmdKd3QgfVxuICAgICAgfSkudGhlbigocikgPT4gci5qc29uKCkpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMgPT09IFwiZG9uZVwiID8gcmVzLmNhbGxiYWNrRGF0YSA6IHZvaWQgMDtcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgc2l6ZTogZmlsZS5zaXplLFxuICAgICAga2V5OiBwcmVzaWduZWQua2V5LFxuICAgICAgc2VydmVyRGF0YSxcbiAgICAgIHVybDogXCJodHRwczovL3V0ZnMuaW8vZi9cIiArIGtleVxuICAgIH07XG4gIH0pO1xuICByZXR1cm4gUHJvbWlzZS5hbGwoZmlsZVVwbG9hZFByb21pc2VzKTtcbn07XG52YXIgZ2VuVXBsb2FkZXIgPSAoaW5pdE9wdHMpID0+IHtcbiAgY29uc3QgdXJsID0gKGluaXRPcHRzID09IG51bGwgPyB2b2lkIDAgOiBpbml0T3B0cy51cmwpIGluc3RhbmNlb2YgVVJMID8gaW5pdE9wdHMudXJsIDogZ2V0RnVsbEFwaVVybChpbml0T3B0cyA9PSBudWxsID8gdm9pZCAwIDogaW5pdE9wdHMudXJsKTtcbiAgcmV0dXJuIChlbmRwb2ludCwgb3B0cykgPT4gKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50XG4gICAgREFOR0VST1VTX191cGxvYWRGaWxlcyhlbmRwb2ludCwge1xuICAgICAgLi4ub3B0cyxcbiAgICAgIHVybFxuICAgIH0pXG4gICk7XG59O1xudmFyIGNsYXNzTmFtZXMgPSAoLi4uY2xhc3NlcykgPT4ge1xuICByZXR1cm4gY2xhc3Nlcy5maWx0ZXIoQm9vbGVhbikuam9pbihcIiBcIik7XG59O1xudmFyIGdlbmVyYXRlTWltZVR5cGVzID0gKGZpbGVUeXBlcykgPT4ge1xuICBjb25zdCBhY2NlcHRlZCA9IGZpbGVUeXBlcy5tYXAoKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZSA9PT0gXCJibG9iXCIpXG4gICAgICByZXR1cm4gXCJibG9iXCI7XG4gICAgaWYgKHR5cGUgPT09IFwicGRmXCIpXG4gICAgICByZXR1cm4gXCJhcHBsaWNhdGlvbi9wZGZcIjtcbiAgICBpZiAodHlwZS5pbmNsdWRlcyhcIi9cIikpXG4gICAgICByZXR1cm4gdHlwZTtcbiAgICBlbHNlXG4gICAgICByZXR1cm4gYCR7dHlwZX0vKmA7XG4gIH0pO1xuICBpZiAoYWNjZXB0ZWQuaW5jbHVkZXMoXCJibG9iXCIpKSB7XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxuICByZXR1cm4gYWNjZXB0ZWQ7XG59O1xudmFyIGdlbmVyYXRlQ2xpZW50RHJvcHpvbmVBY2NlcHQgPSAoZmlsZVR5cGVzKSA9PiB7XG4gIGNvbnN0IG1pbWVUeXBlcyA9IGdlbmVyYXRlTWltZVR5cGVzKGZpbGVUeXBlcyk7XG4gIGlmICghbWltZVR5cGVzKVxuICAgIHJldHVybiB2b2lkIDA7XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMobWltZVR5cGVzLm1hcCgodHlwZSkgPT4gW3R5cGUsIFtdXSkpO1xufTtcbmV4cG9ydCB7XG4gIERBTkdFUk9VU19fdXBsb2FkRmlsZXMsXG4gIElOVEVSTkFMX0RPX05PVF9VU0VfX2ZhdGFsQ2xpZW50RXJyb3IsXG4gIElOVEVSTkFMX2RvRm9ybWF0dGluZyxcbiAgYWxsb3dlZENvbnRlbnRUZXh0TGFiZWxHZW5lcmF0b3IsXG4gIGNhcGl0YWxpemVTdGFydCxcbiAgY2xhc3NOYW1lcyxcbiAgY29udGVudEZpZWxkVG9Db250ZW50LFxuICBnZW5VcGxvYWRlcixcbiAgZ2VuZXJhdGVDbGllbnREcm9wem9uZUFjY2VwdCxcbiAgZ2VuZXJhdGVNaW1lVHlwZXMsXG4gIGdlbmVyYXRlUGVybWl0dGVkRmlsZVR5cGVzLFxuICBnZXRGdWxsQXBpVXJsLFxuICBzdHlsZUZpZWxkVG9DbGFzc05hbWUsXG4gIHN0eWxlRmllbGRUb0Nzc09iamVjdFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsaWVudC5tanMubWFwIl0sIm5hbWVzIjpbIm1heWJlUGFyc2VSZXNwb25zZVhNTCIsInVwbG9hZFBhcnRXaXRoUHJvZ3Jlc3MiLCJnZXRGdWxsQXBpVXJsIiwic2FmZVBhcnNlSlNPTiIsIlVwbG9hZFRoaW5nRXJyb3IiLCJVcGxvYWRUaGluZ0Vycm9yMiIsIndpdGhFeHBvbmVudGlhbEJhY2tvZmYiLCJjcmVhdGVBUElSZXF1ZXN0VXJsIiwiY29uZmlnIiwidXJsIiwiVVJMIiwicXVlcnlQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJzZWFyY2giLCJzZXQiLCJhY3Rpb25UeXBlIiwic2x1ZyIsInRvU3RyaW5nIiwiY3JlYXRlVVRSZXBvcnRlciIsImNmZyIsInR5cGUiLCJwYXlsb2FkIiwiZW5kcG9pbnQiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJoZWFkZXJzIiwicCIsInBhcnNlZCIsInMzRXJyb3IiLCJtZXNzYWdlIiwiY29kZSIsImZpbGVOYW1lIiwiY2F1c2UiLCJvayIsIm9iamVjdEtleXMiLCJnZW5lcmF0ZVBlcm1pdHRlZEZpbGVUeXBlcyIsImZpbGVUeXBlcyIsIm1heEZpbGVDb3VudCIsIk9iamVjdCIsInZhbHVlcyIsIm1hcCIsInYiLCJtdWx0aXBsZSIsInNvbWUiLCJjYXBpdGFsaXplU3RhcnQiLCJzdHIiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiSU5URVJOQUxfZG9Gb3JtYXR0aW5nIiwiYWxsb3dlZFR5cGVzIiwiZm9ybWF0dGVkVHlwZXMiLCJmIiwibGVuZ3RoIiwibGFzdFR5cGUiLCJwb3AiLCJqb2luIiwia2V5IiwiZm9ybWF0dGVkS2V5IiwibWF4RmlsZVNpemUiLCJhbGxvd2VkQ29udGVudFRleHRMYWJlbEdlbmVyYXRvciIsInN0eWxlRmllbGRUb0NsYXNzTmFtZSIsInN0eWxlRmllbGQiLCJhcmdzIiwicmVzdWx0Iiwic3R5bGVGaWVsZFRvQ3NzT2JqZWN0IiwiY29udGVudEZpZWxkVG9Db250ZW50IiwiY29udGVudEZpZWxkIiwiYXJnIiwiSU5URVJOQUxfRE9fTk9UX1VTRV9fZmF0YWxDbGllbnRFcnJvciIsImUiLCJEQU5HRVJPVVNfX3VwbG9hZEZpbGVzIiwib3B0cyIsInJlcG9ydEV2ZW50VG9VVCIsIlN0cmluZyIsInMzQ29ubmVjdGlvblJlcyIsImlucHV0IiwiZmlsZXMiLCJuYW1lIiwic2l6ZSIsInRoZW4iLCJyZXMiLCJlcnJvciIsImZyb21SZXNwb25zZSIsImpzb25PckVycm9yIiwiRXJyb3IiLCJBcnJheSIsImlzQXJyYXkiLCJmaWxlVXBsb2FkUHJvbWlzZXMiLCJwcmVzaWduZWQiLCJfYSIsImZpbGUiLCJmaW5kIiwiY29uc29sZSIsInByZXNpZ25lZFVybHMiLCJ1cGxvYWRJZCIsImNodW5rU2l6ZSIsImNvbnRlbnREaXNwb3NpdGlvbiIsInBvbGxpbmdVcmwiLCJwb2xsaW5nSnd0IiwidXBsb2FkZWRCeXRlcyIsImV0YWdzIiwib25VcGxvYWRCZWdpbiIsImNhbGwiLCJQcm9taXNlIiwiYWxsIiwiaW5kZXgiLCJvZmZzZXQiLCJlbmQiLCJNYXRoIiwibWluIiwiY2h1bmsiLCJldGFnIiwiZmlsZVR5cGUiLCJtYXhSZXRyaWVzIiwib25Qcm9ncmVzcyIsImRlbHRhIiwiX2EyIiwicGVyY2VudCIsIm9uVXBsb2FkUHJvZ3Jlc3MiLCJwcm9ncmVzcyIsInRhZyIsInBhcnROdW1iZXIiLCJmaWxlS2V5IiwidXBsb2FkT2siLCJsb2ciLCJyIiwic2V0VGltZW91dCIsInNlcnZlckRhdGEiLCJhdXRob3JpemF0aW9uIiwianNvbiIsInN0YXR1cyIsImNhbGxiYWNrRGF0YSIsImdlblVwbG9hZGVyIiwiaW5pdE9wdHMiLCJjbGFzc05hbWVzIiwiY2xhc3NlcyIsImZpbHRlciIsIkJvb2xlYW4iLCJnZW5lcmF0ZU1pbWVUeXBlcyIsImFjY2VwdGVkIiwiaW5jbHVkZXMiLCJnZW5lcmF0ZUNsaWVudERyb3B6b25lQWNjZXB0IiwibWltZVR5cGVzIiwiZnJvbUVudHJpZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/dist/client.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/chunk-4PDGVH57.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-4PDGVH57.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getFullApiUrl: () => (/* binding */ getFullApiUrl)\n/* harmony export */ });\n// src/internal/get-full-api-url.ts\nfunction getFullApiUrl(maybeUrl) {\n    const base = (()=>{\n        var _a, _b;\n        if (false) {}\n        if (typeof process !== \"undefined\" && ((_a = process == null ? void 0 : process.env) == null ? void 0 : _a.VERCEL_URL)) {\n            return `https://${process.env.VERCEL_URL}`;\n        }\n        if ((_b = /* unsupported import.meta.env */ undefined) == null ? void 0 : _b.VERCEL_URL) {\n            return `https://${/* unsupported import.meta.env.VERCEL_URL */ undefined.VERCEL_URL}`;\n        }\n        return \"http://localhost:3000\";\n    })();\n    try {\n        const url = new URL(maybeUrl ?? \"/api/uploadthing\", base);\n        if (url.pathname === \"/\") {\n            url.pathname = \"/api/uploadthing\";\n        }\n        return url;\n    } catch (err) {\n        throw new Error(`Failed to parse '${maybeUrl}' as a URL. Make sure it's a valid URL or path`);\n    }\n}\n //# sourceMappingURL=chunk-4PDGVH57.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay00UERHVkg1Ny5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLG1DQUFtQztBQUNuQyxTQUFTQSxjQUFjQyxRQUFRO0lBQzdCLE1BQU1DLE9BQU8sQ0FBQztRQUNaLElBQUlDLElBQUlDO1FBQ1IsSUFBSSxLQUE2QixFQUFFLEVBRWxDO1FBQ0QsSUFBSSxPQUFPSSxZQUFZLGVBQWdCLEVBQUNMLEtBQUtLLFdBQVcsT0FBTyxLQUFLLElBQUlBLFFBQVFDLEdBQUcsS0FBSyxPQUFPLEtBQUssSUFBSU4sR0FBR08sVUFBVSxHQUFHO1lBQ3RILE9BQU8sQ0FBQyxRQUFRLEVBQUVGLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVSxDQUFDLENBQUM7UUFDNUM7UUFDQSxJQUFJLENBQUNOLEtBQUssMkNBQWUsS0FBSyxPQUFPLEtBQUssSUFBSUEsR0FBR00sVUFBVSxFQUFFO1lBQzNELE9BQU8sQ0FBQyxRQUFRLEVBQUUsaUVBQTBCLENBQUMsQ0FBQztRQUNoRDtRQUNBLE9BQU87SUFDVDtJQUNBLElBQUk7UUFDRixNQUFNQyxNQUFNLElBQUlDLElBQUlYLFlBQVksb0JBQW9CQztRQUNwRCxJQUFJUyxJQUFJRSxRQUFRLEtBQUssS0FBSztZQUN4QkYsSUFBSUUsUUFBUSxHQUFHO1FBQ2pCO1FBQ0EsT0FBT0Y7SUFDVCxFQUFFLE9BQU9HLEtBQUs7UUFDWixNQUFNLElBQUlDLE1BQ1IsQ0FBQyxpQkFBaUIsRUFBRWQsU0FBUyw4Q0FBOEMsQ0FBQztJQUVoRjtBQUNGO0FBSUUsQ0FDRiwyQ0FBMkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pc29tb3JwaGljLy4vbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvY2h1bmstNFBER1ZINTcubWpzPzI0ZGEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2ludGVybmFsL2dldC1mdWxsLWFwaS11cmwudHNcbmZ1bmN0aW9uIGdldEZ1bGxBcGlVcmwobWF5YmVVcmwpIHtcbiAgY29uc3QgYmFzZSA9ICgoKSA9PiB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiAoKF9hID0gcHJvY2VzcyA9PSBudWxsID8gdm9pZCAwIDogcHJvY2Vzcy5lbnYpID09IG51bGwgPyB2b2lkIDAgOiBfYS5WRVJDRUxfVVJMKSkge1xuICAgICAgcmV0dXJuIGBodHRwczovLyR7cHJvY2Vzcy5lbnYuVkVSQ0VMX1VSTH1gO1xuICAgIH1cbiAgICBpZiAoKF9iID0gaW1wb3J0Lm1ldGEuZW52KSA9PSBudWxsID8gdm9pZCAwIDogX2IuVkVSQ0VMX1VSTCkge1xuICAgICAgcmV0dXJuIGBodHRwczovLyR7aW1wb3J0Lm1ldGEuZW52LlZFUkNFTF9VUkx9YDtcbiAgICB9XG4gICAgcmV0dXJuIFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCI7XG4gIH0pKCk7XG4gIHRyeSB7XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChtYXliZVVybCA/PyBcIi9hcGkvdXBsb2FkdGhpbmdcIiwgYmFzZSk7XG4gICAgaWYgKHVybC5wYXRobmFtZSA9PT0gXCIvXCIpIHtcbiAgICAgIHVybC5wYXRobmFtZSA9IFwiL2FwaS91cGxvYWR0aGluZ1wiO1xuICAgIH1cbiAgICByZXR1cm4gdXJsO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgRmFpbGVkIHRvIHBhcnNlICcke21heWJlVXJsfScgYXMgYSBVUkwuIE1ha2Ugc3VyZSBpdCdzIGEgdmFsaWQgVVJMIG9yIHBhdGhgXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQge1xuICBnZXRGdWxsQXBpVXJsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2h1bmstNFBER1ZINTcubWpzLm1hcCJdLCJuYW1lcyI6WyJnZXRGdWxsQXBpVXJsIiwibWF5YmVVcmwiLCJiYXNlIiwiX2EiLCJfYiIsIndpbmRvdyIsImxvY2F0aW9uIiwib3JpZ2luIiwicHJvY2VzcyIsImVudiIsIlZFUkNFTF9VUkwiLCJ1cmwiLCJVUkwiLCJwYXRobmFtZSIsImVyciIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/chunk-4PDGVH57.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/chunk-K4BQP7SE.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-K4BQP7SE.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UPLOADTHING_VERSION: () => (/* binding */ UPLOADTHING_VERSION),\n/* harmony export */   VALID_ACTION_TYPES: () => (/* binding */ VALID_ACTION_TYPES),\n/* harmony export */   buildPermissionsInfoHandler: () => (/* binding */ buildPermissionsInfoHandler),\n/* harmony export */   buildRequestHandler: () => (/* binding */ buildRequestHandler),\n/* harmony export */   createBuilder: () => (/* binding */ createBuilder),\n/* harmony export */   defaultErrorFormatter: () => (/* binding */ defaultErrorFormatter),\n/* harmony export */   formatError: () => (/* binding */ formatError),\n/* harmony export */   incompatibleNodeGuard: () => (/* binding */ incompatibleNodeGuard),\n/* harmony export */   initLogger: () => (/* binding */ initLogger),\n/* harmony export */   logger: () => (/* binding */ logger),\n/* harmony export */   unsetMarker: () => (/* binding */ unsetMarker)\n/* harmony export */ });\n/* harmony import */ var _chunk_4PDGVH57_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-4PDGVH57.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-4PDGVH57.mjs\");\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! util */ \"util\");\n/* harmony import */ var consola_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! consola/core */ \"(rsc)/./node_modules/consola/dist/core.mjs\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.mjs\");\n\n// package.json\nvar package_default = {\n    name: \"uploadthing\",\n    version: \"6.2.0\",\n    engines: {\n        node: \">=18.13.0\"\n    },\n    license: \"MIT\",\n    exports: {\n        \"./package.json\": \"./package.json\",\n        \"./client\": {\n            types: \"./dist/client.d.ts\",\n            import: \"./dist/client.mjs\",\n            require: \"./dist/client.js\"\n        },\n        \"./server\": {\n            types: \"./dist/server.d.ts\",\n            import: \"./dist/server.mjs\",\n            require: \"./dist/server.js\"\n        },\n        \"./next\": {\n            types: \"./dist/next.d.ts\",\n            import: \"./dist/next.mjs\",\n            require: \"./dist/next.js\"\n        },\n        \"./next-legacy\": {\n            types: \"./dist/next-legacy.d.ts\",\n            import: \"./dist/next-legacy.mjs\",\n            require: \"./dist/next-legacy.js\"\n        },\n        \"./express\": {\n            import: \"./dist/express.mjs\",\n            types: \"./dist/express.d.ts\",\n            require: \"./dist/express.js\"\n        },\n        \"./tw\": {\n            types: \"./dist/tw.d.ts\",\n            import: \"./dist/tw.mjs\",\n            require: \"./dist/tw.js\"\n        },\n        \"./fastify\": {\n            types: \"./dist/fastify.d.ts\",\n            import: \"./dist/fastify.mjs\",\n            require: \"./dist/fastify.js\"\n        },\n        \"./h3\": {\n            types: \"./dist/h3.d.ts\",\n            import: \"./dist/h3.mjs\",\n            require: \"./dist/h3.js\"\n        }\n    },\n    files: [\n        \"dist\"\n    ],\n    publishConfig: {\n        access: \"public\"\n    },\n    typesVersions: {\n        \"*\": {\n            client: [\n                \"dist/client.d.ts\"\n            ],\n            server: [\n                \"dist/server.d.ts\"\n            ],\n            next: [\n                \"dist/next.d.ts\"\n            ],\n            \"next-legacy\": [\n                \"dist/next-legacy.d.ts\"\n            ],\n            tw: [\n                \"dist/tw.d.ts\"\n            ],\n            express: [\n                \"dist/express.d.ts\"\n            ],\n            fastify: [\n                \"dist/fastify.d.ts\"\n            ],\n            h3: [\n                \"dist/h3.d.ts\"\n            ]\n        }\n    },\n    scripts: {\n        lint: 'eslint \"**/*.{ts,tsx}\" --max-warnings 0',\n        build: \"tsup\",\n        clean: \"git clean -xdf dist node_modules\",\n        dev: \"tsup --watch\",\n        test: \"vitest run\",\n        \"test:watch\": \"vitest\",\n        typecheck: \"tsc --noEmit\"\n    },\n    dependencies: {\n        \"@uploadthing/mime-types\": \"^0.2.2\",\n        \"@uploadthing/shared\": \"^6.1.0\",\n        consola: \"^3.2.3\"\n    },\n    devDependencies: {\n        \"@types/express\": \"^4.17.17\",\n        \"@types/react\": \"18.2.33\",\n        \"@uploadthing/eslint-config\": \"0.2.0\",\n        \"@uploadthing/tsconfig\": \"0.1.0\",\n        \"@uploadthing/tsup-config\": \"0.1.0\",\n        eslint: \"^8.47.0\",\n        express: \"^4.18.2\",\n        fastify: \"^4.23.2\",\n        h3: \"^1.8.1\",\n        next: \"14.0.1\",\n        \"solid-js\": \"^1.7.11\",\n        tailwindcss: \"^3.3.2\",\n        tsup: \"6.7.0\",\n        \"type-fest\": \"^3.11.1\",\n        typescript: \"^5.1.6\",\n        undici: \"^5.20.0\",\n        vitest: \"^0.30.1\",\n        zod: \"^3.22.3\"\n    },\n    eslintConfig: {\n        root: true,\n        extends: [\n            \"@uploadthing/eslint-config/base\"\n        ],\n        rules: {\n            \"no-console\": \"error\"\n        }\n    }\n};\n// src/constants.ts\nif (!package_default.version) throw new Error(\"no version found in package.json\");\nvar UPLOADTHING_VERSION = package_default.version;\n// src/internal/error-formatter.ts\nfunction defaultErrorFormatter(error) {\n    return {\n        message: error.message\n    };\n}\nfunction formatError(error, router) {\n    var _a;\n    const errorFormatter = ((_a = router[Object.keys(router)[0]]) == null ? void 0 : _a._def.errorFormatter) ?? defaultErrorFormatter;\n    return errorFormatter(error);\n}\n// src/internal/logger.ts\n\n\n\nvar colorize = (str, level)=>{\n    switch(level){\n        case \"error\":\n        case \"fatal\":\n            return `\\x1B[41m\\x1B[30m${str}\\x1B[0m`;\n        case \"warn\":\n            return `\\x1B[43m\\x1B[30m${str}\\x1B[0m`;\n        case \"info\":\n        case \"log\":\n            return `\\x1B[44m\\x1B[30m${str}\\x1B[0m`;\n        case \"debug\":\n            return `\\x1B[47m\\x1B[30m${str}\\x1B[0m`;\n        case \"trace\":\n            return `\\x1B[47m\\x1B[30m${str}\\x1B[0m`;\n        case \"success\":\n            return `\\x1B[42m\\x1B[30m${str}\\x1B[0m`;\n        default:\n            return str;\n    }\n};\nvar icons = {\n    fatal: \"\",\n    error: \"\",\n    warn: \"\",\n    info: \"\",\n    log: \"\",\n    debug: \"\",\n    trace: \"\",\n    success: \"\"\n};\nfunction formatStack(stack) {\n    return \"  \" + stack.split(\"\\n\").splice(1).map((l)=>l.trim().replace(\"file://\", \"\").replace(process.cwd() + \"/\", \"\")).join(\"\\n  \");\n}\nfunction formatArgs(args) {\n    const fmtArgs = args.map((arg)=>{\n        if ((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.isObject)(arg) && typeof arg.stack === \"string\") {\n            return arg.message + \"\\n\" + formatStack(arg.stack);\n        }\n        return arg;\n    });\n    return fmtArgs.map((arg)=>{\n        if (typeof arg === \"string\") {\n            return arg;\n        }\n        try {\n            return (0,util__WEBPACK_IMPORTED_MODULE_1__.inspect)(arg, {\n                depth: 4\n            });\n        } catch  {\n            return JSON.stringify(arg, null, 4);\n        }\n    });\n}\nvar logger = (0,consola_core__WEBPACK_IMPORTED_MODULE_2__.createConsola)({\n    reporters: [\n        {\n            log: (logObj)=>{\n                const { type, tag, date, args } = logObj;\n                const icon = icons[type];\n                const logPrefix = colorize(` ${icon} ${tag} ${date.toLocaleTimeString()} `, type);\n                const lines = formatArgs(args).join(\" \").split(\"\\n\").map((l)=>logPrefix + \" \" + l).join(\"\\n\");\n                console.log(lines);\n            }\n        }\n    ],\n    defaults: {\n        tag: \"UPLOADTHING\"\n    }\n});\nvar initLogger = (level)=>{\n    logger.level = consola_core__WEBPACK_IMPORTED_MODULE_2__.LogLevels[level ?? \"info\"];\n};\n// src/internal/types.ts\nvar unsetMarker = \"unsetMarker\";\nvar VALID_ACTION_TYPES = [\n    \"upload\",\n    \"failure\",\n    \"multipart-complete\"\n];\n// src/internal/handler.ts\n\n// src/internal/dev-hook.ts\n\nvar isValidResponse = (response)=>{\n    if (!response.ok) return false;\n    if (response.status >= 400) return false;\n    if (!response.headers.has(\"x-uploadthing-version\")) return false;\n    return true;\n};\nvar conditionalDevServer = async (opts)=>{\n    if (false) {}\n    const fileData = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.pollForFileData)({\n        url: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.generateUploadThingURL)(`/api/pollUpload/${opts.fileKey}`),\n        apiKey: opts.apiKey,\n        sdkVersion: UPLOADTHING_VERSION\n    }, async (json)=>{\n        const file = json.fileData;\n        let callbackUrl = file.callbackUrl + `?slug=${file.callbackSlug}`;\n        if (!callbackUrl.startsWith(\"http\")) callbackUrl = \"http://\" + callbackUrl;\n        logger.info(\"SIMULATING FILE UPLOAD WEBHOOK CALLBACK\", callbackUrl);\n        const response = await fetch(callbackUrl, {\n            method: \"POST\",\n            body: JSON.stringify({\n                status: \"uploaded\",\n                metadata: JSON.parse(file.metadata ?? \"{}\"),\n                file: {\n                    url: `https://utfs.io/f/${encodeURIComponent(opts.fileKey)}`,\n                    key: opts.fileKey,\n                    name: file.fileName,\n                    size: file.fileSize\n                }\n            }),\n            headers: {\n                \"uploadthing-hook\": \"callback\"\n            }\n        });\n        if (isValidResponse(response)) {\n            logger.success(\"Successfully simulated callback for file\", opts.fileKey);\n        } else {\n            logger.error(\"Failed to simulate callback for file. Is your webhook configured correctly?\", opts.fileKey);\n        }\n        return file;\n    });\n    if (fileData !== void 0) return fileData;\n    logger.error(`Failed to simulate callback for file ${opts.fileKey}`);\n    throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n        code: \"UPLOAD_FAILED\",\n        message: \"File took too long to upload\"\n    });\n};\n// src/internal/parser.ts\nfunction getParseFn(parser) {\n    if (typeof parser.parse === \"function\") {\n        return parser.parse;\n    }\n    throw new Error(\"Invalid parser\");\n}\n// src/internal/handler.ts\nvar createUTFetch = (apiKey)=>{\n    return async (endpoint, payload)=>{\n        const response = await fetch((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.generateUploadThingURL)(endpoint), {\n            method: \"POST\",\n            body: JSON.stringify(payload),\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"x-uploadthing-api-key\": apiKey,\n                \"x-uploadthing-version\": UPLOADTHING_VERSION\n            }\n        });\n        return response;\n    };\n};\nvar fileCountLimitHit = (files, routeConfig)=>{\n    var _a;\n    const counts = {};\n    files.forEach((file)=>{\n        const type = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.getTypeFromFileName)(file.name, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.objectKeys)(routeConfig));\n        if (!counts[type]) {\n            counts[type] = 1;\n        } else {\n            counts[type] += 1;\n        }\n    });\n    for(const _key in counts){\n        const key = _key;\n        const count = counts[key];\n        const limit = (_a = routeConfig[key]) == null ? void 0 : _a.maxFileCount;\n        if (!limit) {\n            logger.error(routeConfig, key);\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Invalid config during file count\",\n                cause: `Expected route config to have a maxFileCount for key ${key} but none was found.`\n            });\n        }\n        if (count > limit) {\n            return {\n                limitHit: true,\n                type: key,\n                limit,\n                count\n            };\n        }\n    }\n    return {\n        limitHit: false\n    };\n};\nvar getHeader = (req, key)=>{\n    if (req.headers instanceof Headers) {\n        return req.headers.get(key);\n    }\n    return req.headers[key];\n};\nvar buildRequestHandler = (opts)=>{\n    return async (input)=>{\n        var _a;\n        if (true) {\n            logger.info(\"UploadThing dev server is now running!\");\n        }\n        const { req, res, event } = input;\n        const { router, config } = opts;\n        const preferredOrEnvSecret = (config == null ? void 0 : config.uploadthingSecret) ?? process.env.UPLOADTHING_SECRET;\n        let url;\n        try {\n            url = new URL(input.url ?? req.url ?? \"\");\n        } catch (error) {\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: `Invalid url '${((_a = input.url) == null ? void 0 : _a.href) ?? req.url}'`,\n                cause: error\n            });\n        }\n        const params = url.searchParams;\n        const uploadthingHook = getHeader(req, \"uploadthing-hook\") ?? void 0;\n        const slug = params.get(\"slug\") ?? void 0;\n        const actionType = params.get(\"actionType\") ?? void 0;\n        if (!slug) {\n            logger.error(\"No slug provided in params:\", params);\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"No slug provided in params\"\n            });\n        }\n        if (slug && typeof slug !== \"string\") {\n            const msg = `Expected slug to be of type 'string', got '${typeof slug}'`;\n            logger.error(msg);\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"`slug` must be a string\",\n                cause: msg\n            });\n        }\n        if (actionType && typeof actionType !== \"string\") {\n            const msg = `Expected actionType to be of type 'string', got '${typeof actionType}'`;\n            logger.error(msg);\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"`actionType` must be a string\",\n                cause: msg\n            });\n        }\n        if (uploadthingHook && typeof uploadthingHook !== \"string\") {\n            const msg = `Expected uploadthingHook to be of type 'string', got '${typeof uploadthingHook}'`;\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"`uploadthingHook` must be a string\",\n                cause: msg\n            });\n        }\n        if (!preferredOrEnvSecret) {\n            const msg = `No secret provided, please set UPLOADTHING_SECRET in your env file or in the config`;\n            logger.error(msg);\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"MISSING_ENV\",\n                message: `No secret provided`,\n                cause: msg\n            });\n        }\n        if (!preferredOrEnvSecret.startsWith(\"sk_\")) {\n            const msg = `Invalid secret provided, UPLOADTHING_SECRET must start with 'sk_'`;\n            logger.error(msg);\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"MISSING_ENV\",\n                message: \"Invalid API key. API keys must start with 'sk_'.\",\n                cause: msg\n            });\n        }\n        const uploadable = router[slug];\n        if (!uploadable) {\n            const msg = `No file route found for slug ${slug}`;\n            logger.error(msg);\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"NOT_FOUND\",\n                message: msg\n            });\n        }\n        logger.debug(\"All request input is valid\", {\n            slug,\n            actionType\n        });\n        const utFetch = createUTFetch(preferredOrEnvSecret);\n        if (uploadthingHook === \"callback\") {\n            const maybeReqBody = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.safeParseJSON)(req);\n            logger.debug(\"Handling callback request with input:\", maybeReqBody);\n            if (maybeReqBody instanceof Error) {\n                logger.error(\"Invalid request body\", maybeReqBody);\n                return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Invalid request body\",\n                    cause: maybeReqBody\n                });\n            }\n            const resolverArgs = {\n                file: maybeReqBody.file,\n                metadata: maybeReqBody.metadata\n            };\n            logger.debug(\"Running 'onUploadComplete' callback with input:\", resolverArgs);\n            const res2 = await uploadable.resolver(resolverArgs);\n            const payload = {\n                fileKey: maybeReqBody.file.key,\n                callbackData: res2 ?? null\n            };\n            logger.debug(\"'onUploadComplete' callback finished. Sending response to UploadThing:\", payload);\n            const callbackResponse = await utFetch(\"/api/serverCallback\", payload);\n            logger.debug(\"UploadThing responded with status:\", callbackResponse.status);\n            return {\n                status: 200\n            };\n        }\n        if (!actionType || !VALID_ACTION_TYPES.includes(actionType)) {\n            const msg = `Expected ${VALID_ACTION_TYPES.map((x)=>`\"${x}\"`).join(\", \").replace(/,(?!.*,)/, \" or\")} but got \"${actionType}\"`;\n            logger.error(\"Invalid action type.\", msg);\n            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                cause: `Invalid action type ${actionType}`,\n                message: msg\n            });\n        }\n        switch(actionType){\n            case \"upload\":\n                {\n                    const maybeInput = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.safeParseJSON)(req);\n                    if (maybeInput instanceof Error) {\n                        logger.error(\"Invalid request body\", maybeInput);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Invalid request body\",\n                            cause: maybeInput\n                        });\n                    }\n                    logger.debug(\"Handling upload request with input:\", maybeInput);\n                    const { files, input: userInput } = maybeInput;\n                    let parsedInput = {};\n                    try {\n                        logger.debug(\"Parsing input\");\n                        const inputParser = uploadable._def.inputParser;\n                        parsedInput = await getParseFn(inputParser)(userInput);\n                        logger.debug(\"Input parsed successfully\", parsedInput);\n                    } catch (error) {\n                        logger.error(\"An error occured trying to parse input\", error);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Invalid input.\",\n                            cause: error\n                        });\n                    }\n                    let metadata = {};\n                    try {\n                        logger.debug(\"Running middleware\");\n                        metadata = await uploadable._def.middleware({\n                            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                            req,\n                            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                            res,\n                            event,\n                            input: parsedInput\n                        });\n                        logger.debug(\"Middleware finished successfully with:\", metadata);\n                    } catch (error) {\n                        logger.error(\"An error occured in your middleware function\", error);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"INTERNAL_SERVER_ERROR\",\n                            message: \"Failed to run middleware.\",\n                            cause: error\n                        });\n                    }\n                    if (!Array.isArray(files) || !files.every((f)=>(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.isObject)(f) && typeof f.name === \"string\" && typeof f.size === \"number\")) {\n                        const msg = `Expected files to be of type '{name:string, size:number}[]', got '${JSON.stringify(files)}'`;\n                        logger.error(msg);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Files must be an array of objects with name and size\",\n                            cause: msg\n                        });\n                    }\n                    let parsedConfig;\n                    try {\n                        logger.debug(\"Parsing route config\", uploadable._def.routerConfig);\n                        parsedConfig = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.fillInputRouteConfig)(uploadable._def.routerConfig);\n                        logger.debug(\"Route config parsed successfully\", parsedConfig);\n                    } catch (error) {\n                        logger.error(\"Invalid route config\", error);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Invalid config.\",\n                            cause: error\n                        });\n                    }\n                    try {\n                        logger.debug(\"Checking file count limit\", files);\n                        const { limitHit, count, limit, type } = fileCountLimitHit(files, parsedConfig);\n                        if (limitHit) {\n                            const msg = `You uploaded ${count} files of type '${type}', but the limit for that type is ${limit}`;\n                            logger.error(msg);\n                            return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                                code: \"BAD_REQUEST\",\n                                message: \"File limit exceeded\",\n                                cause: msg\n                            });\n                        }\n                        logger.debug(\"File count limit check passed\");\n                    } catch (error) {\n                        logger.error(\"Invalid route config\", error);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Invalid config.\",\n                            cause: error\n                        });\n                    }\n                    const callbackUrl = resolveCallbackUrl({\n                        config,\n                        req,\n                        url\n                    });\n                    logger.debug(\"Retrieving presigned URLs from UploadThing. Callback URL is:\", callbackUrl.href);\n                    const uploadthingApiResponse = await utFetch(\"/api/prepareUpload\", {\n                        files,\n                        routeConfig: parsedConfig,\n                        metadata,\n                        callbackUrl: callbackUrl.origin + callbackUrl.pathname,\n                        callbackSlug: slug\n                    });\n                    const parsedResponse = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.safeParseJSON)(uploadthingApiResponse);\n                    if (!uploadthingApiResponse.ok || parsedResponse instanceof Error) {\n                        logger.error(\"Unable to get presigned URLs\", parsedResponse);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"URL_GENERATION_FAILED\",\n                            message: \"Unable to get presigned urls\",\n                            cause: parsedResponse\n                        });\n                    }\n                    logger.debug(\"UploadThing responded with:\", parsedResponse);\n                    logger.debug(\"Sending presigned URLs to client\");\n                    if (true) {\n                        for (const file of parsedResponse){\n                            void conditionalDevServer({\n                                fileKey: file.key,\n                                apiKey: preferredOrEnvSecret\n                            });\n                        }\n                    }\n                    return {\n                        body: parsedResponse.map((x)=>({\n                                ...x,\n                                pollingUrl: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.generateUploadThingURL)(`/api/serverCallback`)\n                            })),\n                        status: 200\n                    };\n                }\n            case \"multipart-complete\":\n                {\n                    const maybeReqBody = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.safeParseJSON)(req);\n                    if (maybeReqBody instanceof Error) {\n                        logger.error(\"Invalid request body\", maybeReqBody);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Invalid request body\",\n                            cause: maybeReqBody\n                        });\n                    }\n                    logger.debug(\"Handling multipart-complete request with input:\", maybeReqBody);\n                    logger.debug(\"Notifying UploadThing that multipart upload is complete\");\n                    const completeRes = await utFetch(\"/api/completeMultipart\", {\n                        fileKey: maybeReqBody.fileKey,\n                        uploadId: maybeReqBody.uploadId,\n                        etags: maybeReqBody.etags\n                    });\n                    if (!completeRes.ok) {\n                        logger.error(\"Failed to notify UploadThing that multipart upload is complete\");\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"UPLOAD_FAILED\",\n                            message: \"Failed to complete multipart upload\",\n                            cause: completeRes\n                        });\n                    }\n                    logger.debug(\"UploadThing responded with:\", completeRes.status);\n                    return {\n                        status: 200\n                    };\n                }\n            case \"failure\":\n                {\n                    const maybeReqBody = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.safeParseJSON)(req);\n                    if (maybeReqBody instanceof Error) {\n                        logger.error(\"Invalid request body\", maybeReqBody);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"BAD_REQUEST\",\n                            message: \"Invalid request body\",\n                            cause: maybeReqBody\n                        });\n                    }\n                    const { fileKey, uploadId } = maybeReqBody;\n                    logger.debug(\"Handling failure request with input:\", maybeReqBody);\n                    logger.debug(\"Notifying UploadThing that upload failed\");\n                    const uploadthingApiResponse = await utFetch(\"/api/failureCallback\", {\n                        fileKey,\n                        uploadId\n                    });\n                    if (!uploadthingApiResponse.ok) {\n                        const parsedResponse = await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.safeParseJSON)(uploadthingApiResponse);\n                        logger.error(\"Failed to mark upload as failed\", parsedResponse);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"INTERNAL_SERVER_ERROR\",\n                            message: \"Unable to mark upload as failed\",\n                            cause: parsedResponse\n                        });\n                    }\n                    logger.debug(\"UploadThing responded with:\", uploadthingApiResponse);\n                    logger.debug(\"Running 'onUploadError' callback\");\n                    try {\n                        uploadable._def.onUploadError({\n                            error: new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                                code: \"UPLOAD_FAILED\",\n                                message: `Upload failed for ${fileKey}`\n                            }),\n                            fileKey\n                        });\n                    } catch (error) {\n                        logger.error(\"Failed to run onUploadError callback. You probably shouldn't be throwing errors in your callback.\", error);\n                        return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                            code: \"INTERNAL_SERVER_ERROR\",\n                            message: \"Failed to run onUploadError callback\",\n                            cause: error\n                        });\n                    }\n                    return {\n                        status: 200\n                    };\n                }\n            default:\n                {\n                    return new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n                        code: \"BAD_REQUEST\",\n                        message: `Invalid action type`\n                    });\n                }\n        }\n    };\n};\nfunction resolveCallbackUrl(opts) {\n    var _a, _b;\n    let callbackUrl = opts.url;\n    if ((_a = opts.config) == null ? void 0 : _a.callbackUrl) {\n        callbackUrl = (0,_chunk_4PDGVH57_mjs__WEBPACK_IMPORTED_MODULE_0__.getFullApiUrl)(opts.config.callbackUrl);\n    } else if (process.env.UPLOADTHING_URL) {\n        callbackUrl = (0,_chunk_4PDGVH57_mjs__WEBPACK_IMPORTED_MODULE_0__.getFullApiUrl)(process.env.UPLOADTHING_URL);\n    }\n    if (true) {\n        return callbackUrl;\n    }\n    let parsedFromHeaders = (_b = getHeader(opts.req, \"origin\") ?? getHeader(opts.req, \"referer\") ?? getHeader(opts.req, \"host\") ?? getHeader(opts.req, \"x-forwarded-host\")) == null ? void 0 : _b.toString();\n    if (parsedFromHeaders && !parsedFromHeaders.includes(\"http\")) {\n        parsedFromHeaders = (getHeader(opts.req, \"x-forwarded-proto\") ?? \"https\").toString() + \"://\" + parsedFromHeaders;\n    }\n    if (!parsedFromHeaders || parsedFromHeaders.includes(\"localhost\")) {\n        logger.warn(\"You are using a localhost callback url in production which is not supported.\", \"Read more and learn how to fix it here: https://docs.uploadthing.com/faq#my-callback-runs-in-development-but-not-in-production\");\n        return callbackUrl;\n    }\n    return (0,_chunk_4PDGVH57_mjs__WEBPACK_IMPORTED_MODULE_0__.getFullApiUrl)(parsedFromHeaders);\n}\nvar buildPermissionsInfoHandler = (opts)=>{\n    return ()=>{\n        const r = opts.router;\n        const permissions = Object.keys(r).map((k)=>{\n            const route = r[k];\n            const config = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.fillInputRouteConfig)(route._def.routerConfig);\n            return {\n                slug: k,\n                config\n            };\n        });\n        return permissions;\n    };\n};\n// src/internal/incompat-node-guard.ts\nfunction incompatibleNodeGuard() {\n    var _a, _b, _c, _d;\n    if (typeof process === \"undefined\") return;\n    let major;\n    let minor;\n    const maybeNodeVersion = (_b = (_a = process.versions) == null ? void 0 : _a.node) == null ? void 0 : _b.split(\".\");\n    if (maybeNodeVersion) {\n        [major, minor] = maybeNodeVersion.map((v)=>parseInt(v, 10));\n    }\n    const maybeNodePath = (_c = process.env) == null ? void 0 : _c.NODE;\n    if (!major && maybeNodePath) {\n        const nodeVersion = (_d = /v(\\d+)\\.(\\d+)\\.(\\d+)/.exec(maybeNodePath)) == null ? void 0 : _d[0];\n        if (nodeVersion) {\n            [major, minor] = nodeVersion.substring(1).split(\".\").map((v)=>parseInt(v, 10));\n        }\n    }\n    if (!major || !minor) return;\n    if (major > 18) return;\n    if (major === 18 && minor >= 13) return;\n    logger.fatal(`YOU ARE USING A LEGACY (${major}.${minor}) NODE VERSION WHICH ISN'T OFFICIALLY SUPPORTED. PLEASE UPGRADE TO NODE ^18.13.`);\n    process.exit(1);\n}\n// src/internal/upload-builder.ts\nfunction internalCreateBuilder(initDef = {}) {\n    const _def = {\n        // Default router config\n        routerConfig: {\n            image: {\n                maxFileSize: \"4MB\"\n            }\n        },\n        inputParser: {\n            parse: ()=>({}),\n            _input: {},\n            _output: {}\n        },\n        middleware: ()=>({}),\n        onUploadError: ()=>({}),\n        errorFormatter: initDef.errorFormatter ?? defaultErrorFormatter,\n        // Overload with properties passed in\n        ...initDef\n    };\n    return {\n        input (userParser) {\n            return internalCreateBuilder({\n                ..._def,\n                inputParser: userParser\n            });\n        },\n        middleware (userMiddleware) {\n            return internalCreateBuilder({\n                ..._def,\n                middleware: userMiddleware\n            });\n        },\n        onUploadComplete (userUploadComplete) {\n            return {\n                _def,\n                resolver: userUploadComplete\n            };\n        },\n        onUploadError (userOnUploadError) {\n            return internalCreateBuilder({\n                ..._def,\n                onUploadError: userOnUploadError\n            });\n        }\n    };\n}\nfunction createBuilder(opts) {\n    return (input)=>{\n        return internalCreateBuilder({\n            routerConfig: input,\n            ...opts\n        });\n    };\n}\n //# sourceMappingURL=chunk-K4BQP7SE.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1LNEJRUDdTRS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRThCO0FBRTlCLGVBQWU7QUFDZixJQUFJQyxrQkFBa0I7SUFDcEJDLE1BQU07SUFDTkMsU0FBUztJQUNUQyxTQUFTO1FBQ1BDLE1BQU07SUFDUjtJQUNBQyxTQUFTO0lBQ1RDLFNBQVM7UUFDUCxrQkFBa0I7UUFDbEIsWUFBWTtZQUNWQyxPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsU0FBUztRQUNYO1FBQ0EsWUFBWTtZQUNWRixPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsU0FBUztRQUNYO1FBQ0EsVUFBVTtZQUNSRixPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsU0FBUztRQUNYO1FBQ0EsaUJBQWlCO1lBQ2ZGLE9BQU87WUFDUEMsUUFBUTtZQUNSQyxTQUFTO1FBQ1g7UUFDQSxhQUFhO1lBQ1hELFFBQVE7WUFDUkQsT0FBTztZQUNQRSxTQUFTO1FBQ1g7UUFDQSxRQUFRO1lBQ05GLE9BQU87WUFDUEMsUUFBUTtZQUNSQyxTQUFTO1FBQ1g7UUFDQSxhQUFhO1lBQ1hGLE9BQU87WUFDUEMsUUFBUTtZQUNSQyxTQUFTO1FBQ1g7UUFDQSxRQUFRO1lBQ05GLE9BQU87WUFDUEMsUUFBUTtZQUNSQyxTQUFTO1FBQ1g7SUFDRjtJQUNBQyxPQUFPO1FBQ0w7S0FDRDtJQUNEQyxlQUFlO1FBQ2JDLFFBQVE7SUFDVjtJQUNBQyxlQUFlO1FBQ2IsS0FBSztZQUNIQyxRQUFRO2dCQUNOO2FBQ0Q7WUFDREMsUUFBUTtnQkFDTjthQUNEO1lBQ0RDLE1BQU07Z0JBQ0o7YUFDRDtZQUNELGVBQWU7Z0JBQ2I7YUFDRDtZQUNEQyxJQUFJO2dCQUNGO2FBQ0Q7WUFDREMsU0FBUztnQkFDUDthQUNEO1lBQ0RDLFNBQVM7Z0JBQ1A7YUFDRDtZQUNEQyxJQUFJO2dCQUNGO2FBQ0Q7UUFDSDtJQUNGO0lBQ0FDLFNBQVM7UUFDUEMsTUFBTTtRQUNO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UUFDRjtRQUNBbkMsZUFBY29DLGlCQUFpQjtZQUM3QixPQUFPVixzQkFBc0I7Z0JBQzNCLEdBQUdyTCxJQUFJO2dCQUNQMkosZUFBZW9DO1lBQ2pCO1FBQ0Y7SUFDRjtBQUNGO0FBQ0EsU0FBU0MsY0FBYzdILElBQUk7SUFDekIsT0FBTyxDQUFDMEM7UUFDTixPQUFPd0Usc0JBQXNCO1lBQzNCcEMsY0FBY3BDO1lBQ2QsR0FBRzFDLElBQUk7UUFDVDtJQUNGO0FBQ0Y7QUFjRSxDQUNGLDJDQUEyQyIsInNvdXJjZXMiOlsid2VicGFjazovL2lzb21vcnBoaWMvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1LNEJRUDdTRS5tanM/MTA2ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBnZXRGdWxsQXBpVXJsXG59IGZyb20gXCIuL2NodW5rLTRQREdWSDU3Lm1qc1wiO1xuXG4vLyBwYWNrYWdlLmpzb25cbnZhciBwYWNrYWdlX2RlZmF1bHQgPSB7XG4gIG5hbWU6IFwidXBsb2FkdGhpbmdcIixcbiAgdmVyc2lvbjogXCI2LjIuMFwiLFxuICBlbmdpbmVzOiB7XG4gICAgbm9kZTogXCI+PTE4LjEzLjBcIlxuICB9LFxuICBsaWNlbnNlOiBcIk1JVFwiLFxuICBleHBvcnRzOiB7XG4gICAgXCIuL3BhY2thZ2UuanNvblwiOiBcIi4vcGFja2FnZS5qc29uXCIsXG4gICAgXCIuL2NsaWVudFwiOiB7XG4gICAgICB0eXBlczogXCIuL2Rpc3QvY2xpZW50LmQudHNcIixcbiAgICAgIGltcG9ydDogXCIuL2Rpc3QvY2xpZW50Lm1qc1wiLFxuICAgICAgcmVxdWlyZTogXCIuL2Rpc3QvY2xpZW50LmpzXCJcbiAgICB9LFxuICAgIFwiLi9zZXJ2ZXJcIjoge1xuICAgICAgdHlwZXM6IFwiLi9kaXN0L3NlcnZlci5kLnRzXCIsXG4gICAgICBpbXBvcnQ6IFwiLi9kaXN0L3NlcnZlci5tanNcIixcbiAgICAgIHJlcXVpcmU6IFwiLi9kaXN0L3NlcnZlci5qc1wiXG4gICAgfSxcbiAgICBcIi4vbmV4dFwiOiB7XG4gICAgICB0eXBlczogXCIuL2Rpc3QvbmV4dC5kLnRzXCIsXG4gICAgICBpbXBvcnQ6IFwiLi9kaXN0L25leHQubWpzXCIsXG4gICAgICByZXF1aXJlOiBcIi4vZGlzdC9uZXh0LmpzXCJcbiAgICB9LFxuICAgIFwiLi9uZXh0LWxlZ2FjeVwiOiB7XG4gICAgICB0eXBlczogXCIuL2Rpc3QvbmV4dC1sZWdhY3kuZC50c1wiLFxuICAgICAgaW1wb3J0OiBcIi4vZGlzdC9uZXh0LWxlZ2FjeS5tanNcIixcbiAgICAgIHJlcXVpcmU6IFwiLi9kaXN0L25leHQtbGVnYWN5LmpzXCJcbiAgICB9LFxuICAgIFwiLi9leHByZXNzXCI6IHtcbiAgICAgIGltcG9ydDogXCIuL2Rpc3QvZXhwcmVzcy5tanNcIixcbiAgICAgIHR5cGVzOiBcIi4vZGlzdC9leHByZXNzLmQudHNcIixcbiAgICAgIHJlcXVpcmU6IFwiLi9kaXN0L2V4cHJlc3MuanNcIlxuICAgIH0sXG4gICAgXCIuL3R3XCI6IHtcbiAgICAgIHR5cGVzOiBcIi4vZGlzdC90dy5kLnRzXCIsXG4gICAgICBpbXBvcnQ6IFwiLi9kaXN0L3R3Lm1qc1wiLFxuICAgICAgcmVxdWlyZTogXCIuL2Rpc3QvdHcuanNcIlxuICAgIH0sXG4gICAgXCIuL2Zhc3RpZnlcIjoge1xuICAgICAgdHlwZXM6IFwiLi9kaXN0L2Zhc3RpZnkuZC50c1wiLFxuICAgICAgaW1wb3J0OiBcIi4vZGlzdC9mYXN0aWZ5Lm1qc1wiLFxuICAgICAgcmVxdWlyZTogXCIuL2Rpc3QvZmFzdGlmeS5qc1wiXG4gICAgfSxcbiAgICBcIi4vaDNcIjoge1xuICAgICAgdHlwZXM6IFwiLi9kaXN0L2gzLmQudHNcIixcbiAgICAgIGltcG9ydDogXCIuL2Rpc3QvaDMubWpzXCIsXG4gICAgICByZXF1aXJlOiBcIi4vZGlzdC9oMy5qc1wiXG4gICAgfVxuICB9LFxuICBmaWxlczogW1xuICAgIFwiZGlzdFwiXG4gIF0sXG4gIHB1Ymxpc2hDb25maWc6IHtcbiAgICBhY2Nlc3M6IFwicHVibGljXCJcbiAgfSxcbiAgdHlwZXNWZXJzaW9uczoge1xuICAgIFwiKlwiOiB7XG4gICAgICBjbGllbnQ6IFtcbiAgICAgICAgXCJkaXN0L2NsaWVudC5kLnRzXCJcbiAgICAgIF0sXG4gICAgICBzZXJ2ZXI6IFtcbiAgICAgICAgXCJkaXN0L3NlcnZlci5kLnRzXCJcbiAgICAgIF0sXG4gICAgICBuZXh0OiBbXG4gICAgICAgIFwiZGlzdC9uZXh0LmQudHNcIlxuICAgICAgXSxcbiAgICAgIFwibmV4dC1sZWdhY3lcIjogW1xuICAgICAgICBcImRpc3QvbmV4dC1sZWdhY3kuZC50c1wiXG4gICAgICBdLFxuICAgICAgdHc6IFtcbiAgICAgICAgXCJkaXN0L3R3LmQudHNcIlxuICAgICAgXSxcbiAgICAgIGV4cHJlc3M6IFtcbiAgICAgICAgXCJkaXN0L2V4cHJlc3MuZC50c1wiXG4gICAgICBdLFxuICAgICAgZmFzdGlmeTogW1xuICAgICAgICBcImRpc3QvZmFzdGlmeS5kLnRzXCJcbiAgICAgIF0sXG4gICAgICBoMzogW1xuICAgICAgICBcImRpc3QvaDMuZC50c1wiXG4gICAgICBdXG4gICAgfVxuICB9LFxuICBzY3JpcHRzOiB7XG4gICAgbGludDogJ2VzbGludCBcIioqLyoue3RzLHRzeH1cIiAtLW1heC13YXJuaW5ncyAwJyxcbiAgICBidWlsZDogXCJ0c3VwXCIsXG4gICAgY2xlYW46IFwiZ2l0IGNsZWFuIC14ZGYgZGlzdCBub2RlX21vZHVsZXNcIixcbiAgICBkZXY6IFwidHN1cCAtLXdhdGNoXCIsXG4gICAgdGVzdDogXCJ2aXRlc3QgcnVuXCIsXG4gICAgXCJ0ZXN0OndhdGNoXCI6IFwidml0ZXN0XCIsXG4gICAgdHlwZWNoZWNrOiBcInRzYyAtLW5vRW1pdFwiXG4gIH0sXG4gIGRlcGVuZGVuY2llczoge1xuICAgIFwiQHVwbG9hZHRoaW5nL21pbWUtdHlwZXNcIjogXCJeMC4yLjJcIixcbiAgICBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjogXCJeNi4xLjBcIixcbiAgICBjb25zb2xhOiBcIl4zLjIuM1wiXG4gIH0sXG4gIGRldkRlcGVuZGVuY2llczoge1xuICAgIFwiQHR5cGVzL2V4cHJlc3NcIjogXCJeNC4xNy4xN1wiLFxuICAgIFwiQHR5cGVzL3JlYWN0XCI6IFwiMTguMi4zM1wiLFxuICAgIFwiQHVwbG9hZHRoaW5nL2VzbGludC1jb25maWdcIjogXCIwLjIuMFwiLFxuICAgIFwiQHVwbG9hZHRoaW5nL3RzY29uZmlnXCI6IFwiMC4xLjBcIixcbiAgICBcIkB1cGxvYWR0aGluZy90c3VwLWNvbmZpZ1wiOiBcIjAuMS4wXCIsXG4gICAgZXNsaW50OiBcIl44LjQ3LjBcIixcbiAgICBleHByZXNzOiBcIl40LjE4LjJcIixcbiAgICBmYXN0aWZ5OiBcIl40LjIzLjJcIixcbiAgICBoMzogXCJeMS44LjFcIixcbiAgICBuZXh0OiBcIjE0LjAuMVwiLFxuICAgIFwic29saWQtanNcIjogXCJeMS43LjExXCIsXG4gICAgdGFpbHdpbmRjc3M6IFwiXjMuMy4yXCIsXG4gICAgdHN1cDogXCI2LjcuMFwiLFxuICAgIFwidHlwZS1mZXN0XCI6IFwiXjMuMTEuMVwiLFxuICAgIHR5cGVzY3JpcHQ6IFwiXjUuMS42XCIsXG4gICAgdW5kaWNpOiBcIl41LjIwLjBcIixcbiAgICB2aXRlc3Q6IFwiXjAuMzAuMVwiLFxuICAgIHpvZDogXCJeMy4yMi4zXCJcbiAgfSxcbiAgZXNsaW50Q29uZmlnOiB7XG4gICAgcm9vdDogdHJ1ZSxcbiAgICBleHRlbmRzOiBbXG4gICAgICBcIkB1cGxvYWR0aGluZy9lc2xpbnQtY29uZmlnL2Jhc2VcIlxuICAgIF0sXG4gICAgcnVsZXM6IHtcbiAgICAgIFwibm8tY29uc29sZVwiOiBcImVycm9yXCJcbiAgICB9XG4gIH1cbn07XG5cbi8vIHNyYy9jb25zdGFudHMudHNcbmlmICghcGFja2FnZV9kZWZhdWx0LnZlcnNpb24pXG4gIHRocm93IG5ldyBFcnJvcihcIm5vIHZlcnNpb24gZm91bmQgaW4gcGFja2FnZS5qc29uXCIpO1xudmFyIFVQTE9BRFRISU5HX1ZFUlNJT04gPSBwYWNrYWdlX2RlZmF1bHQudmVyc2lvbjtcblxuLy8gc3JjL2ludGVybmFsL2Vycm9yLWZvcm1hdHRlci50c1xuZnVuY3Rpb24gZGVmYXVsdEVycm9yRm9ybWF0dGVyKGVycm9yKSB7XG4gIHJldHVybiB7XG4gICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxuICB9O1xufVxuZnVuY3Rpb24gZm9ybWF0RXJyb3IoZXJyb3IsIHJvdXRlcikge1xuICB2YXIgX2E7XG4gIGNvbnN0IGVycm9yRm9ybWF0dGVyID0gKChfYSA9IHJvdXRlcltPYmplY3Qua2V5cyhyb3V0ZXIpWzBdXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLl9kZWYuZXJyb3JGb3JtYXR0ZXIpID8/IGRlZmF1bHRFcnJvckZvcm1hdHRlcjtcbiAgcmV0dXJuIGVycm9yRm9ybWF0dGVyKGVycm9yKTtcbn1cblxuLy8gc3JjL2ludGVybmFsL2xvZ2dlci50c1xuaW1wb3J0IHsgaW5zcGVjdCB9IGZyb20gXCJ1dGlsXCI7XG5pbXBvcnQgeyBjcmVhdGVDb25zb2xhLCBMb2dMZXZlbHMgfSBmcm9tIFwiY29uc29sYS9jb3JlXCI7XG5pbXBvcnQgeyBpc09iamVjdCB9IGZyb20gXCJAdXBsb2FkdGhpbmcvc2hhcmVkXCI7XG52YXIgY29sb3JpemUgPSAoc3RyLCBsZXZlbCkgPT4ge1xuICBzd2l0Y2ggKGxldmVsKSB7XG4gICAgY2FzZSBcImVycm9yXCI6XG4gICAgY2FzZSBcImZhdGFsXCI6XG4gICAgICByZXR1cm4gYFxceDFCWzQxbVxceDFCWzMwbSR7c3RyfVxceDFCWzBtYDtcbiAgICBjYXNlIFwid2FyblwiOlxuICAgICAgcmV0dXJuIGBcXHgxQls0M21cXHgxQlszMG0ke3N0cn1cXHgxQlswbWA7XG4gICAgY2FzZSBcImluZm9cIjpcbiAgICBjYXNlIFwibG9nXCI6XG4gICAgICByZXR1cm4gYFxceDFCWzQ0bVxceDFCWzMwbSR7c3RyfVxceDFCWzBtYDtcbiAgICBjYXNlIFwiZGVidWdcIjpcbiAgICAgIHJldHVybiBgXFx4MUJbNDdtXFx4MUJbMzBtJHtzdHJ9XFx4MUJbMG1gO1xuICAgIGNhc2UgXCJ0cmFjZVwiOlxuICAgICAgcmV0dXJuIGBcXHgxQls0N21cXHgxQlszMG0ke3N0cn1cXHgxQlswbWA7XG4gICAgY2FzZSBcInN1Y2Nlc3NcIjpcbiAgICAgIHJldHVybiBgXFx4MUJbNDJtXFx4MUJbMzBtJHtzdHJ9XFx4MUJbMG1gO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RyO1xuICB9XG59O1xudmFyIGljb25zID0ge1xuICBmYXRhbDogXCJcXHUyQTJGXCIsXG4gIGVycm9yOiBcIlxcdTJBMkZcIixcbiAgd2FybjogXCJcXHUyNkEwXFx1RkUwRlwiLFxuICBpbmZvOiBcIlxcdTIxMzlcIixcbiAgbG9nOiBcIlxcdTIxMzlcIixcbiAgZGVidWc6IFwiXFx1MjY5OVwiLFxuICB0cmFjZTogXCJcXHUyMTkyXCIsXG4gIHN1Y2Nlc3M6IFwiXFx1MjcxM1wiXG59O1xuZnVuY3Rpb24gZm9ybWF0U3RhY2soc3RhY2spIHtcbiAgcmV0dXJuIFwiICBcIiArIHN0YWNrLnNwbGl0KFwiXFxuXCIpLnNwbGljZSgxKS5tYXAoXG4gICAgKGwpID0+IGwudHJpbSgpLnJlcGxhY2UoXCJmaWxlOi8vXCIsIFwiXCIpLnJlcGxhY2UocHJvY2Vzcy5jd2QoKSArIFwiL1wiLCBcIlwiKVxuICApLmpvaW4oXCJcXG4gIFwiKTtcbn1cbmZ1bmN0aW9uIGZvcm1hdEFyZ3MoYXJncykge1xuICBjb25zdCBmbXRBcmdzID0gYXJncy5tYXAoKGFyZykgPT4ge1xuICAgIGlmIChpc09iamVjdChhcmcpICYmIHR5cGVvZiBhcmcuc3RhY2sgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBhcmcubWVzc2FnZSArIFwiXFxuXCIgKyBmb3JtYXRTdGFjayhhcmcuc3RhY2spO1xuICAgIH1cbiAgICByZXR1cm4gYXJnO1xuICB9KTtcbiAgcmV0dXJuIGZtdEFyZ3MubWFwKChhcmcpID0+IHtcbiAgICBpZiAodHlwZW9mIGFyZyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIGFyZztcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBpbnNwZWN0KGFyZywgeyBkZXB0aDogNCB9KTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmcsIG51bGwsIDQpO1xuICAgIH1cbiAgfSk7XG59XG52YXIgbG9nZ2VyID0gY3JlYXRlQ29uc29sYSh7XG4gIHJlcG9ydGVyczogW1xuICAgIHtcbiAgICAgIGxvZzogKGxvZ09iaikgPT4ge1xuICAgICAgICBjb25zdCB7IHR5cGUsIHRhZywgZGF0ZSwgYXJncyB9ID0gbG9nT2JqO1xuICAgICAgICBjb25zdCBpY29uID0gaWNvbnNbdHlwZV07XG4gICAgICAgIGNvbnN0IGxvZ1ByZWZpeCA9IGNvbG9yaXplKFxuICAgICAgICAgIGAgJHtpY29ufSAke3RhZ30gJHtkYXRlLnRvTG9jYWxlVGltZVN0cmluZygpfSBgLFxuICAgICAgICAgIHR5cGVcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgbGluZXMgPSBmb3JtYXRBcmdzKGFyZ3MpLmpvaW4oXCIgXCIpLnNwbGl0KFwiXFxuXCIpLm1hcCgobCkgPT4gbG9nUHJlZml4ICsgXCIgXCIgKyBsKS5qb2luKFwiXFxuXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyhsaW5lcyk7XG4gICAgICB9XG4gICAgfVxuICBdLFxuICBkZWZhdWx0czoge1xuICAgIHRhZzogXCJVUExPQURUSElOR1wiXG4gIH1cbn0pO1xudmFyIGluaXRMb2dnZXIgPSAobGV2ZWwpID0+IHtcbiAgbG9nZ2VyLmxldmVsID0gTG9nTGV2ZWxzW2xldmVsID8/IFwiaW5mb1wiXTtcbn07XG5cbi8vIHNyYy9pbnRlcm5hbC90eXBlcy50c1xudmFyIHVuc2V0TWFya2VyID0gXCJ1bnNldE1hcmtlclwiO1xudmFyIFZBTElEX0FDVElPTl9UWVBFUyA9IFtcbiAgXCJ1cGxvYWRcIixcbiAgXCJmYWlsdXJlXCIsXG4gIFwibXVsdGlwYXJ0LWNvbXBsZXRlXCJcbl07XG5cbi8vIHNyYy9pbnRlcm5hbC9oYW5kbGVyLnRzXG5pbXBvcnQge1xuICBnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMIGFzIGdlbmVyYXRlVXBsb2FkVGhpbmdVUkwyLFxuICBnZXRUeXBlRnJvbUZpbGVOYW1lLFxuICBpc09iamVjdCBhcyBpc09iamVjdDIsXG4gIG9iamVjdEtleXMsXG4gIGZpbGxJbnB1dFJvdXRlQ29uZmlnIGFzIHBhcnNlQW5kRXhwYW5kSW5wdXRDb25maWcsXG4gIHNhZmVQYXJzZUpTT04sXG4gIFVwbG9hZFRoaW5nRXJyb3IgYXMgVXBsb2FkVGhpbmdFcnJvcjJcbn0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcblxuLy8gc3JjL2ludGVybmFsL2Rldi1ob29rLnRzXG5pbXBvcnQge1xuICBnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMLFxuICBwb2xsRm9yRmlsZURhdGEsXG4gIFVwbG9hZFRoaW5nRXJyb3Jcbn0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcbnZhciBpc1ZhbGlkUmVzcG9uc2UgPSAocmVzcG9uc2UpID0+IHtcbiAgaWYgKCFyZXNwb25zZS5vaylcbiAgICByZXR1cm4gZmFsc2U7XG4gIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNDAwKVxuICAgIHJldHVybiBmYWxzZTtcbiAgaWYgKCFyZXNwb25zZS5oZWFkZXJzLmhhcyhcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiKSlcbiAgICByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0cnVlO1xufTtcbnZhciBjb25kaXRpb25hbERldlNlcnZlciA9IGFzeW5jIChvcHRzKSA9PiB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJkZXZlbG9wbWVudFwiKVxuICAgIHJldHVybjtcbiAgY29uc3QgZmlsZURhdGEgPSBhd2FpdCBwb2xsRm9yRmlsZURhdGEoXG4gICAge1xuICAgICAgdXJsOiBnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMKGAvYXBpL3BvbGxVcGxvYWQvJHtvcHRzLmZpbGVLZXl9YCksXG4gICAgICBhcGlLZXk6IG9wdHMuYXBpS2V5LFxuICAgICAgc2RrVmVyc2lvbjogVVBMT0FEVEhJTkdfVkVSU0lPTlxuICAgIH0sXG4gICAgYXN5bmMgKGpzb24pID0+IHtcbiAgICAgIGNvbnN0IGZpbGUgPSBqc29uLmZpbGVEYXRhO1xuICAgICAgbGV0IGNhbGxiYWNrVXJsID0gZmlsZS5jYWxsYmFja1VybCArIGA/c2x1Zz0ke2ZpbGUuY2FsbGJhY2tTbHVnfWA7XG4gICAgICBpZiAoIWNhbGxiYWNrVXJsLnN0YXJ0c1dpdGgoXCJodHRwXCIpKVxuICAgICAgICBjYWxsYmFja1VybCA9IFwiaHR0cDovL1wiICsgY2FsbGJhY2tVcmw7XG4gICAgICBsb2dnZXIuaW5mbyhcIlNJTVVMQVRJTkcgRklMRSBVUExPQUQgV0VCSE9PSyBDQUxMQkFDS1wiLCBjYWxsYmFja1VybCk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGNhbGxiYWNrVXJsLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBzdGF0dXM6IFwidXBsb2FkZWRcIixcbiAgICAgICAgICBtZXRhZGF0YTogSlNPTi5wYXJzZShmaWxlLm1ldGFkYXRhID8/IFwie31cIiksXG4gICAgICAgICAgZmlsZToge1xuICAgICAgICAgICAgdXJsOiBgaHR0cHM6Ly91dGZzLmlvL2YvJHtlbmNvZGVVUklDb21wb25lbnQob3B0cy5maWxlS2V5KX1gLFxuICAgICAgICAgICAga2V5OiBvcHRzLmZpbGVLZXksXG4gICAgICAgICAgICBuYW1lOiBmaWxlLmZpbGVOYW1lLFxuICAgICAgICAgICAgc2l6ZTogZmlsZS5maWxlU2l6ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcInVwbG9hZHRoaW5nLWhvb2tcIjogXCJjYWxsYmFja1wiXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGlzVmFsaWRSZXNwb25zZShyZXNwb25zZSkpIHtcbiAgICAgICAgbG9nZ2VyLnN1Y2Nlc3MoXG4gICAgICAgICAgXCJTdWNjZXNzZnVsbHkgc2ltdWxhdGVkIGNhbGxiYWNrIGZvciBmaWxlXCIsXG4gICAgICAgICAgb3B0cy5maWxlS2V5XG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgXCJGYWlsZWQgdG8gc2ltdWxhdGUgY2FsbGJhY2sgZm9yIGZpbGUuIElzIHlvdXIgd2ViaG9vayBjb25maWd1cmVkIGNvcnJlY3RseT9cIixcbiAgICAgICAgICBvcHRzLmZpbGVLZXlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmaWxlO1xuICAgIH1cbiAgKTtcbiAgaWYgKGZpbGVEYXRhICE9PSB2b2lkIDApXG4gICAgcmV0dXJuIGZpbGVEYXRhO1xuICBsb2dnZXIuZXJyb3IoYEZhaWxlZCB0byBzaW11bGF0ZSBjYWxsYmFjayBmb3IgZmlsZSAke29wdHMuZmlsZUtleX1gKTtcbiAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgIG1lc3NhZ2U6IFwiRmlsZSB0b29rIHRvbyBsb25nIHRvIHVwbG9hZFwiXG4gIH0pO1xufTtcblxuLy8gc3JjL2ludGVybmFsL3BhcnNlci50c1xuZnVuY3Rpb24gZ2V0UGFyc2VGbihwYXJzZXIpIHtcbiAgaWYgKHR5cGVvZiBwYXJzZXIucGFyc2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJldHVybiBwYXJzZXIucGFyc2U7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYXJzZXJcIik7XG59XG5cbi8vIHNyYy9pbnRlcm5hbC9oYW5kbGVyLnRzXG52YXIgY3JlYXRlVVRGZXRjaCA9IChhcGlLZXkpID0+IHtcbiAgcmV0dXJuIGFzeW5jIChlbmRwb2ludCwgcGF5bG9hZCkgPT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTDIoZW5kcG9pbnQpLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICBcIngtdXBsb2FkdGhpbmctYXBpLWtleVwiOiBhcGlLZXksXG4gICAgICAgIFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IFVQTE9BRFRISU5HX1ZFUlNJT05cbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH07XG59O1xudmFyIGZpbGVDb3VudExpbWl0SGl0ID0gKGZpbGVzLCByb3V0ZUNvbmZpZykgPT4ge1xuICB2YXIgX2E7XG4gIGNvbnN0IGNvdW50cyA9IHt9O1xuICBmaWxlcy5mb3JFYWNoKChmaWxlKSA9PiB7XG4gICAgY29uc3QgdHlwZSA9IGdldFR5cGVGcm9tRmlsZU5hbWUoZmlsZS5uYW1lLCBvYmplY3RLZXlzKHJvdXRlQ29uZmlnKSk7XG4gICAgaWYgKCFjb3VudHNbdHlwZV0pIHtcbiAgICAgIGNvdW50c1t0eXBlXSA9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvdW50c1t0eXBlXSArPSAxO1xuICAgIH1cbiAgfSk7XG4gIGZvciAoY29uc3QgX2tleSBpbiBjb3VudHMpIHtcbiAgICBjb25zdCBrZXkgPSBfa2V5O1xuICAgIGNvbnN0IGNvdW50ID0gY291bnRzW2tleV07XG4gICAgY29uc3QgbGltaXQgPSAoX2EgPSByb3V0ZUNvbmZpZ1trZXldKSA9PSBudWxsID8gdm9pZCAwIDogX2EubWF4RmlsZUNvdW50O1xuICAgIGlmICghbGltaXQpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihyb3V0ZUNvbmZpZywga2V5KTtcbiAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIGNvbmZpZyBkdXJpbmcgZmlsZSBjb3VudFwiLFxuICAgICAgICBjYXVzZTogYEV4cGVjdGVkIHJvdXRlIGNvbmZpZyB0byBoYXZlIGEgbWF4RmlsZUNvdW50IGZvciBrZXkgJHtrZXl9IGJ1dCBub25lIHdhcyBmb3VuZC5gXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGNvdW50ID4gbGltaXQpIHtcbiAgICAgIHJldHVybiB7IGxpbWl0SGl0OiB0cnVlLCB0eXBlOiBrZXksIGxpbWl0LCBjb3VudCB9O1xuICAgIH1cbiAgfVxuICByZXR1cm4geyBsaW1pdEhpdDogZmFsc2UgfTtcbn07XG52YXIgZ2V0SGVhZGVyID0gKHJlcSwga2V5KSA9PiB7XG4gIGlmIChyZXEuaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpIHtcbiAgICByZXR1cm4gcmVxLmhlYWRlcnMuZ2V0KGtleSk7XG4gIH1cbiAgcmV0dXJuIHJlcS5oZWFkZXJzW2tleV07XG59O1xudmFyIGJ1aWxkUmVxdWVzdEhhbmRsZXIgPSAob3B0cykgPT4ge1xuICByZXR1cm4gYXN5bmMgKGlucHV0KSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiKSB7XG4gICAgICBsb2dnZXIuaW5mbyhcIlVwbG9hZFRoaW5nIGRldiBzZXJ2ZXIgaXMgbm93IHJ1bm5pbmchXCIpO1xuICAgIH1cbiAgICBjb25zdCB7IHJlcSwgcmVzLCBldmVudCB9ID0gaW5wdXQ7XG4gICAgY29uc3QgeyByb3V0ZXIsIGNvbmZpZyB9ID0gb3B0cztcbiAgICBjb25zdCBwcmVmZXJyZWRPckVudlNlY3JldCA9IChjb25maWcgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbmZpZy51cGxvYWR0aGluZ1NlY3JldCkgPz8gcHJvY2Vzcy5lbnYuVVBMT0FEVEhJTkdfU0VDUkVUO1xuICAgIGxldCB1cmw7XG4gICAgdHJ5IHtcbiAgICAgIHVybCA9IG5ldyBVUkwoaW5wdXQudXJsID8/IHJlcS51cmwgPz8gXCJcIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgIG1lc3NhZ2U6IGBJbnZhbGlkIHVybCAnJHsoKF9hID0gaW5wdXQudXJsKSA9PSBudWxsID8gdm9pZCAwIDogX2EuaHJlZikgPz8gcmVxLnVybH0nYCxcbiAgICAgICAgY2F1c2U6IGVycm9yXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgcGFyYW1zID0gdXJsLnNlYXJjaFBhcmFtcztcbiAgICBjb25zdCB1cGxvYWR0aGluZ0hvb2sgPSBnZXRIZWFkZXIocmVxLCBcInVwbG9hZHRoaW5nLWhvb2tcIikgPz8gdm9pZCAwO1xuICAgIGNvbnN0IHNsdWcgPSBwYXJhbXMuZ2V0KFwic2x1Z1wiKSA/PyB2b2lkIDA7XG4gICAgY29uc3QgYWN0aW9uVHlwZSA9IHBhcmFtcy5nZXQoXCJhY3Rpb25UeXBlXCIpID8/IHZvaWQgMDtcbiAgICBpZiAoIXNsdWcpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIk5vIHNsdWcgcHJvdmlkZWQgaW4gcGFyYW1zOlwiLCBwYXJhbXMpO1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogXCJObyBzbHVnIHByb3ZpZGVkIGluIHBhcmFtc1wiXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHNsdWcgJiYgdHlwZW9mIHNsdWcgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnN0IG1zZyA9IGBFeHBlY3RlZCBzbHVnIHRvIGJlIG9mIHR5cGUgJ3N0cmluZycsIGdvdCAnJHt0eXBlb2Ygc2x1Z30nYDtcbiAgICAgIGxvZ2dlci5lcnJvcihtc2cpO1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogXCJgc2x1Z2AgbXVzdCBiZSBhIHN0cmluZ1wiLFxuICAgICAgICBjYXVzZTogbXNnXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGFjdGlvblR5cGUgJiYgdHlwZW9mIGFjdGlvblR5cGUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnN0IG1zZyA9IGBFeHBlY3RlZCBhY3Rpb25UeXBlIHRvIGJlIG9mIHR5cGUgJ3N0cmluZycsIGdvdCAnJHt0eXBlb2YgYWN0aW9uVHlwZX0nYDtcbiAgICAgIGxvZ2dlci5lcnJvcihtc2cpO1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogXCJgYWN0aW9uVHlwZWAgbXVzdCBiZSBhIHN0cmluZ1wiLFxuICAgICAgICBjYXVzZTogbXNnXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHVwbG9hZHRoaW5nSG9vayAmJiB0eXBlb2YgdXBsb2FkdGhpbmdIb29rICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICBjb25zdCBtc2cgPSBgRXhwZWN0ZWQgdXBsb2FkdGhpbmdIb29rIHRvIGJlIG9mIHR5cGUgJ3N0cmluZycsIGdvdCAnJHt0eXBlb2YgdXBsb2FkdGhpbmdIb29rfSdgO1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogXCJgdXBsb2FkdGhpbmdIb29rYCBtdXN0IGJlIGEgc3RyaW5nXCIsXG4gICAgICAgIGNhdXNlOiBtc2dcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoIXByZWZlcnJlZE9yRW52U2VjcmV0KSB7XG4gICAgICBjb25zdCBtc2cgPSBgTm8gc2VjcmV0IHByb3ZpZGVkLCBwbGVhc2Ugc2V0IFVQTE9BRFRISU5HX1NFQ1JFVCBpbiB5b3VyIGVudiBmaWxlIG9yIGluIHRoZSBjb25maWdgO1xuICAgICAgbG9nZ2VyLmVycm9yKG1zZyk7XG4gICAgICByZXR1cm4gbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgY29kZTogXCJNSVNTSU5HX0VOVlwiLFxuICAgICAgICBtZXNzYWdlOiBgTm8gc2VjcmV0IHByb3ZpZGVkYCxcbiAgICAgICAgY2F1c2U6IG1zZ1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghcHJlZmVycmVkT3JFbnZTZWNyZXQuc3RhcnRzV2l0aChcInNrX1wiKSkge1xuICAgICAgY29uc3QgbXNnID0gYEludmFsaWQgc2VjcmV0IHByb3ZpZGVkLCBVUExPQURUSElOR19TRUNSRVQgbXVzdCBzdGFydCB3aXRoICdza18nYDtcbiAgICAgIGxvZ2dlci5lcnJvcihtc2cpO1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiTUlTU0lOR19FTlZcIixcbiAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIEFQSSBrZXkuIEFQSSBrZXlzIG11c3Qgc3RhcnQgd2l0aCAnc2tfJy5cIixcbiAgICAgICAgY2F1c2U6IG1zZ1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHVwbG9hZGFibGUgPSByb3V0ZXJbc2x1Z107XG4gICAgaWYgKCF1cGxvYWRhYmxlKSB7XG4gICAgICBjb25zdCBtc2cgPSBgTm8gZmlsZSByb3V0ZSBmb3VuZCBmb3Igc2x1ZyAke3NsdWd9YDtcbiAgICAgIGxvZ2dlci5lcnJvcihtc2cpO1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiTk9UX0ZPVU5EXCIsXG4gICAgICAgIG1lc3NhZ2U6IG1zZ1xuICAgICAgfSk7XG4gICAgfVxuICAgIGxvZ2dlci5kZWJ1ZyhcIkFsbCByZXF1ZXN0IGlucHV0IGlzIHZhbGlkXCIsIHsgc2x1ZywgYWN0aW9uVHlwZSB9KTtcbiAgICBjb25zdCB1dEZldGNoID0gY3JlYXRlVVRGZXRjaChwcmVmZXJyZWRPckVudlNlY3JldCk7XG4gICAgaWYgKHVwbG9hZHRoaW5nSG9vayA9PT0gXCJjYWxsYmFja1wiKSB7XG4gICAgICBjb25zdCBtYXliZVJlcUJvZHkgPSBhd2FpdCBzYWZlUGFyc2VKU09OKHJlcSk7XG4gICAgICBsb2dnZXIuZGVidWcoXCJIYW5kbGluZyBjYWxsYmFjayByZXF1ZXN0IHdpdGggaW5wdXQ6XCIsIG1heWJlUmVxQm9keSk7XG4gICAgICBpZiAobWF5YmVSZXFCb2R5IGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiSW52YWxpZCByZXF1ZXN0IGJvZHlcIiwgbWF5YmVSZXFCb2R5KTtcbiAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCByZXF1ZXN0IGJvZHlcIixcbiAgICAgICAgICBjYXVzZTogbWF5YmVSZXFCb2R5XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzb2x2ZXJBcmdzID0ge1xuICAgICAgICBmaWxlOiBtYXliZVJlcUJvZHkuZmlsZSxcbiAgICAgICAgbWV0YWRhdGE6IG1heWJlUmVxQm9keS5tZXRhZGF0YVxuICAgICAgfTtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgXCJSdW5uaW5nICdvblVwbG9hZENvbXBsZXRlJyBjYWxsYmFjayB3aXRoIGlucHV0OlwiLFxuICAgICAgICByZXNvbHZlckFyZ3NcbiAgICAgICk7XG4gICAgICBjb25zdCByZXMyID0gYXdhaXQgdXBsb2FkYWJsZS5yZXNvbHZlcihyZXNvbHZlckFyZ3MpO1xuICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgZmlsZUtleTogbWF5YmVSZXFCb2R5LmZpbGUua2V5LFxuICAgICAgICBjYWxsYmFja0RhdGE6IHJlczIgPz8gbnVsbFxuICAgICAgfTtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgXCInb25VcGxvYWRDb21wbGV0ZScgY2FsbGJhY2sgZmluaXNoZWQuIFNlbmRpbmcgcmVzcG9uc2UgdG8gVXBsb2FkVGhpbmc6XCIsXG4gICAgICAgIHBheWxvYWRcbiAgICAgICk7XG4gICAgICBjb25zdCBjYWxsYmFja1Jlc3BvbnNlID0gYXdhaXQgdXRGZXRjaChcIi9hcGkvc2VydmVyQ2FsbGJhY2tcIiwgcGF5bG9hZCk7XG4gICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgIFwiVXBsb2FkVGhpbmcgcmVzcG9uZGVkIHdpdGggc3RhdHVzOlwiLFxuICAgICAgICBjYWxsYmFja1Jlc3BvbnNlLnN0YXR1c1xuICAgICAgKTtcbiAgICAgIHJldHVybiB7IHN0YXR1czogMjAwIH07XG4gICAgfVxuICAgIGlmICghYWN0aW9uVHlwZSB8fCAhVkFMSURfQUNUSU9OX1RZUEVTLmluY2x1ZGVzKGFjdGlvblR5cGUpKSB7XG4gICAgICBjb25zdCBtc2cgPSBgRXhwZWN0ZWQgJHtWQUxJRF9BQ1RJT05fVFlQRVMubWFwKCh4KSA9PiBgXCIke3h9XCJgKS5qb2luKFwiLCBcIikucmVwbGFjZSgvLCg/IS4qLCkvLCBcIiBvclwiKX0gYnV0IGdvdCBcIiR7YWN0aW9uVHlwZX1cImA7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJJbnZhbGlkIGFjdGlvbiB0eXBlLlwiLCBtc2cpO1xuICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgY2F1c2U6IGBJbnZhbGlkIGFjdGlvbiB0eXBlICR7YWN0aW9uVHlwZX1gLFxuICAgICAgICBtZXNzYWdlOiBtc2dcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzd2l0Y2ggKGFjdGlvblR5cGUpIHtcbiAgICAgIGNhc2UgXCJ1cGxvYWRcIjoge1xuICAgICAgICBjb25zdCBtYXliZUlucHV0ID0gYXdhaXQgc2FmZVBhcnNlSlNPTihyZXEpO1xuICAgICAgICBpZiAobWF5YmVJbnB1dCBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKFwiSW52YWxpZCByZXF1ZXN0IGJvZHlcIiwgbWF5YmVJbnB1dCk7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgcmVxdWVzdCBib2R5XCIsXG4gICAgICAgICAgICBjYXVzZTogbWF5YmVJbnB1dFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcIkhhbmRsaW5nIHVwbG9hZCByZXF1ZXN0IHdpdGggaW5wdXQ6XCIsIG1heWJlSW5wdXQpO1xuICAgICAgICBjb25zdCB7IGZpbGVzLCBpbnB1dDogdXNlcklucHV0IH0gPSBtYXliZUlucHV0O1xuICAgICAgICBsZXQgcGFyc2VkSW5wdXQgPSB7fTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoXCJQYXJzaW5nIGlucHV0XCIpO1xuICAgICAgICAgIGNvbnN0IGlucHV0UGFyc2VyID0gdXBsb2FkYWJsZS5fZGVmLmlucHV0UGFyc2VyO1xuICAgICAgICAgIHBhcnNlZElucHV0ID0gYXdhaXQgZ2V0UGFyc2VGbihpbnB1dFBhcnNlcikodXNlcklucHV0KTtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoXCJJbnB1dCBwYXJzZWQgc3VjY2Vzc2Z1bGx5XCIsIHBhcnNlZElucHV0KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJBbiBlcnJvciBvY2N1cmVkIHRyeWluZyB0byBwYXJzZSBpbnB1dFwiLCBlcnJvcik7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgaW5wdXQuXCIsXG4gICAgICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbWV0YWRhdGEgPSB7fTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoXCJSdW5uaW5nIG1pZGRsZXdhcmVcIik7XG4gICAgICAgICAgbWV0YWRhdGEgPSBhd2FpdCB1cGxvYWRhYmxlLl9kZWYubWlkZGxld2FyZSh7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG4gICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hc3NpZ25tZW50XG4gICAgICAgICAgICByZXMsXG4gICAgICAgICAgICBldmVudCxcbiAgICAgICAgICAgIGlucHV0OiBwYXJzZWRJbnB1dFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIk1pZGRsZXdhcmUgZmluaXNoZWQgc3VjY2Vzc2Z1bGx5IHdpdGg6XCIsIG1ldGFkYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJBbiBlcnJvciBvY2N1cmVkIGluIHlvdXIgbWlkZGxld2FyZSBmdW5jdGlvblwiLCBlcnJvcik7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gcnVuIG1pZGRsZXdhcmUuXCIsXG4gICAgICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZmlsZXMpIHx8ICFmaWxlcy5ldmVyeShcbiAgICAgICAgICAoZikgPT4gaXNPYmplY3QyKGYpICYmIHR5cGVvZiBmLm5hbWUgPT09IFwic3RyaW5nXCIgJiYgdHlwZW9mIGYuc2l6ZSA9PT0gXCJudW1iZXJcIlxuICAgICAgICApKSB7XG4gICAgICAgICAgY29uc3QgbXNnID0gYEV4cGVjdGVkIGZpbGVzIHRvIGJlIG9mIHR5cGUgJ3tuYW1lOnN0cmluZywgc2l6ZTpudW1iZXJ9W10nLCBnb3QgJyR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgICBmaWxlc1xuICAgICAgICAgICl9J2A7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKG1zZyk7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkZpbGVzIG11c3QgYmUgYW4gYXJyYXkgb2Ygb2JqZWN0cyB3aXRoIG5hbWUgYW5kIHNpemVcIixcbiAgICAgICAgICAgIGNhdXNlOiBtc2dcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGFyc2VkQ29uZmlnO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIlBhcnNpbmcgcm91dGUgY29uZmlnXCIsIHVwbG9hZGFibGUuX2RlZi5yb3V0ZXJDb25maWcpO1xuICAgICAgICAgIHBhcnNlZENvbmZpZyA9IHBhcnNlQW5kRXhwYW5kSW5wdXRDb25maWcoXG4gICAgICAgICAgICB1cGxvYWRhYmxlLl9kZWYucm91dGVyQ29uZmlnXG4gICAgICAgICAgKTtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoXCJSb3V0ZSBjb25maWcgcGFyc2VkIHN1Y2Nlc3NmdWxseVwiLCBwYXJzZWRDb25maWcpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkludmFsaWQgcm91dGUgY29uZmlnXCIsIGVycm9yKTtcbiAgICAgICAgICByZXR1cm4gbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBjb25maWcuXCIsXG4gICAgICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIkNoZWNraW5nIGZpbGUgY291bnQgbGltaXRcIiwgZmlsZXMpO1xuICAgICAgICAgIGNvbnN0IHsgbGltaXRIaXQsIGNvdW50LCBsaW1pdCwgdHlwZSB9ID0gZmlsZUNvdW50TGltaXRIaXQoXG4gICAgICAgICAgICBmaWxlcyxcbiAgICAgICAgICAgIHBhcnNlZENvbmZpZ1xuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKGxpbWl0SGl0KSB7XG4gICAgICAgICAgICBjb25zdCBtc2cgPSBgWW91IHVwbG9hZGVkICR7Y291bnR9IGZpbGVzIG9mIHR5cGUgJyR7dHlwZX0nLCBidXQgdGhlIGxpbWl0IGZvciB0aGF0IHR5cGUgaXMgJHtsaW1pdH1gO1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKG1zZyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBcIkZpbGUgbGltaXQgZXhjZWVkZWRcIixcbiAgICAgICAgICAgICAgY2F1c2U6IG1zZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIkZpbGUgY291bnQgbGltaXQgY2hlY2sgcGFzc2VkXCIpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkludmFsaWQgcm91dGUgY29uZmlnXCIsIGVycm9yKTtcbiAgICAgICAgICByZXR1cm4gbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBjb25maWcuXCIsXG4gICAgICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjYWxsYmFja1VybCA9IHJlc29sdmVDYWxsYmFja1VybCh7IGNvbmZpZywgcmVxLCB1cmwgfSk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICBcIlJldHJpZXZpbmcgcHJlc2lnbmVkIFVSTHMgZnJvbSBVcGxvYWRUaGluZy4gQ2FsbGJhY2sgVVJMIGlzOlwiLFxuICAgICAgICAgIGNhbGxiYWNrVXJsLmhyZWZcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgdXBsb2FkdGhpbmdBcGlSZXNwb25zZSA9IGF3YWl0IHV0RmV0Y2goXCIvYXBpL3ByZXBhcmVVcGxvYWRcIiwge1xuICAgICAgICAgIGZpbGVzLFxuICAgICAgICAgIHJvdXRlQ29uZmlnOiBwYXJzZWRDb25maWcsXG4gICAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgICAgY2FsbGJhY2tVcmw6IGNhbGxiYWNrVXJsLm9yaWdpbiArIGNhbGxiYWNrVXJsLnBhdGhuYW1lLFxuICAgICAgICAgIGNhbGxiYWNrU2x1Zzogc2x1Z1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcGFyc2VkUmVzcG9uc2UgPSBhd2FpdCBzYWZlUGFyc2VKU09OKFxuICAgICAgICAgIHVwbG9hZHRoaW5nQXBpUmVzcG9uc2VcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCF1cGxvYWR0aGluZ0FwaVJlc3BvbnNlLm9rIHx8IHBhcnNlZFJlc3BvbnNlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJVbmFibGUgdG8gZ2V0IHByZXNpZ25lZCBVUkxzXCIsIHBhcnNlZFJlc3BvbnNlKTtcbiAgICAgICAgICByZXR1cm4gbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgICAgIGNvZGU6IFwiVVJMX0dFTkVSQVRJT05fRkFJTEVEXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIlVuYWJsZSB0byBnZXQgcHJlc2lnbmVkIHVybHNcIixcbiAgICAgICAgICAgIGNhdXNlOiBwYXJzZWRSZXNwb25zZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcIlVwbG9hZFRoaW5nIHJlc3BvbmRlZCB3aXRoOlwiLCBwYXJzZWRSZXNwb25zZSk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcIlNlbmRpbmcgcHJlc2lnbmVkIFVSTHMgdG8gY2xpZW50XCIpO1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIikge1xuICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBwYXJzZWRSZXNwb25zZSkge1xuICAgICAgICAgICAgdm9pZCBjb25kaXRpb25hbERldlNlcnZlcih7XG4gICAgICAgICAgICAgIGZpbGVLZXk6IGZpbGUua2V5LFxuICAgICAgICAgICAgICBhcGlLZXk6IHByZWZlcnJlZE9yRW52U2VjcmV0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBib2R5OiBwYXJzZWRSZXNwb25zZS5tYXAoKHgpID0+ICh7XG4gICAgICAgICAgICAuLi54LFxuICAgICAgICAgICAgcG9sbGluZ1VybDogZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTDIoYC9hcGkvc2VydmVyQ2FsbGJhY2tgKVxuICAgICAgICAgIH0pKSxcbiAgICAgICAgICBzdGF0dXM6IDIwMFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY2FzZSBcIm11bHRpcGFydC1jb21wbGV0ZVwiOiB7XG4gICAgICAgIGNvbnN0IG1heWJlUmVxQm9keSA9IGF3YWl0IHNhZmVQYXJzZUpTT04ocmVxKTtcbiAgICAgICAgaWYgKG1heWJlUmVxQm9keSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKFwiSW52YWxpZCByZXF1ZXN0IGJvZHlcIiwgbWF5YmVSZXFCb2R5KTtcbiAgICAgICAgICByZXR1cm4gbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCByZXF1ZXN0IGJvZHlcIixcbiAgICAgICAgICAgIGNhdXNlOiBtYXliZVJlcUJvZHlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgICAgXCJIYW5kbGluZyBtdWx0aXBhcnQtY29tcGxldGUgcmVxdWVzdCB3aXRoIGlucHV0OlwiLFxuICAgICAgICAgIG1heWJlUmVxQm9keVxuICAgICAgICApO1xuICAgICAgICBsb2dnZXIuZGVidWcoXCJOb3RpZnlpbmcgVXBsb2FkVGhpbmcgdGhhdCBtdWx0aXBhcnQgdXBsb2FkIGlzIGNvbXBsZXRlXCIpO1xuICAgICAgICBjb25zdCBjb21wbGV0ZVJlcyA9IGF3YWl0IHV0RmV0Y2goXCIvYXBpL2NvbXBsZXRlTXVsdGlwYXJ0XCIsIHtcbiAgICAgICAgICBmaWxlS2V5OiBtYXliZVJlcUJvZHkuZmlsZUtleSxcbiAgICAgICAgICB1cGxvYWRJZDogbWF5YmVSZXFCb2R5LnVwbG9hZElkLFxuICAgICAgICAgIGV0YWdzOiBtYXliZVJlcUJvZHkuZXRhZ3NcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghY29tcGxldGVSZXMub2spIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgICBcIkZhaWxlZCB0byBub3RpZnkgVXBsb2FkVGhpbmcgdGhhdCBtdWx0aXBhcnQgdXBsb2FkIGlzIGNvbXBsZXRlXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICAgICAgY29kZTogXCJVUExPQURfRkFJTEVEXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBjb21wbGV0ZSBtdWx0aXBhcnQgdXBsb2FkXCIsXG4gICAgICAgICAgICBjYXVzZTogY29tcGxldGVSZXNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZGVidWcoXCJVcGxvYWRUaGluZyByZXNwb25kZWQgd2l0aDpcIiwgY29tcGxldGVSZXMuc3RhdHVzKTtcbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiAyMDAgfTtcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJmYWlsdXJlXCI6IHtcbiAgICAgICAgY29uc3QgbWF5YmVSZXFCb2R5ID0gYXdhaXQgc2FmZVBhcnNlSlNPTihyZXEpO1xuICAgICAgICBpZiAobWF5YmVSZXFCb2R5IGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJJbnZhbGlkIHJlcXVlc3QgYm9keVwiLCBtYXliZVJlcUJvZHkpO1xuICAgICAgICAgIHJldHVybiBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHJlcXVlc3QgYm9keVwiLFxuICAgICAgICAgICAgY2F1c2U6IG1heWJlUmVxQm9keVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgZmlsZUtleSwgdXBsb2FkSWQgfSA9IG1heWJlUmVxQm9keTtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwiSGFuZGxpbmcgZmFpbHVyZSByZXF1ZXN0IHdpdGggaW5wdXQ6XCIsIG1heWJlUmVxQm9keSk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcIk5vdGlmeWluZyBVcGxvYWRUaGluZyB0aGF0IHVwbG9hZCBmYWlsZWRcIik7XG4gICAgICAgIGNvbnN0IHVwbG9hZHRoaW5nQXBpUmVzcG9uc2UgPSBhd2FpdCB1dEZldGNoKFwiL2FwaS9mYWlsdXJlQ2FsbGJhY2tcIiwge1xuICAgICAgICAgIGZpbGVLZXksXG4gICAgICAgICAgdXBsb2FkSWRcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghdXBsb2FkdGhpbmdBcGlSZXNwb25zZS5vaykge1xuICAgICAgICAgIGNvbnN0IHBhcnNlZFJlc3BvbnNlID0gYXdhaXQgc2FmZVBhcnNlSlNPTihcbiAgICAgICAgICAgIHVwbG9hZHRoaW5nQXBpUmVzcG9uc2VcbiAgICAgICAgICApO1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBtYXJrIHVwbG9hZCBhcyBmYWlsZWRcIiwgcGFyc2VkUmVzcG9uc2UpO1xuICAgICAgICAgIHJldHVybiBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICAgICAgY29kZTogXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiVW5hYmxlIHRvIG1hcmsgdXBsb2FkIGFzIGZhaWxlZFwiLFxuICAgICAgICAgICAgY2F1c2U6IHBhcnNlZFJlc3BvbnNlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwiVXBsb2FkVGhpbmcgcmVzcG9uZGVkIHdpdGg6XCIsIHVwbG9hZHRoaW5nQXBpUmVzcG9uc2UpO1xuICAgICAgICBsb2dnZXIuZGVidWcoXCJSdW5uaW5nICdvblVwbG9hZEVycm9yJyBjYWxsYmFja1wiKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB1cGxvYWRhYmxlLl9kZWYub25VcGxvYWRFcnJvcih7XG4gICAgICAgICAgICBlcnJvcjogbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgICAgICAgY29kZTogXCJVUExPQURfRkFJTEVEXCIsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGBVcGxvYWQgZmFpbGVkIGZvciAke2ZpbGVLZXl9YFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBmaWxlS2V5XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICAgICAgXCJGYWlsZWQgdG8gcnVuIG9uVXBsb2FkRXJyb3IgY2FsbGJhY2suIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgYmUgdGhyb3dpbmcgZXJyb3JzIGluIHlvdXIgY2FsbGJhY2suXCIsXG4gICAgICAgICAgICBlcnJvclxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gcnVuIG9uVXBsb2FkRXJyb3IgY2FsbGJhY2tcIixcbiAgICAgICAgICAgIGNhdXNlOiBlcnJvclxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogMjAwIH07XG4gICAgICB9XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIHJldHVybiBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICBtZXNzYWdlOiBgSW52YWxpZCBhY3Rpb24gdHlwZWBcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcbmZ1bmN0aW9uIHJlc29sdmVDYWxsYmFja1VybChvcHRzKSB7XG4gIHZhciBfYSwgX2I7XG4gIGxldCBjYWxsYmFja1VybCA9IG9wdHMudXJsO1xuICBpZiAoKF9hID0gb3B0cy5jb25maWcpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jYWxsYmFja1VybCkge1xuICAgIGNhbGxiYWNrVXJsID0gZ2V0RnVsbEFwaVVybChvcHRzLmNvbmZpZy5jYWxsYmFja1VybCk7XG4gIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuVVBMT0FEVEhJTkdfVVJMKSB7XG4gICAgY2FsbGJhY2tVcmwgPSBnZXRGdWxsQXBpVXJsKHByb2Nlc3MuZW52LlVQTE9BRFRISU5HX1VSTCk7XG4gIH1cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiB8fCAhY2FsbGJhY2tVcmwuaG9zdC5pbmNsdWRlcyhcImxvY2FsaG9zdFwiKSkge1xuICAgIHJldHVybiBjYWxsYmFja1VybDtcbiAgfVxuICBsZXQgcGFyc2VkRnJvbUhlYWRlcnMgPSAoX2IgPSBnZXRIZWFkZXIob3B0cy5yZXEsIFwib3JpZ2luXCIpID8/IGdldEhlYWRlcihvcHRzLnJlcSwgXCJyZWZlcmVyXCIpID8/IGdldEhlYWRlcihvcHRzLnJlcSwgXCJob3N0XCIpID8/IGdldEhlYWRlcihvcHRzLnJlcSwgXCJ4LWZvcndhcmRlZC1ob3N0XCIpKSA9PSBudWxsID8gdm9pZCAwIDogX2IudG9TdHJpbmcoKTtcbiAgaWYgKHBhcnNlZEZyb21IZWFkZXJzICYmICFwYXJzZWRGcm9tSGVhZGVycy5pbmNsdWRlcyhcImh0dHBcIikpIHtcbiAgICBwYXJzZWRGcm9tSGVhZGVycyA9IChnZXRIZWFkZXIob3B0cy5yZXEsIFwieC1mb3J3YXJkZWQtcHJvdG9cIikgPz8gXCJodHRwc1wiKS50b1N0cmluZygpICsgXCI6Ly9cIiArIHBhcnNlZEZyb21IZWFkZXJzO1xuICB9XG4gIGlmICghcGFyc2VkRnJvbUhlYWRlcnMgfHwgcGFyc2VkRnJvbUhlYWRlcnMuaW5jbHVkZXMoXCJsb2NhbGhvc3RcIikpIHtcbiAgICBsb2dnZXIud2FybihcbiAgICAgIFwiWW91IGFyZSB1c2luZyBhIGxvY2FsaG9zdCBjYWxsYmFjayB1cmwgaW4gcHJvZHVjdGlvbiB3aGljaCBpcyBub3Qgc3VwcG9ydGVkLlwiLFxuICAgICAgXCJSZWFkIG1vcmUgYW5kIGxlYXJuIGhvdyB0byBmaXggaXQgaGVyZTogaHR0cHM6Ly9kb2NzLnVwbG9hZHRoaW5nLmNvbS9mYXEjbXktY2FsbGJhY2stcnVucy1pbi1kZXZlbG9wbWVudC1idXQtbm90LWluLXByb2R1Y3Rpb25cIlxuICAgICk7XG4gICAgcmV0dXJuIGNhbGxiYWNrVXJsO1xuICB9XG4gIHJldHVybiBnZXRGdWxsQXBpVXJsKHBhcnNlZEZyb21IZWFkZXJzKTtcbn1cbnZhciBidWlsZFBlcm1pc3Npb25zSW5mb0hhbmRsZXIgPSAob3B0cykgPT4ge1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGNvbnN0IHIgPSBvcHRzLnJvdXRlcjtcbiAgICBjb25zdCBwZXJtaXNzaW9ucyA9IE9iamVjdC5rZXlzKHIpLm1hcCgoaykgPT4ge1xuICAgICAgY29uc3Qgcm91dGUgPSByW2tdO1xuICAgICAgY29uc3QgY29uZmlnID0gcGFyc2VBbmRFeHBhbmRJbnB1dENvbmZpZyhyb3V0ZS5fZGVmLnJvdXRlckNvbmZpZyk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzbHVnOiBrLFxuICAgICAgICBjb25maWdcbiAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHBlcm1pc3Npb25zO1xuICB9O1xufTtcblxuLy8gc3JjL2ludGVybmFsL2luY29tcGF0LW5vZGUtZ3VhcmQudHNcbmZ1bmN0aW9uIGluY29tcGF0aWJsZU5vZGVHdWFyZCgpIHtcbiAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICBpZiAodHlwZW9mIHByb2Nlc3MgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgcmV0dXJuO1xuICBsZXQgbWFqb3I7XG4gIGxldCBtaW5vcjtcbiAgY29uc3QgbWF5YmVOb2RlVmVyc2lvbiA9IChfYiA9IChfYSA9IHByb2Nlc3MudmVyc2lvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5ub2RlKSA9PSBudWxsID8gdm9pZCAwIDogX2Iuc3BsaXQoXCIuXCIpO1xuICBpZiAobWF5YmVOb2RlVmVyc2lvbikge1xuICAgIFttYWpvciwgbWlub3JdID0gbWF5YmVOb2RlVmVyc2lvbi5tYXAoKHYpID0+IHBhcnNlSW50KHYsIDEwKSk7XG4gIH1cbiAgY29uc3QgbWF5YmVOb2RlUGF0aCA9IChfYyA9IHByb2Nlc3MuZW52KSA9PSBudWxsID8gdm9pZCAwIDogX2MuTk9ERTtcbiAgaWYgKCFtYWpvciAmJiBtYXliZU5vZGVQYXRoKSB7XG4gICAgY29uc3Qgbm9kZVZlcnNpb24gPSAoX2QgPSAvdihcXGQrKVxcLihcXGQrKVxcLihcXGQrKS8uZXhlYyhtYXliZU5vZGVQYXRoKSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kWzBdO1xuICAgIGlmIChub2RlVmVyc2lvbikge1xuICAgICAgW21ham9yLCBtaW5vcl0gPSBub2RlVmVyc2lvbi5zdWJzdHJpbmcoMSkuc3BsaXQoXCIuXCIpLm1hcCgodikgPT4gcGFyc2VJbnQodiwgMTApKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFtYWpvciB8fCAhbWlub3IpXG4gICAgcmV0dXJuO1xuICBpZiAobWFqb3IgPiAxOClcbiAgICByZXR1cm47XG4gIGlmIChtYWpvciA9PT0gMTggJiYgbWlub3IgPj0gMTMpXG4gICAgcmV0dXJuO1xuICBsb2dnZXIuZmF0YWwoXG4gICAgYFlPVSBBUkUgVVNJTkcgQSBMRUdBQ1kgKCR7bWFqb3J9LiR7bWlub3J9KSBOT0RFIFZFUlNJT04gV0hJQ0ggSVNOJ1QgT0ZGSUNJQUxMWSBTVVBQT1JURUQuIFBMRUFTRSBVUEdSQURFIFRPIE5PREUgXjE4LjEzLmBcbiAgKTtcbiAgcHJvY2Vzcy5leGl0KDEpO1xufVxuXG4vLyBzcmMvaW50ZXJuYWwvdXBsb2FkLWJ1aWxkZXIudHNcbmZ1bmN0aW9uIGludGVybmFsQ3JlYXRlQnVpbGRlcihpbml0RGVmID0ge30pIHtcbiAgY29uc3QgX2RlZiA9IHtcbiAgICAvLyBEZWZhdWx0IHJvdXRlciBjb25maWdcbiAgICByb3V0ZXJDb25maWc6IHtcbiAgICAgIGltYWdlOiB7XG4gICAgICAgIG1heEZpbGVTaXplOiBcIjRNQlwiXG4gICAgICB9XG4gICAgfSxcbiAgICBpbnB1dFBhcnNlcjogeyBwYXJzZTogKCkgPT4gKHt9KSwgX2lucHV0OiB7fSwgX291dHB1dDoge30gfSxcbiAgICBtaWRkbGV3YXJlOiAoKSA9PiAoe30pLFxuICAgIG9uVXBsb2FkRXJyb3I6ICgpID0+ICh7fSksXG4gICAgZXJyb3JGb3JtYXR0ZXI6IGluaXREZWYuZXJyb3JGb3JtYXR0ZXIgPz8gZGVmYXVsdEVycm9yRm9ybWF0dGVyLFxuICAgIC8vIE92ZXJsb2FkIHdpdGggcHJvcGVydGllcyBwYXNzZWQgaW5cbiAgICAuLi5pbml0RGVmXG4gIH07XG4gIHJldHVybiB7XG4gICAgaW5wdXQodXNlclBhcnNlcikge1xuICAgICAgcmV0dXJuIGludGVybmFsQ3JlYXRlQnVpbGRlcih7XG4gICAgICAgIC4uLl9kZWYsXG4gICAgICAgIGlucHV0UGFyc2VyOiB1c2VyUGFyc2VyXG4gICAgICB9KTtcbiAgICB9LFxuICAgIG1pZGRsZXdhcmUodXNlck1pZGRsZXdhcmUpIHtcbiAgICAgIHJldHVybiBpbnRlcm5hbENyZWF0ZUJ1aWxkZXIoe1xuICAgICAgICAuLi5fZGVmLFxuICAgICAgICBtaWRkbGV3YXJlOiB1c2VyTWlkZGxld2FyZVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBvblVwbG9hZENvbXBsZXRlKHVzZXJVcGxvYWRDb21wbGV0ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgX2RlZixcbiAgICAgICAgcmVzb2x2ZXI6IHVzZXJVcGxvYWRDb21wbGV0ZVxuICAgICAgfTtcbiAgICB9LFxuICAgIG9uVXBsb2FkRXJyb3IodXNlck9uVXBsb2FkRXJyb3IpIHtcbiAgICAgIHJldHVybiBpbnRlcm5hbENyZWF0ZUJ1aWxkZXIoe1xuICAgICAgICAuLi5fZGVmLFxuICAgICAgICBvblVwbG9hZEVycm9yOiB1c2VyT25VcGxvYWRFcnJvclxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlQnVpbGRlcihvcHRzKSB7XG4gIHJldHVybiAoaW5wdXQpID0+IHtcbiAgICByZXR1cm4gaW50ZXJuYWxDcmVhdGVCdWlsZGVyKHtcbiAgICAgIHJvdXRlckNvbmZpZzogaW5wdXQsXG4gICAgICAuLi5vcHRzXG4gICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydCB7XG4gIFVQTE9BRFRISU5HX1ZFUlNJT04sXG4gIGRlZmF1bHRFcnJvckZvcm1hdHRlcixcbiAgZm9ybWF0RXJyb3IsXG4gIGxvZ2dlcixcbiAgaW5pdExvZ2dlcixcbiAgdW5zZXRNYXJrZXIsXG4gIFZBTElEX0FDVElPTl9UWVBFUyxcbiAgYnVpbGRSZXF1ZXN0SGFuZGxlcixcbiAgYnVpbGRQZXJtaXNzaW9uc0luZm9IYW5kbGVyLFxuICBpbmNvbXBhdGlibGVOb2RlR3VhcmQsXG4gIGNyZWF0ZUJ1aWxkZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1LNEJRUDdTRS5tanMubWFwIl0sIm5hbWVzIjpbImdldEZ1bGxBcGlVcmwiLCJwYWNrYWdlX2RlZmF1bHQiLCJuYW1lIiwidmVyc2lvbiIsImVuZ2luZXMiLCJub2RlIiwibGljZW5zZSIsImV4cG9ydHMiLCJ0eXBlcyIsImltcG9ydCIsInJlcXVpcmUiLCJmaWxlcyIsInB1Ymxpc2hDb25maWciLCJhY2Nlc3MiLCJ0eXBlc1ZlcnNpb25zIiwiY2xpZW50Iiwic2VydmVyIiwibmV4dCIsInR3IiwiZXhwcmVzcyIsImZhc3RpZnkiLCJoMyIsInNjcmlwdHMiLCJsaW50IiwiYnVpbGQiLCJjbGVhbiIsImRldiIsInRlc3QiLCJ0eXBlY2hlY2siLCJkZXBlbmRlbmNpZXMiLCJjb25zb2xhIiwiZGV2RGVwZW5kZW5jaWVzIiwiZXNsaW50IiwidGFpbHdpbmRjc3MiLCJ0c3VwIiwidHlwZXNjcmlwdCIsInVuZGljaSIsInZpdGVzdCIsInpvZCIsImVzbGludENvbmZpZyIsInJvb3QiLCJleHRlbmRzIiwicnVsZXMiLCJFcnJvciIsIlVQTE9BRFRISU5HX1ZFUlNJT04iLCJkZWZhdWx0RXJyb3JGb3JtYXR0ZXIiLCJlcnJvciIsIm1lc3NhZ2UiLCJmb3JtYXRFcnJvciIsInJvdXRlciIsIl9hIiwiZXJyb3JGb3JtYXR0ZXIiLCJPYmplY3QiLCJrZXlzIiwiX2RlZiIsImluc3BlY3QiLCJjcmVhdGVDb25zb2xhIiwiTG9nTGV2ZWxzIiwiaXNPYmplY3QiLCJjb2xvcml6ZSIsInN0ciIsImxldmVsIiwiaWNvbnMiLCJmYXRhbCIsIndhcm4iLCJpbmZvIiwibG9nIiwiZGVidWciLCJ0cmFjZSIsInN1Y2Nlc3MiLCJmb3JtYXRTdGFjayIsInN0YWNrIiwic3BsaXQiLCJzcGxpY2UiLCJtYXAiLCJsIiwidHJpbSIsInJlcGxhY2UiLCJwcm9jZXNzIiwiY3dkIiwiam9pbiIsImZvcm1hdEFyZ3MiLCJhcmdzIiwiZm10QXJncyIsImFyZyIsImRlcHRoIiwiSlNPTiIsInN0cmluZ2lmeSIsImxvZ2dlciIsInJlcG9ydGVycyIsImxvZ09iaiIsInR5cGUiLCJ0YWciLCJkYXRlIiwiaWNvbiIsImxvZ1ByZWZpeCIsInRvTG9jYWxlVGltZVN0cmluZyIsImxpbmVzIiwiY29uc29sZSIsImRlZmF1bHRzIiwiaW5pdExvZ2dlciIsInVuc2V0TWFya2VyIiwiVkFMSURfQUNUSU9OX1RZUEVTIiwiZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTCIsImdlbmVyYXRlVXBsb2FkVGhpbmdVUkwyIiwiZ2V0VHlwZUZyb21GaWxlTmFtZSIsImlzT2JqZWN0MiIsIm9iamVjdEtleXMiLCJmaWxsSW5wdXRSb3V0ZUNvbmZpZyIsInBhcnNlQW5kRXhwYW5kSW5wdXRDb25maWciLCJzYWZlUGFyc2VKU09OIiwiVXBsb2FkVGhpbmdFcnJvciIsIlVwbG9hZFRoaW5nRXJyb3IyIiwicG9sbEZvckZpbGVEYXRhIiwiaXNWYWxpZFJlc3BvbnNlIiwicmVzcG9uc2UiLCJvayIsInN0YXR1cyIsImhlYWRlcnMiLCJoYXMiLCJjb25kaXRpb25hbERldlNlcnZlciIsIm9wdHMiLCJmaWxlRGF0YSIsInVybCIsImZpbGVLZXkiLCJhcGlLZXkiLCJzZGtWZXJzaW9uIiwianNvbiIsImZpbGUiLCJjYWxsYmFja1VybCIsImNhbGxiYWNrU2x1ZyIsInN0YXJ0c1dpdGgiLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJtZXRhZGF0YSIsInBhcnNlIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwia2V5IiwiZmlsZU5hbWUiLCJzaXplIiwiZmlsZVNpemUiLCJjb2RlIiwiZ2V0UGFyc2VGbiIsInBhcnNlciIsImNyZWF0ZVVURmV0Y2giLCJlbmRwb2ludCIsInBheWxvYWQiLCJmaWxlQ291bnRMaW1pdEhpdCIsInJvdXRlQ29uZmlnIiwiY291bnRzIiwiZm9yRWFjaCIsIl9rZXkiLCJjb3VudCIsImxpbWl0IiwibWF4RmlsZUNvdW50IiwiY2F1c2UiLCJsaW1pdEhpdCIsImdldEhlYWRlciIsInJlcSIsIkhlYWRlcnMiLCJnZXQiLCJidWlsZFJlcXVlc3RIYW5kbGVyIiwiaW5wdXQiLCJyZXMiLCJldmVudCIsImNvbmZpZyIsInByZWZlcnJlZE9yRW52U2VjcmV0IiwidXBsb2FkdGhpbmdTZWNyZXQiLCJlbnYiLCJVUExPQURUSElOR19TRUNSRVQiLCJVUkwiLCJocmVmIiwicGFyYW1zIiwic2VhcmNoUGFyYW1zIiwidXBsb2FkdGhpbmdIb29rIiwic2x1ZyIsImFjdGlvblR5cGUiLCJtc2ciLCJ1cGxvYWRhYmxlIiwidXRGZXRjaCIsIm1heWJlUmVxQm9keSIsInJlc29sdmVyQXJncyIsInJlczIiLCJyZXNvbHZlciIsImNhbGxiYWNrRGF0YSIsImNhbGxiYWNrUmVzcG9uc2UiLCJpbmNsdWRlcyIsIngiLCJtYXliZUlucHV0IiwidXNlcklucHV0IiwicGFyc2VkSW5wdXQiLCJpbnB1dFBhcnNlciIsIm1pZGRsZXdhcmUiLCJBcnJheSIsImlzQXJyYXkiLCJldmVyeSIsImYiLCJwYXJzZWRDb25maWciLCJyb3V0ZXJDb25maWciLCJyZXNvbHZlQ2FsbGJhY2tVcmwiLCJ1cGxvYWR0aGluZ0FwaVJlc3BvbnNlIiwib3JpZ2luIiwicGF0aG5hbWUiLCJwYXJzZWRSZXNwb25zZSIsInBvbGxpbmdVcmwiLCJjb21wbGV0ZVJlcyIsInVwbG9hZElkIiwiZXRhZ3MiLCJvblVwbG9hZEVycm9yIiwiX2IiLCJVUExPQURUSElOR19VUkwiLCJob3N0IiwicGFyc2VkRnJvbUhlYWRlcnMiLCJ0b1N0cmluZyIsImJ1aWxkUGVybWlzc2lvbnNJbmZvSGFuZGxlciIsInIiLCJwZXJtaXNzaW9ucyIsImsiLCJyb3V0ZSIsImluY29tcGF0aWJsZU5vZGVHdWFyZCIsIl9jIiwiX2QiLCJtYWpvciIsIm1pbm9yIiwibWF5YmVOb2RlVmVyc2lvbiIsInZlcnNpb25zIiwidiIsInBhcnNlSW50IiwibWF5YmVOb2RlUGF0aCIsIk5PREUiLCJub2RlVmVyc2lvbiIsImV4ZWMiLCJzdWJzdHJpbmciLCJleGl0IiwiaW50ZXJuYWxDcmVhdGVCdWlsZGVyIiwiaW5pdERlZiIsImltYWdlIiwibWF4RmlsZVNpemUiLCJfaW5wdXQiLCJfb3V0cHV0IiwidXNlclBhcnNlciIsInVzZXJNaWRkbGV3YXJlIiwib25VcGxvYWRDb21wbGV0ZSIsInVzZXJVcGxvYWRDb21wbGV0ZSIsInVzZXJPblVwbG9hZEVycm9yIiwiY3JlYXRlQnVpbGRlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/chunk-K4BQP7SE.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   maybeParseResponseXML: () => (/* binding */ maybeParseResponseXML),\n/* harmony export */   uploadPart: () => (/* binding */ uploadPart),\n/* harmony export */   uploadPartWithProgress: () => (/* binding */ uploadPartWithProgress)\n/* harmony export */ });\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.mjs\");\n// src/internal/multi-part.ts\n\n// src/internal/s3-error-parser.ts\nvar maybeParseResponseXML = (maybeXml)=>{\n    const codeMatch = maybeXml.match(/<Code>(.*?)<\\/Code>/s);\n    const messageMatch = maybeXml.match(/<Message>(.*?)<\\/Message>/s);\n    const code = codeMatch == null ? void 0 : codeMatch[1];\n    const message = messageMatch == null ? void 0 : messageMatch[1];\n    if (!code || !message) return null;\n    return {\n        code: s3CodeToUploadThingCode[code] ?? DEFAULT_ERROR_CODE,\n        message\n    };\n};\nvar DEFAULT_ERROR_CODE = \"UPLOAD_FAILED\";\nvar s3CodeToUploadThingCode = {\n    AccessDenied: \"FORBIDDEN\",\n    // 403 Forbidden\n    EntityTooSmall: \"TOO_SMALL\",\n    // 400 Bad Request\n    EntityTooLarge: \"TOO_LARGE\",\n    // 400 Bad Request\n    ExpiredToken: \"FORBIDDEN\",\n    // 400 Bad Request\n    IncorrectNumberOfFilesInPostRequest: \"TOO_MANY_FILES\",\n    // 400 Bad Request\n    InternalError: \"INTERNAL_SERVER_ERROR\",\n    // 500 Internal Server Error\n    KeyTooLongError: \"KEY_TOO_LONG\",\n    // 400 Bad Request\n    MaxMessageLengthExceeded: \"TOO_LARGE\"\n};\n// src/internal/multi-part.ts\nasync function uploadPart(opts, retryCount = 0) {\n    const s3Res = await opts.fetch(opts.url, {\n        method: \"PUT\",\n        body: opts.chunk,\n        headers: {\n            \"Content-Type\": opts.contentType,\n            \"Content-Disposition\": [\n                opts.contentDisposition,\n                `filename=\"${encodeURI(opts.fileName)}\"`,\n                `filename*=UTF-8''${encodeURI(opts.fileName)}`\n            ].join(\"; \")\n        }\n    });\n    if (s3Res.ok) {\n        const etag = s3Res.headers.get(\"Etag\");\n        if (!etag) {\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                code: \"UPLOAD_FAILED\",\n                message: \"Missing Etag header from uploaded part\"\n            });\n        }\n        return etag.replace(/\"/g, \"\");\n    }\n    if (retryCount < opts.maxRetries) {\n        const delay = 2 ** retryCount * 1e3;\n        await new Promise((r)=>setTimeout(r, delay));\n        return uploadPart(opts, retryCount++);\n    }\n    await opts.fetch((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateUploadThingURL)(\"/api/failureCallback\"), {\n        method: \"POST\",\n        body: JSON.stringify({\n            fileKey: opts.key\n        }),\n        headers: opts.utRequestHeaders\n    });\n    const text = await s3Res.text();\n    const parsed = maybeParseResponseXML(text);\n    if (parsed == null ? void 0 : parsed.message) {\n        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n            code: \"UPLOAD_FAILED\",\n            message: parsed.message\n        });\n    }\n    throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n        code: \"UPLOAD_FAILED\",\n        message: \"Failed to upload file to storage provider\",\n        cause: s3Res\n    });\n}\nasync function uploadPartWithProgress(opts, retryCount = 0) {\n    return new Promise((resolve, reject)=>{\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"PUT\", opts.url, true);\n        xhr.setRequestHeader(\"Content-Type\", opts.fileType);\n        xhr.setRequestHeader(\"Content-Disposition\", [\n            opts.contentDisposition,\n            `filename=\"${encodeURI(opts.fileName)}\"`,\n            `filename*=UTF-8''${encodeURI(opts.fileName)}`\n        ].join(\"; \"));\n        xhr.onload = async ()=>{\n            if (xhr.status >= 200 && xhr.status < 300) {\n                const etag = xhr.getResponseHeader(\"Etag\");\n                etag ? resolve(etag) : reject(\"NO ETAG\");\n            } else if (retryCount < opts.maxRetries) {\n                const delay = Math.pow(2, retryCount) * 1e3;\n                await new Promise((res)=>setTimeout(res, delay));\n                await uploadPartWithProgress(opts, retryCount + 1);\n            } else {\n                reject(\"Max retries exceeded\");\n            }\n        };\n        let lastProgress = 0;\n        xhr.onerror = async ()=>{\n            lastProgress = 0;\n            if (retryCount < opts.maxRetries) {\n                const delay = Math.pow(2, retryCount) * 100;\n                await new Promise((res)=>setTimeout(res, delay));\n                await uploadPartWithProgress(opts, retryCount + 1);\n            } else {\n                reject(\"Max retries exceeded\");\n            }\n        };\n        xhr.upload.onprogress = (e)=>{\n            const delta = e.loaded - lastProgress;\n            lastProgress += delta;\n            opts.onProgress(delta);\n        };\n        xhr.send(opts.chunk);\n    });\n}\n //# sourceMappingURL=chunk-S3R3VXRK.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1TM1IzVlhSSy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLDZCQUE2QjtBQUNrRDtBQUUvRSxrQ0FBa0M7QUFDbEMsSUFBSUUsd0JBQXdCLENBQUNDO0lBQzNCLE1BQU1DLFlBQVlELFNBQVNFLEtBQUssQ0FBQztJQUNqQyxNQUFNQyxlQUFlSCxTQUFTRSxLQUFLLENBQUM7SUFDcEMsTUFBTUUsT0FBT0gsYUFBYSxPQUFPLEtBQUssSUFBSUEsU0FBUyxDQUFDLEVBQUU7SUFDdEQsTUFBTUksVUFBVUYsZ0JBQWdCLE9BQU8sS0FBSyxJQUFJQSxZQUFZLENBQUMsRUFBRTtJQUMvRCxJQUFJLENBQUNDLFFBQVEsQ0FBQ0MsU0FDWixPQUFPO0lBQ1QsT0FBTztRQUFFRCxNQUFNRSx1QkFBdUIsQ0FBQ0YsS0FBSyxJQUFJRztRQUFvQkY7SUFBUTtBQUM5RTtBQUNBLElBQUlFLHFCQUFxQjtBQUN6QixJQUFJRCwwQkFBMEI7SUFDNUJFLGNBQWM7SUFDZCxnQkFBZ0I7SUFDaEJDLGdCQUFnQjtJQUNoQixrQkFBa0I7SUFDbEJDLGdCQUFnQjtJQUNoQixrQkFBa0I7SUFDbEJDLGNBQWM7SUFDZCxrQkFBa0I7SUFDbEJDLHFDQUFxQztJQUNyQyxrQkFBa0I7SUFDbEJDLGVBQWU7SUFDZiw0QkFBNEI7SUFDNUJDLGlCQUFpQjtJQUNqQixrQkFBa0I7SUFDbEJDLDBCQUEwQjtBQUU1QjtBQUVBLDZCQUE2QjtBQUM3QixlQUFlQyxXQUFXQyxJQUFJLEVBQUVDLGFBQWEsQ0FBQztJQUM1QyxNQUFNQyxRQUFRLE1BQU1GLEtBQUtHLEtBQUssQ0FBQ0gsS0FBS0ksR0FBRyxFQUFFO1FBQ3ZDQyxRQUFRO1FBQ1JDLE1BQU1OLEtBQUtPLEtBQUs7UUFDaEJDLFNBQVM7WUFDUCxnQkFBZ0JSLEtBQUtTLFdBQVc7WUFDaEMsdUJBQXVCO2dCQUNyQlQsS0FBS1Usa0JBQWtCO2dCQUN2QixDQUFDLFVBQVUs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Z0JBQzNDLE1BQU1ZLHVCQUF1Qi9CLE1BQU1DLGFBQWE7WUFDbEQsT0FBTztnQkFDTGdDLE9BQU87WUFDVDtRQUNGO1FBQ0FDLElBQUlhLE1BQU0sQ0FBQ0MsVUFBVSxHQUFHLENBQUNDO1lBQ3ZCLE1BQU1DLFFBQVFELEVBQUVFLE1BQU0sR0FBR047WUFDekJBLGdCQUFnQks7WUFDaEJsRCxLQUFLb0QsVUFBVSxDQUFDRjtRQUNsQjtRQUNBaEIsSUFBSW1CLElBQUksQ0FBQ3JELEtBQUtPLEtBQUs7SUFDckI7QUFDRjtBQU1FLENBQ0YsMkNBQTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaXNvbW9ycGhpYy8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L2NodW5rLVMzUjNWWFJLLm1qcz9hNDRmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9pbnRlcm5hbC9tdWx0aS1wYXJ0LnRzXG5pbXBvcnQgeyBnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMLCBVcGxvYWRUaGluZ0Vycm9yIH0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcblxuLy8gc3JjL2ludGVybmFsL3MzLWVycm9yLXBhcnNlci50c1xudmFyIG1heWJlUGFyc2VSZXNwb25zZVhNTCA9IChtYXliZVhtbCkgPT4ge1xuICBjb25zdCBjb2RlTWF0Y2ggPSBtYXliZVhtbC5tYXRjaCgvPENvZGU+KC4qPyk8XFwvQ29kZT4vcyk7XG4gIGNvbnN0IG1lc3NhZ2VNYXRjaCA9IG1heWJlWG1sLm1hdGNoKC88TWVzc2FnZT4oLio/KTxcXC9NZXNzYWdlPi9zKTtcbiAgY29uc3QgY29kZSA9IGNvZGVNYXRjaCA9PSBudWxsID8gdm9pZCAwIDogY29kZU1hdGNoWzFdO1xuICBjb25zdCBtZXNzYWdlID0gbWVzc2FnZU1hdGNoID09IG51bGwgPyB2b2lkIDAgOiBtZXNzYWdlTWF0Y2hbMV07XG4gIGlmICghY29kZSB8fCAhbWVzc2FnZSlcbiAgICByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIHsgY29kZTogczNDb2RlVG9VcGxvYWRUaGluZ0NvZGVbY29kZV0gPz8gREVGQVVMVF9FUlJPUl9DT0RFLCBtZXNzYWdlIH07XG59O1xudmFyIERFRkFVTFRfRVJST1JfQ09ERSA9IFwiVVBMT0FEX0ZBSUxFRFwiO1xudmFyIHMzQ29kZVRvVXBsb2FkVGhpbmdDb2RlID0ge1xuICBBY2Nlc3NEZW5pZWQ6IFwiRk9SQklEREVOXCIsXG4gIC8vIDQwMyBGb3JiaWRkZW5cbiAgRW50aXR5VG9vU21hbGw6IFwiVE9PX1NNQUxMXCIsXG4gIC8vIDQwMCBCYWQgUmVxdWVzdFxuICBFbnRpdHlUb29MYXJnZTogXCJUT09fTEFSR0VcIixcbiAgLy8gNDAwIEJhZCBSZXF1ZXN0XG4gIEV4cGlyZWRUb2tlbjogXCJGT1JCSURERU5cIixcbiAgLy8gNDAwIEJhZCBSZXF1ZXN0XG4gIEluY29ycmVjdE51bWJlck9mRmlsZXNJblBvc3RSZXF1ZXN0OiBcIlRPT19NQU5ZX0ZJTEVTXCIsXG4gIC8vIDQwMCBCYWQgUmVxdWVzdFxuICBJbnRlcm5hbEVycm9yOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAvLyA1MDAgSW50ZXJuYWwgU2VydmVyIEVycm9yXG4gIEtleVRvb0xvbmdFcnJvcjogXCJLRVlfVE9PX0xPTkdcIixcbiAgLy8gNDAwIEJhZCBSZXF1ZXN0XG4gIE1heE1lc3NhZ2VMZW5ndGhFeGNlZWRlZDogXCJUT09fTEFSR0VcIlxuICAvLyA0MDAgQmFkIFJlcXVlc3Rcbn07XG5cbi8vIHNyYy9pbnRlcm5hbC9tdWx0aS1wYXJ0LnRzXG5hc3luYyBmdW5jdGlvbiB1cGxvYWRQYXJ0KG9wdHMsIHJldHJ5Q291bnQgPSAwKSB7XG4gIGNvbnN0IHMzUmVzID0gYXdhaXQgb3B0cy5mZXRjaChvcHRzLnVybCwge1xuICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICBib2R5OiBvcHRzLmNodW5rLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IG9wdHMuY29udGVudFR5cGUsXG4gICAgICBcIkNvbnRlbnQtRGlzcG9zaXRpb25cIjogW1xuICAgICAgICBvcHRzLmNvbnRlbnREaXNwb3NpdGlvbixcbiAgICAgICAgYGZpbGVuYW1lPVwiJHtlbmNvZGVVUkkob3B0cy5maWxlTmFtZSl9XCJgLFxuICAgICAgICBgZmlsZW5hbWUqPVVURi04Jycke2VuY29kZVVSSShvcHRzLmZpbGVOYW1lKX1gXG4gICAgICBdLmpvaW4oXCI7IFwiKVxuICAgIH1cbiAgfSk7XG4gIGlmIChzM1Jlcy5vaykge1xuICAgIGNvbnN0IGV0YWcgPSBzM1Jlcy5oZWFkZXJzLmdldChcIkV0YWdcIik7XG4gICAgaWYgKCFldGFnKSB7XG4gICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgICAgICBtZXNzYWdlOiBcIk1pc3NpbmcgRXRhZyBoZWFkZXIgZnJvbSB1cGxvYWRlZCBwYXJ0XCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZXRhZy5yZXBsYWNlKC9cIi9nLCBcIlwiKTtcbiAgfVxuICBpZiAocmV0cnlDb3VudCA8IG9wdHMubWF4UmV0cmllcykge1xuICAgIGNvbnN0IGRlbGF5ID0gMiAqKiByZXRyeUNvdW50ICogMWUzO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyKSA9PiBzZXRUaW1lb3V0KHIsIGRlbGF5KSk7XG4gICAgcmV0dXJuIHVwbG9hZFBhcnQob3B0cywgcmV0cnlDb3VudCsrKTtcbiAgfVxuICBhd2FpdCBvcHRzLmZldGNoKGdlbmVyYXRlVXBsb2FkVGhpbmdVUkwoXCIvYXBpL2ZhaWx1cmVDYWxsYmFja1wiKSwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgZmlsZUtleTogb3B0cy5rZXlcbiAgICB9KSxcbiAgICBoZWFkZXJzOiBvcHRzLnV0UmVxdWVzdEhlYWRlcnNcbiAgfSk7XG4gIGNvbnN0IHRleHQgPSBhd2FpdCBzM1Jlcy50ZXh0KCk7XG4gIGNvbnN0IHBhcnNlZCA9IG1heWJlUGFyc2VSZXNwb25zZVhNTCh0ZXh0KTtcbiAgaWYgKHBhcnNlZCA9PSBudWxsID8gdm9pZCAwIDogcGFyc2VkLm1lc3NhZ2UpIHtcbiAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICBjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcbiAgICAgIG1lc3NhZ2U6IHBhcnNlZC5tZXNzYWdlXG4gICAgfSk7XG4gIH1cbiAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHVwbG9hZCBmaWxlIHRvIHN0b3JhZ2UgcHJvdmlkZXJcIixcbiAgICBjYXVzZTogczNSZXNcbiAgfSk7XG59XG5hc3luYyBmdW5jdGlvbiB1cGxvYWRQYXJ0V2l0aFByb2dyZXNzKG9wdHMsIHJldHJ5Q291bnQgPSAwKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oXCJQVVRcIiwgb3B0cy51cmwsIHRydWUpO1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIG9wdHMuZmlsZVR5cGUpO1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFxuICAgICAgXCJDb250ZW50LURpc3Bvc2l0aW9uXCIsXG4gICAgICBbXG4gICAgICAgIG9wdHMuY29udGVudERpc3Bvc2l0aW9uLFxuICAgICAgICBgZmlsZW5hbWU9XCIke2VuY29kZVVSSShvcHRzLmZpbGVOYW1lKX1cImAsXG4gICAgICAgIGBmaWxlbmFtZSo9VVRGLTgnJyR7ZW5jb2RlVVJJKG9wdHMuZmlsZU5hbWUpfWBcbiAgICAgIF0uam9pbihcIjsgXCIpXG4gICAgKTtcbiAgICB4aHIub25sb2FkID0gYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDApIHtcbiAgICAgICAgY29uc3QgZXRhZyA9IHhoci5nZXRSZXNwb25zZUhlYWRlcihcIkV0YWdcIik7XG4gICAgICAgIGV0YWcgPyByZXNvbHZlKGV0YWcpIDogcmVqZWN0KFwiTk8gRVRBR1wiKTtcbiAgICAgIH0gZWxzZSBpZiAocmV0cnlDb3VudCA8IG9wdHMubWF4UmV0cmllcykge1xuICAgICAgICBjb25zdCBkZWxheSA9IE1hdGgucG93KDIsIHJldHJ5Q291bnQpICogMWUzO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzKSA9PiBzZXRUaW1lb3V0KHJlcywgZGVsYXkpKTtcbiAgICAgICAgYXdhaXQgdXBsb2FkUGFydFdpdGhQcm9ncmVzcyhvcHRzLCByZXRyeUNvdW50ICsgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWplY3QoXCJNYXggcmV0cmllcyBleGNlZWRlZFwiKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGxldCBsYXN0UHJvZ3Jlc3MgPSAwO1xuICAgIHhoci5vbmVycm9yID0gYXN5bmMgKCkgPT4ge1xuICAgICAgbGFzdFByb2dyZXNzID0gMDtcbiAgICAgIGlmIChyZXRyeUNvdW50IDwgb3B0cy5tYXhSZXRyaWVzKSB7XG4gICAgICAgIGNvbnN0IGRlbGF5ID0gTWF0aC5wb3coMiwgcmV0cnlDb3VudCkgKiAxMDA7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXMpID0+IHNldFRpbWVvdXQocmVzLCBkZWxheSkpO1xuICAgICAgICBhd2FpdCB1cGxvYWRQYXJ0V2l0aFByb2dyZXNzKG9wdHMsIHJldHJ5Q291bnQgKyAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlamVjdChcIk1heCByZXRyaWVzIGV4Y2VlZGVkXCIpO1xuICAgICAgfVxuICAgIH07XG4gICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gKGUpID0+IHtcbiAgICAgIGNvbnN0IGRlbHRhID0gZS5sb2FkZWQgLSBsYXN0UHJvZ3Jlc3M7XG4gICAgICBsYXN0UHJvZ3Jlc3MgKz0gZGVsdGE7XG4gICAgICBvcHRzLm9uUHJvZ3Jlc3MoZGVsdGEpO1xuICAgIH07XG4gICAgeGhyLnNlbmQob3B0cy5jaHVuayk7XG4gIH0pO1xufVxuXG5leHBvcnQge1xuICBtYXliZVBhcnNlUmVzcG9uc2VYTUwsXG4gIHVwbG9hZFBhcnQsXG4gIHVwbG9hZFBhcnRXaXRoUHJvZ3Jlc3Ncbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1TM1IzVlhSSy5tanMubWFwIl0sIm5hbWVzIjpbImdlbmVyYXRlVXBsb2FkVGhpbmdVUkwiLCJVcGxvYWRUaGluZ0Vycm9yIiwibWF5YmVQYXJzZVJlc3BvbnNlWE1MIiwibWF5YmVYbWwiLCJjb2RlTWF0Y2giLCJtYXRjaCIsIm1lc3NhZ2VNYXRjaCIsImNvZGUiLCJtZXNzYWdlIiwiczNDb2RlVG9VcGxvYWRUaGluZ0NvZGUiLCJERUZBVUxUX0VSUk9SX0NPREUiLCJBY2Nlc3NEZW5pZWQiLCJFbnRpdHlUb29TbWFsbCIsIkVudGl0eVRvb0xhcmdlIiwiRXhwaXJlZFRva2VuIiwiSW5jb3JyZWN0TnVtYmVyT2ZGaWxlc0luUG9zdFJlcXVlc3QiLCJJbnRlcm5hbEVycm9yIiwiS2V5VG9vTG9uZ0Vycm9yIiwiTWF4TWVzc2FnZUxlbmd0aEV4Y2VlZGVkIiwidXBsb2FkUGFydCIsIm9wdHMiLCJyZXRyeUNvdW50IiwiczNSZXMiLCJmZXRjaCIsInVybCIsIm1ldGhvZCIsImJvZHkiLCJjaHVuayIsImhlYWRlcnMiLCJjb250ZW50VHlwZSIsImNvbnRlbnREaXNwb3NpdGlvbiIsImVuY29kZVVSSSIsImZpbGVOYW1lIiwiam9pbiIsIm9rIiwiZXRhZyIsImdldCIsInJlcGxhY2UiLCJtYXhSZXRyaWVzIiwiZGVsYXkiLCJQcm9taXNlIiwiciIsInNldFRpbWVvdXQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlsZUtleSIsImtleSIsInV0UmVxdWVzdEhlYWRlcnMiLCJ0ZXh0IiwicGFyc2VkIiwiY2F1c2UiLCJ1cGxvYWRQYXJ0V2l0aFByb2dyZXNzIiwicmVzb2x2ZSIsInJlamVjdCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJmaWxlVHlwZSIsIm9ubG9hZCIsInN0YXR1cyIsImdldFJlc3BvbnNlSGVhZGVyIiwiTWF0aCIsInBvdyIsInJlcyIsImxhc3RQcm9ncmVzcyIsIm9uZXJyb3IiLCJ1cGxvYWQiLCJvbnByb2dyZXNzIiwiZSIsImRlbHRhIiwibG9hZGVkIiwib25Qcm9ncmVzcyIsInNlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/chunk-ZUSXAHWS.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/chunk-ZUSXAHWS.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UTApi: () => (/* binding */ UTApi),\n/* harmony export */   createServerHandler: () => (/* binding */ createServerHandler),\n/* harmony export */   createUploadthing: () => (/* binding */ createUploadthing),\n/* harmony export */   extractRouterConfig: () => (/* binding */ extractRouterConfig)\n/* harmony export */ });\n/* harmony import */ var _chunk_S3R3VXRK_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-S3R3VXRK.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs\");\n/* harmony import */ var _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-K4BQP7SE.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-K4BQP7SE.mjs\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.mjs\");\n\n\n// src/server.ts\n\n// src/sdk/index.ts\n\n// src/sdk/utils.ts\n\nfunction guardServerOnly() {\n    if (false) {}\n}\nfunction getApiKeyOrThrow(apiKey) {\n    if (apiKey) return apiKey;\n    if (process.env.UPLOADTHING_SECRET) return process.env.UPLOADTHING_SECRET;\n    throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n        code: \"MISSING_ENV\",\n        message: \"Missing `UPLOADTHING_SECRET` env variable.\"\n    });\n}\nvar uploadFilesInternal = async (data, opts)=>{\n    const fileData = data.files.map((file)=>({\n            name: file.name ?? \"unnamed-blob\",\n            type: file.type,\n            size: file.size\n        }));\n    _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Getting presigned URLs for files\", fileData);\n    const res = await opts.fetch((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.generateUploadThingURL)(\"/api/uploadFiles\"), {\n        method: \"POST\",\n        headers: opts.utRequestHeaders,\n        cache: \"no-store\",\n        body: JSON.stringify({\n            files: fileData,\n            metadata: data.metadata,\n            contentDisposition: data.contentDisposition,\n            acl: data.acl\n        })\n    });\n    if (!res.ok) {\n        const error = await _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError.fromResponse(res);\n        _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Failed getting presigned URLs:\", error);\n        throw error;\n    }\n    const clonedRes = res.clone();\n    const json = await res.json();\n    if (\"error\" in json) {\n        const error = await _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError.fromResponse(clonedRes);\n        _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Failed getting presigned URLs:\", error);\n        throw error;\n    }\n    _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Got presigned URLs:\", json.data);\n    _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Starting uploads...\");\n    const uploads = await Promise.allSettled(data.files.map(async (file, i)=>{\n        const { presignedUrls, key, fileUrl, uploadId, chunkSize } = json.data[i];\n        if (!presignedUrls || !Array.isArray(presignedUrls)) {\n            _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Failed to generate presigned URL for file:\", file, json.data[i]);\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                code: \"URL_GENERATION_FAILED\",\n                message: \"Failed to generate presigned URL\",\n                cause: JSON.stringify(json.data[i])\n            });\n        }\n        _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Uploading file\", file.name, \"with\", presignedUrls.length, \"chunks of size\", chunkSize, \"bytes each\");\n        const etags = await Promise.all(presignedUrls.map(async (url, index)=>{\n            const offset = chunkSize * index;\n            const end = Math.min(offset + chunkSize, file.size);\n            const chunk = file.slice(offset, end);\n            const etag = await (0,_chunk_S3R3VXRK_mjs__WEBPACK_IMPORTED_MODULE_0__.uploadPart)({\n                fetch: opts.fetch,\n                url,\n                chunk,\n                contentDisposition: data.contentDisposition,\n                contentType: file.type,\n                fileName: file.name,\n                maxRetries: 10,\n                key,\n                utRequestHeaders: opts.utRequestHeaders\n            });\n            _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Part\", index + 1, \"uploaded successfully:\", etag);\n            return {\n                tag: etag,\n                partNumber: index + 1\n            };\n        }));\n        _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"File\", file.name, \"uploaded successfully. Notifying UploadThing to complete multipart upload.\");\n        const completionRes = await opts.fetch((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.generateUploadThingURL)(\"/api/completeMultipart\"), {\n            method: \"POST\",\n            body: JSON.stringify({\n                fileKey: key,\n                uploadId,\n                etags\n            }),\n            headers: opts.utRequestHeaders\n        });\n        _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"UploadThing responsed with status:\", completionRes.status);\n        _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Polling for file data...\");\n        await (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.pollForFileData)({\n            url: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.generateUploadThingURL)(`/api/pollUpload/${key}`),\n            apiKey: opts.utRequestHeaders[\"x-uploadthing-api-key\"],\n            sdkVersion: _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.UPLOADTHING_VERSION\n        });\n        _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Polling complete.\");\n        return {\n            key,\n            url: fileUrl,\n            name: file.name,\n            size: file.size\n        };\n    }));\n    _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"All uploads complete, aggregating results...\");\n    return uploads.map((upload)=>{\n        if (upload.status === \"fulfilled\") {\n            const data2 = upload.value;\n            return {\n                data: data2,\n                error: null\n            };\n        }\n        const reason = upload.reason;\n        const error = _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError.toObject(reason);\n        return {\n            data: null,\n            error\n        };\n    });\n};\nfunction parseTimeToSeconds(time) {\n    const match = time.toString().split(/(\\d+)/).filter(Boolean);\n    const num = Number(match[0]);\n    const unit = (match[1] ?? \"s\").trim().slice(0, 1);\n    const multiplier = {\n        s: 1,\n        m: 60,\n        h: 3600,\n        d: 86400\n    }[unit];\n    return num * multiplier;\n}\n// src/sdk/index.ts\nvar UTApi = class {\n    constructor(opts){\n        /** @deprecated Use {@link renameFiles} instead. */ // eslint-disable-next-line @typescript-eslint/unbound-method\n        this.renameFile = this.renameFiles;\n        var _a;\n        this.fetch = (opts == null ? void 0 : opts.fetch) ?? globalThis.fetch;\n        this.apiKey = (opts == null ? void 0 : opts.apiKey) ?? process.env.UPLOADTHING_SECRET;\n        this.defaultHeaders = {\n            \"Content-Type\": \"application/json\",\n            \"x-uploadthing-api-key\": this.apiKey,\n            \"x-uploadthing-version\": _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.UPLOADTHING_VERSION\n        };\n        (0,_chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.initLogger)(opts == null ? void 0 : opts.logLevel);\n        guardServerOnly();\n        getApiKeyOrThrow(this.apiKey);\n        if (!((_a = this.apiKey) == null ? void 0 : _a.startsWith(\"sk_\"))) {\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                code: \"MISSING_ENV\",\n                message: \"Invalid API key. API keys must start with `sk_`.\"\n            });\n        }\n        (0,_chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.incompatibleNodeGuard)();\n    }\n    async requestUploadThing(pathname, body, fallbackErrorMessage) {\n        const url = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.generateUploadThingURL)(pathname);\n        _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Requesting UploadThing:\", {\n            url,\n            body,\n            headers: this.defaultHeaders\n        });\n        const res = await this.fetch(url, {\n            method: \"POST\",\n            cache: \"no-store\",\n            headers: this.defaultHeaders,\n            body: JSON.stringify(body)\n        });\n        _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"UploadThing responsed with status:\", res.status);\n        const json = await res.json();\n        if (!res.ok || \"error\" in json) {\n            _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error:\", json);\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                code: \"INTERNAL_SERVER_ERROR\",\n                message: \"error\" in json && typeof json.error === \"string\" ? json.error : fallbackErrorMessage\n            });\n        }\n        _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"UploadThing response:\", json);\n        return json;\n    }\n    /**\n   * Upload files to UploadThing storage.\n   *\n   * @example\n   * await uploadFiles(new File([\"foo\"], \"foo.txt\"));\n   *\n   * @example\n   * await uploadFiles([\n   *   new File([\"foo\"], \"foo.txt\"),\n   *   new File([\"bar\"], \"bar.txt\"),\n   * ]);\n   */ async uploadFiles(files, opts) {\n        guardServerOnly();\n        const filesToUpload = Array.isArray(files) ? files : [\n            files\n        ];\n        _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Uploading files:\", filesToUpload);\n        const uploads = await uploadFilesInternal({\n            files: filesToUpload,\n            metadata: (opts == null ? void 0 : opts.metadata) ?? {},\n            contentDisposition: (opts == null ? void 0 : opts.contentDisposition) ?? \"inline\",\n            acl: opts == null ? void 0 : opts.acl\n        }, {\n            fetch: this.fetch,\n            utRequestHeaders: this.defaultHeaders\n        });\n        const uploadFileResponse = Array.isArray(files) ? uploads : uploads[0];\n        _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Finished uploading:\", uploadFileResponse);\n        return uploadFileResponse;\n    }\n    /**\n   * @param {string} url The URL of the file to upload\n   * @param {Json} metadata JSON-parseable metadata to attach to the uploaded file(s)\n   *\n   * @example\n   * await uploadFileFromUrl(\"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n   *\n   * @example\n   * await uploadFileFromUrl([\n   *   \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\n   *   \"https://uploadthing.com/f/1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"\n   * ])\n   */ async uploadFilesFromUrl(urls, opts) {\n        guardServerOnly();\n        const fileUrls = Array.isArray(urls) ? urls : [\n            urls\n        ];\n        const formData = new FormData();\n        formData.append(\"metadata\", JSON.stringify((opts == null ? void 0 : opts.metadata) ?? {}));\n        const filesToUpload = await Promise.all(fileUrls.map(async (url)=>{\n            if (typeof url === \"string\") url = new URL(url);\n            const filename = url.pathname.split(\"/\").pop() ?? \"unknown-filename\";\n            _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Downloading file:\", url);\n            const fileResponse = await fetch(url);\n            if (!fileResponse.ok) {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Failed to download requested file.\",\n                    cause: fileResponse\n                });\n            }\n            _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Finished downloading file. Reading blob...\");\n            const blob = await fileResponse.blob();\n            _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Finished reading blob.\");\n            return Object.assign(blob, {\n                name: filename\n            });\n        }));\n        _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"All files downloaded, uploading...\");\n        const uploads = await uploadFilesInternal({\n            files: filesToUpload,\n            metadata: (opts == null ? void 0 : opts.metadata) ?? {},\n            contentDisposition: (opts == null ? void 0 : opts.contentDisposition) ?? \"inline\",\n            acl: opts == null ? void 0 : opts.acl\n        }, {\n            fetch: this.fetch,\n            utRequestHeaders: this.defaultHeaders\n        });\n        const uploadFileResponse = Array.isArray(urls) ? uploads : uploads[0];\n        _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.logger.debug(\"Finished uploading:\", uploadFileResponse);\n        return uploadFileResponse;\n    }\n    /**\n   * Request to delete files from UploadThing storage.\n   * @param {string | string[]} fileKeys\n   *\n   * @example\n   * await deleteFiles(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n   *\n   * @example\n   * await deleteFiles([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n   */ async deleteFiles(fileKeys) {\n        guardServerOnly();\n        if (!Array.isArray(fileKeys)) fileKeys = [\n            fileKeys\n        ];\n        return this.requestUploadThing(\"/api/deleteFile\", {\n            fileKeys\n        }, \"An unknown error occured while deleting files.\");\n    }\n    /**\n   * Request file URLs from UploadThing storage.\n   * @param {string | string[]} fileKeys\n   *\n   * @example\n   * const data = await getFileUrls(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n   * console.log(data); // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\"}]\n   *\n   * @example\n   * const data = await getFileUrls([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n   * console.log(data) // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\" },{key: \"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\", url: \"https://uploadthing.com/f/1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"}]\n   */ async getFileUrls(fileKeys) {\n        guardServerOnly();\n        if (!Array.isArray(fileKeys)) fileKeys = [\n            fileKeys\n        ];\n        const json = await this.requestUploadThing(\"/api/getFileUrl\", {\n            fileKeys\n        }, \"An unknown error occured while retrieving file URLs.\");\n        return json.data;\n    }\n    /**\n   * Request file list from UploadThing storage.\n   * @param {object} opts\n   * @param {number} opts.limit The maximum number of files to return\n   * @param {number} opts.offset The number of files to skip\n   *\n   * @example\n   * const data = await listFiles({ limit: 1 });\n   * console.log(data); // { key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", id: \"2e0fdb64-9957-4262-8e45-f372ba903ac8\" }\n   */ async listFiles(opts) {\n        guardServerOnly();\n        const json = await this.requestUploadThing(\"/api/listFiles\", opts, \"An unknown error occured while listing files.\");\n        return json.files;\n    }\n    async renameFiles(updates) {\n        guardServerOnly();\n        if (!Array.isArray(updates)) updates = [\n            updates\n        ];\n        return this.requestUploadThing(\"/api/renameFiles\", {\n            updates\n        }, \"An unknown error occured while renaming files.\");\n    }\n    async getUsageInfo() {\n        guardServerOnly();\n        return this.requestUploadThing(\"/api/getUsageInfo\", {}, \"An unknown error occured while getting usage info.\");\n    }\n    /** Request a presigned url for a private file(s) */ async getSignedURL(fileKey, opts) {\n        guardServerOnly();\n        const expiresIn = (opts == null ? void 0 : opts.expiresIn) ? parseTimeToSeconds(opts.expiresIn) : void 0;\n        if ((opts == null ? void 0 : opts.expiresIn) && isNaN(expiresIn)) {\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds.\"\n            });\n        }\n        if (expiresIn && expiresIn > 86400 * 7) {\n            throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"expiresIn must be less than 7 days (604800 seconds).\"\n            });\n        }\n        const json = await this.requestUploadThing(\"/api/requestFileAccess\", {\n            fileKey,\n            expiresIn\n        }, \"An unknown error occured while retrieving presigned URLs.\");\n        return json.url;\n    }\n};\n// src/server.ts\nvar createUploadthing = (opts)=>(0,_chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.createBuilder)(opts);\nvar createServerHandler = (opts)=>{\n    var _a;\n    (0,_chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.initLogger)((_a = opts.config) == null ? void 0 : _a.logLevel);\n    (0,_chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.incompatibleNodeGuard)();\n    const requestHandler = (0,_chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.buildRequestHandler)(opts);\n    const getBuildPerms = (0,_chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.buildPermissionsInfoHandler)(opts);\n    const POST = async (request)=>{\n        const req = request instanceof Request ? request : request.request;\n        const response = await requestHandler({\n            req\n        });\n        if (response instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError) {\n            return new Response(JSON.stringify((0,_chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.formatError)(response, opts.router)), {\n                status: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.getStatusCodeFromError)(response),\n                headers: {\n                    \"x-uploadthing-version\": _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.UPLOADTHING_VERSION\n                }\n            });\n        }\n        if (response.status !== 200) {\n            return new Response(\"An unknown error occured\", {\n                status: 500,\n                headers: {\n                    \"x-uploadthing-version\": _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.UPLOADTHING_VERSION\n                }\n            });\n        }\n        return new Response(JSON.stringify(response.body), {\n            status: response.status,\n            headers: {\n                \"x-uploadthing-version\": _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.UPLOADTHING_VERSION\n            }\n        });\n    };\n    const GET = (request)=>{\n        const _req = request instanceof Request ? request : request.request;\n        return new Response(JSON.stringify(getBuildPerms()), {\n            status: 200,\n            headers: {\n                \"x-uploadthing-version\": _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.UPLOADTHING_VERSION\n            }\n        });\n    };\n    return {\n        GET,\n        POST\n    };\n};\nvar extractRouterConfig = (router)=>(0,_chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_1__.buildPermissionsInfoHandler)({\n        router\n    })();\n //# sourceMappingURL=chunk-ZUSXAHWS.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9jaHVuay1aVVNYQUhXUy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUU4QjtBQVVBO0FBRTlCLGdCQUFnQjtBQUNvRjtBQUVwRyxtQkFBbUI7QUFDNEc7QUFFL0gsbUJBQW1CO0FBS1U7QUFDN0IsU0FBU2dCO0lBQ1AsSUFBSSxLQUE2QixFQUFFLEVBS2xDO0FBQ0g7QUFDQSxTQUFTRyxpQkFBaUJDLE1BQU07SUFDOUIsSUFBSUEsUUFDRixPQUFPQTtJQUNULElBQUlDLFFBQVFDLEdBQUcsQ0FBQ0Msa0JBQWtCLEVBQ2hDLE9BQU9GLFFBQVFDLEdBQUcsQ0FBQ0Msa0JBQWtCO0lBQ3ZDLE1BQU0sSUFBSWIsaUVBQWdCQSxDQUFDO1FBQ3pCTyxNQUFNO1FBQ05DLFNBQVM7SUFDWDtBQUNGO0FBQ0EsSUFBSU0sc0JBQXNCLE9BQU9DLE1BQU1DO0lBQ3JDLE1BQU1DLFdBQVdGLEtBQUtHLEtBQUssQ0FBQ0MsR0FBRyxDQUFDLENBQUNDLE9BQVU7WUFDekNDLE1BQU1ELEtBQUtDLElBQUksSUFBSTtZQUNuQkMsTUFBTUYsS0FBS0UsSUFBSTtZQUNmQyxNQUFNSCxLQUFLRyxJQUFJO1FBQ2pCO0lBQ0F6Qix1REFBTUEsQ0FBQzBCLEtBQUssQ0FBQyxvQ0FBb0NQO0lBQ2pELE1BQU1RLE1BQU0sTUFBTVQsS0FBS1UsS0FBSyxDQUFDeEIsMkVBQXNCQSxDQUFDLHFCQUFxQjtRQUN2RXlCLFFBQVE7UUFDUkMsU0FBU1osS0FBS2EsZ0JBQWdCO1FBQzlCQyxPQUFPO1FBQ1BDLE1BQU1DLEtBQUtDLFNBQVMsQ0FBQztZQUNuQmYsT0FBT0Q7WUFDUGlCLFVBQVVuQixLQUFLbUIsUUFBUTtZQUN2QkMsb0JBQW9CcEIsS0FBS29CLGtCQUFrQjtZQUMzQ0MsS0FBS3JCLEtBQUtxQixHQUFHO1FBQ2Y7SUFDRjtJQUNBLElBQUksQ0FBQ1gsSUFBSVksRUFBRSxFQUFFO1FBQ1gsTUFBTUMsUUFBUSxNQUFNdEMs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LElBQUlTLHNCQUFzQixDQUFDSCxTQUFXekosZ0ZBQTJCQSxDQUFDO1FBQUV5SjtJQUFPO0FBT3pFLENBQ0YsMkNBQTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaXNvbW9ycGhpYy8uL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L2NodW5rLVpVU1hBSFdTLm1qcz9mNjM0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHVwbG9hZFBhcnRcbn0gZnJvbSBcIi4vY2h1bmstUzNSM1ZYUksubWpzXCI7XG5pbXBvcnQge1xuICBVUExPQURUSElOR19WRVJTSU9OLFxuICBidWlsZFBlcm1pc3Npb25zSW5mb0hhbmRsZXIsXG4gIGJ1aWxkUmVxdWVzdEhhbmRsZXIsXG4gIGNyZWF0ZUJ1aWxkZXIsXG4gIGZvcm1hdEVycm9yLFxuICBpbmNvbXBhdGlibGVOb2RlR3VhcmQsXG4gIGluaXRMb2dnZXIsXG4gIGxvZ2dlclxufSBmcm9tIFwiLi9jaHVuay1LNEJRUDdTRS5tanNcIjtcblxuLy8gc3JjL3NlcnZlci50c1xuaW1wb3J0IHsgZ2V0U3RhdHVzQ29kZUZyb21FcnJvciwgVXBsb2FkVGhpbmdFcnJvciBhcyBVcGxvYWRUaGluZ0Vycm9yMyB9IGZyb20gXCJAdXBsb2FkdGhpbmcvc2hhcmVkXCI7XG5cbi8vIHNyYy9zZGsvaW5kZXgudHNcbmltcG9ydCB7IGdlbmVyYXRlVXBsb2FkVGhpbmdVUkwgYXMgZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTDIsIFVwbG9hZFRoaW5nRXJyb3IgYXMgVXBsb2FkVGhpbmdFcnJvcjIgfSBmcm9tIFwiQHVwbG9hZHRoaW5nL3NoYXJlZFwiO1xuXG4vLyBzcmMvc2RrL3V0aWxzLnRzXG5pbXBvcnQge1xuICBnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMLFxuICBwb2xsRm9yRmlsZURhdGEsXG4gIFVwbG9hZFRoaW5nRXJyb3Jcbn0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcbmZ1bmN0aW9uIGd1YXJkU2VydmVyT25seSgpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgbWVzc2FnZTogXCJUaGUgYHV0YXBpYCBjYW4gb25seSBiZSB1c2VkIG9uIHRoZSBzZXJ2ZXIuXCJcbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0QXBpS2V5T3JUaHJvdyhhcGlLZXkpIHtcbiAgaWYgKGFwaUtleSlcbiAgICByZXR1cm4gYXBpS2V5O1xuICBpZiAocHJvY2Vzcy5lbnYuVVBMT0FEVEhJTkdfU0VDUkVUKVxuICAgIHJldHVybiBwcm9jZXNzLmVudi5VUExPQURUSElOR19TRUNSRVQ7XG4gIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICBjb2RlOiBcIk1JU1NJTkdfRU5WXCIsXG4gICAgbWVzc2FnZTogXCJNaXNzaW5nIGBVUExPQURUSElOR19TRUNSRVRgIGVudiB2YXJpYWJsZS5cIlxuICB9KTtcbn1cbnZhciB1cGxvYWRGaWxlc0ludGVybmFsID0gYXN5bmMgKGRhdGEsIG9wdHMpID0+IHtcbiAgY29uc3QgZmlsZURhdGEgPSBkYXRhLmZpbGVzLm1hcCgoZmlsZSkgPT4gKHtcbiAgICBuYW1lOiBmaWxlLm5hbWUgPz8gXCJ1bm5hbWVkLWJsb2JcIixcbiAgICB0eXBlOiBmaWxlLnR5cGUsXG4gICAgc2l6ZTogZmlsZS5zaXplXG4gIH0pKTtcbiAgbG9nZ2VyLmRlYnVnKFwiR2V0dGluZyBwcmVzaWduZWQgVVJMcyBmb3IgZmlsZXNcIiwgZmlsZURhdGEpO1xuICBjb25zdCByZXMgPSBhd2FpdCBvcHRzLmZldGNoKGdlbmVyYXRlVXBsb2FkVGhpbmdVUkwoXCIvYXBpL3VwbG9hZEZpbGVzXCIpLCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBoZWFkZXJzOiBvcHRzLnV0UmVxdWVzdEhlYWRlcnMsXG4gICAgY2FjaGU6IFwibm8tc3RvcmVcIixcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBmaWxlczogZmlsZURhdGEsXG4gICAgICBtZXRhZGF0YTogZGF0YS5tZXRhZGF0YSxcbiAgICAgIGNvbnRlbnREaXNwb3NpdGlvbjogZGF0YS5jb250ZW50RGlzcG9zaXRpb24sXG4gICAgICBhY2w6IGRhdGEuYWNsXG4gICAgfSlcbiAgfSk7XG4gIGlmICghcmVzLm9rKSB7XG4gICAgY29uc3QgZXJyb3IgPSBhd2FpdCBVcGxvYWRUaGluZ0Vycm9yLmZyb21SZXNwb25zZShyZXMpO1xuICAgIGxvZ2dlci5kZWJ1ZyhcIkZhaWxlZCBnZXR0aW5nIHByZXNpZ25lZCBVUkxzOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgY29uc3QgY2xvbmVkUmVzID0gcmVzLmNsb25lKCk7XG4gIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICBpZiAoXCJlcnJvclwiIGluIGpzb24pIHtcbiAgICBjb25zdCBlcnJvciA9IGF3YWl0IFVwbG9hZFRoaW5nRXJyb3IuZnJvbVJlc3BvbnNlKGNsb25lZFJlcyk7XG4gICAgbG9nZ2VyLmRlYnVnKFwiRmFpbGVkIGdldHRpbmcgcHJlc2lnbmVkIFVSTHM6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICBsb2dnZXIuZGVidWcoXCJHb3QgcHJlc2lnbmVkIFVSTHM6XCIsIGpzb24uZGF0YSk7XG4gIGxvZ2dlci5kZWJ1ZyhcIlN0YXJ0aW5nIHVwbG9hZHMuLi5cIik7XG4gIGNvbnN0IHVwbG9hZHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoXG4gICAgZGF0YS5maWxlcy5tYXAoYXN5bmMgKGZpbGUsIGkpID0+IHtcbiAgICAgIGNvbnN0IHsgcHJlc2lnbmVkVXJscywga2V5LCBmaWxlVXJsLCB1cGxvYWRJZCwgY2h1bmtTaXplIH0gPSBqc29uLmRhdGFbaV07XG4gICAgICBpZiAoIXByZXNpZ25lZFVybHMgfHwgIUFycmF5LmlzQXJyYXkocHJlc2lnbmVkVXJscykpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICAgIFwiRmFpbGVkIHRvIGdlbmVyYXRlIHByZXNpZ25lZCBVUkwgZm9yIGZpbGU6XCIsXG4gICAgICAgICAgZmlsZSxcbiAgICAgICAgICBqc29uLmRhdGFbaV1cbiAgICAgICAgKTtcbiAgICAgICAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6IFwiVVJMX0dFTkVSQVRJT05fRkFJTEVEXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZ2VuZXJhdGUgcHJlc2lnbmVkIFVSTFwiLFxuICAgICAgICAgIGNhdXNlOiBKU09OLnN0cmluZ2lmeShqc29uLmRhdGFbaV0pXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgbG9nZ2VyLmRlYnVnKFxuICAgICAgICBcIlVwbG9hZGluZyBmaWxlXCIsXG4gICAgICAgIGZpbGUubmFtZSxcbiAgICAgICAgXCJ3aXRoXCIsXG4gICAgICAgIHByZXNpZ25lZFVybHMubGVuZ3RoLFxuICAgICAgICBcImNodW5rcyBvZiBzaXplXCIsXG4gICAgICAgIGNodW5rU2l6ZSxcbiAgICAgICAgXCJieXRlcyBlYWNoXCJcbiAgICAgICk7XG4gICAgICBjb25zdCBldGFncyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBwcmVzaWduZWRVcmxzLm1hcChhc3luYyAodXJsLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGNodW5rU2l6ZSAqIGluZGV4O1xuICAgICAgICAgIGNvbnN0IGVuZCA9IE1hdGgubWluKG9mZnNldCArIGNodW5rU2l6ZSwgZmlsZS5zaXplKTtcbiAgICAgICAgICBjb25zdCBjaHVuayA9IGZpbGUuc2xpY2Uob2Zmc2V0LCBlbmQpO1xuICAgICAgICAgIGNvbnN0IGV0YWcgPSBhd2FpdCB1cGxvYWRQYXJ0KHtcbiAgICAgICAgICAgIGZldGNoOiBvcHRzLmZldGNoLFxuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgY2h1bmssXG4gICAgICAgICAgICBjb250ZW50RGlzcG9zaXRpb246IGRhdGEuY29udGVudERpc3Bvc2l0aW9uLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgICAgIGZpbGVOYW1lOiBmaWxlLm5hbWUsXG4gICAgICAgICAgICBtYXhSZXRyaWVzOiAxMCxcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIHV0UmVxdWVzdEhlYWRlcnM6IG9wdHMudXRSZXF1ZXN0SGVhZGVyc1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIlBhcnRcIiwgaW5kZXggKyAxLCBcInVwbG9hZGVkIHN1Y2Nlc3NmdWxseTpcIiwgZXRhZyk7XG4gICAgICAgICAgcmV0dXJuIHsgdGFnOiBldGFnLCBwYXJ0TnVtYmVyOiBpbmRleCArIDEgfTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICBsb2dnZXIuZGVidWcoXG4gICAgICAgIFwiRmlsZVwiLFxuICAgICAgICBmaWxlLm5hbWUsXG4gICAgICAgIFwidXBsb2FkZWQgc3VjY2Vzc2Z1bGx5LiBOb3RpZnlpbmcgVXBsb2FkVGhpbmcgdG8gY29tcGxldGUgbXVsdGlwYXJ0IHVwbG9hZC5cIlxuICAgICAgKTtcbiAgICAgIGNvbnN0IGNvbXBsZXRpb25SZXMgPSBhd2FpdCBvcHRzLmZldGNoKFxuICAgICAgICBnZW5lcmF0ZVVwbG9hZFRoaW5nVVJMKFwiL2FwaS9jb21wbGV0ZU11bHRpcGFydFwiKSxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgZmlsZUtleToga2V5LFxuICAgICAgICAgICAgdXBsb2FkSWQsXG4gICAgICAgICAgICBldGFnc1xuICAgICAgICAgIH0pLFxuICAgICAgICAgIGhlYWRlcnM6IG9wdHMudXRSZXF1ZXN0SGVhZGVyc1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgbG9nZ2VyLmRlYnVnKFwiVXBsb2FkVGhpbmcgcmVzcG9uc2VkIHdpdGggc3RhdHVzOlwiLCBjb21wbGV0aW9uUmVzLnN0YXR1cyk7XG4gICAgICBsb2dnZXIuZGVidWcoXCJQb2xsaW5nIGZvciBmaWxlIGRhdGEuLi5cIik7XG4gICAgICBhd2FpdCBwb2xsRm9yRmlsZURhdGEoe1xuICAgICAgICB1cmw6IGdlbmVyYXRlVXBsb2FkVGhpbmdVUkwoYC9hcGkvcG9sbFVwbG9hZC8ke2tleX1gKSxcbiAgICAgICAgYXBpS2V5OiBvcHRzLnV0UmVxdWVzdEhlYWRlcnNbXCJ4LXVwbG9hZHRoaW5nLWFwaS1rZXlcIl0sXG4gICAgICAgIHNka1ZlcnNpb246IFVQTE9BRFRISU5HX1ZFUlNJT05cbiAgICAgIH0pO1xuICAgICAgbG9nZ2VyLmRlYnVnKFwiUG9sbGluZyBjb21wbGV0ZS5cIik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBrZXksXG4gICAgICAgIHVybDogZmlsZVVybCxcbiAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICBzaXplOiBmaWxlLnNpemVcbiAgICAgIH07XG4gICAgfSlcbiAgKTtcbiAgbG9nZ2VyLmRlYnVnKFwiQWxsIHVwbG9hZHMgY29tcGxldGUsIGFnZ3JlZ2F0aW5nIHJlc3VsdHMuLi5cIik7XG4gIHJldHVybiB1cGxvYWRzLm1hcCgodXBsb2FkKSA9PiB7XG4gICAgaWYgKHVwbG9hZC5zdGF0dXMgPT09IFwiZnVsZmlsbGVkXCIpIHtcbiAgICAgIGNvbnN0IGRhdGEyID0gdXBsb2FkLnZhbHVlO1xuICAgICAgcmV0dXJuIHsgZGF0YTogZGF0YTIsIGVycm9yOiBudWxsIH07XG4gICAgfVxuICAgIGNvbnN0IHJlYXNvbiA9IHVwbG9hZC5yZWFzb247XG4gICAgY29uc3QgZXJyb3IgPSBVcGxvYWRUaGluZ0Vycm9yLnRvT2JqZWN0KHJlYXNvbik7XG4gICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgZXJyb3IgfTtcbiAgfSk7XG59O1xuZnVuY3Rpb24gcGFyc2VUaW1lVG9TZWNvbmRzKHRpbWUpIHtcbiAgY29uc3QgbWF0Y2ggPSB0aW1lLnRvU3RyaW5nKCkuc3BsaXQoLyhcXGQrKS8pLmZpbHRlcihCb29sZWFuKTtcbiAgY29uc3QgbnVtID0gTnVtYmVyKG1hdGNoWzBdKTtcbiAgY29uc3QgdW5pdCA9IChtYXRjaFsxXSA/PyBcInNcIikudHJpbSgpLnNsaWNlKDAsIDEpO1xuICBjb25zdCBtdWx0aXBsaWVyID0ge1xuICAgIHM6IDEsXG4gICAgbTogNjAsXG4gICAgaDogMzYwMCxcbiAgICBkOiA4NjQwMFxuICB9W3VuaXRdO1xuICByZXR1cm4gbnVtICogbXVsdGlwbGllcjtcbn1cblxuLy8gc3JjL3Nkay9pbmRleC50c1xudmFyIFVUQXBpID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihvcHRzKSB7XG4gICAgLyoqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgcmVuYW1lRmlsZXN9IGluc3RlYWQuICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC91bmJvdW5kLW1ldGhvZFxuICAgIHRoaXMucmVuYW1lRmlsZSA9IHRoaXMucmVuYW1lRmlsZXM7XG4gICAgdmFyIF9hO1xuICAgIHRoaXMuZmV0Y2ggPSAob3B0cyA9PSBudWxsID8gdm9pZCAwIDogb3B0cy5mZXRjaCkgPz8gZ2xvYmFsVGhpcy5mZXRjaDtcbiAgICB0aGlzLmFwaUtleSA9IChvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLmFwaUtleSkgPz8gcHJvY2Vzcy5lbnYuVVBMT0FEVEhJTkdfU0VDUkVUO1xuICAgIHRoaXMuZGVmYXVsdEhlYWRlcnMgPSB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIFwieC11cGxvYWR0aGluZy1hcGkta2V5XCI6IHRoaXMuYXBpS2V5LFxuICAgICAgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogVVBMT0FEVEhJTkdfVkVSU0lPTlxuICAgIH07XG4gICAgaW5pdExvZ2dlcihvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLmxvZ0xldmVsKTtcbiAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICBnZXRBcGlLZXlPclRocm93KHRoaXMuYXBpS2V5KTtcbiAgICBpZiAoISgoX2EgPSB0aGlzLmFwaUtleSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnN0YXJ0c1dpdGgoXCJza19cIikpKSB7XG4gICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICBjb2RlOiBcIk1JU1NJTkdfRU5WXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBBUEkga2V5LiBBUEkga2V5cyBtdXN0IHN0YXJ0IHdpdGggYHNrX2AuXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpbmNvbXBhdGlibGVOb2RlR3VhcmQoKTtcbiAgfVxuICBhc3luYyByZXF1ZXN0VXBsb2FkVGhpbmcocGF0aG5hbWUsIGJvZHksIGZhbGxiYWNrRXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgdXJsID0gZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTDIocGF0aG5hbWUpO1xuICAgIGxvZ2dlci5kZWJ1ZyhcIlJlcXVlc3RpbmcgVXBsb2FkVGhpbmc6XCIsIHtcbiAgICAgIHVybCxcbiAgICAgIGJvZHksXG4gICAgICBoZWFkZXJzOiB0aGlzLmRlZmF1bHRIZWFkZXJzXG4gICAgfSk7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5mZXRjaCh1cmwsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBjYWNoZTogXCJuby1zdG9yZVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5kZWZhdWx0SGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpXG4gICAgfSk7XG4gICAgbG9nZ2VyLmRlYnVnKFwiVXBsb2FkVGhpbmcgcmVzcG9uc2VkIHdpdGggc3RhdHVzOlwiLCByZXMuc3RhdHVzKTtcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBpZiAoIXJlcy5vayB8fCBcImVycm9yXCIgaW4ganNvbikge1xuICAgICAgbG9nZ2VyLmVycm9yKFwiRXJyb3I6XCIsIGpzb24pO1xuICAgICAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgY29kZTogXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIixcbiAgICAgICAgbWVzc2FnZTogXCJlcnJvclwiIGluIGpzb24gJiYgdHlwZW9mIGpzb24uZXJyb3IgPT09IFwic3RyaW5nXCIgPyBqc29uLmVycm9yIDogZmFsbGJhY2tFcnJvck1lc3NhZ2VcbiAgICAgIH0pO1xuICAgIH1cbiAgICBsb2dnZXIuZGVidWcoXCJVcGxvYWRUaGluZyByZXNwb25zZTpcIiwganNvbik7XG4gICAgcmV0dXJuIGpzb247XG4gIH1cbiAgLyoqXG4gICAqIFVwbG9hZCBmaWxlcyB0byBVcGxvYWRUaGluZyBzdG9yYWdlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBhd2FpdCB1cGxvYWRGaWxlcyhuZXcgRmlsZShbXCJmb29cIl0sIFwiZm9vLnR4dFwiKSk7XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGF3YWl0IHVwbG9hZEZpbGVzKFtcbiAgICogICBuZXcgRmlsZShbXCJmb29cIl0sIFwiZm9vLnR4dFwiKSxcbiAgICogICBuZXcgRmlsZShbXCJiYXJcIl0sIFwiYmFyLnR4dFwiKSxcbiAgICogXSk7XG4gICAqL1xuICBhc3luYyB1cGxvYWRGaWxlcyhmaWxlcywgb3B0cykge1xuICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgIGNvbnN0IGZpbGVzVG9VcGxvYWQgPSBBcnJheS5pc0FycmF5KGZpbGVzKSA/IGZpbGVzIDogW2ZpbGVzXTtcbiAgICBsb2dnZXIuZGVidWcoXCJVcGxvYWRpbmcgZmlsZXM6XCIsIGZpbGVzVG9VcGxvYWQpO1xuICAgIGNvbnN0IHVwbG9hZHMgPSBhd2FpdCB1cGxvYWRGaWxlc0ludGVybmFsKFxuICAgICAge1xuICAgICAgICBmaWxlczogZmlsZXNUb1VwbG9hZCxcbiAgICAgICAgbWV0YWRhdGE6IChvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLm1ldGFkYXRhKSA/PyB7fSxcbiAgICAgICAgY29udGVudERpc3Bvc2l0aW9uOiAob3B0cyA9PSBudWxsID8gdm9pZCAwIDogb3B0cy5jb250ZW50RGlzcG9zaXRpb24pID8/IFwiaW5saW5lXCIsXG4gICAgICAgIGFjbDogb3B0cyA9PSBudWxsID8gdm9pZCAwIDogb3B0cy5hY2xcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGZldGNoOiB0aGlzLmZldGNoLFxuICAgICAgICB1dFJlcXVlc3RIZWFkZXJzOiB0aGlzLmRlZmF1bHRIZWFkZXJzXG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCB1cGxvYWRGaWxlUmVzcG9uc2UgPSBBcnJheS5pc0FycmF5KGZpbGVzKSA/IHVwbG9hZHMgOiB1cGxvYWRzWzBdO1xuICAgIGxvZ2dlci5kZWJ1ZyhcIkZpbmlzaGVkIHVwbG9hZGluZzpcIiwgdXBsb2FkRmlsZVJlc3BvbnNlKTtcbiAgICByZXR1cm4gdXBsb2FkRmlsZVJlc3BvbnNlO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBVUkwgb2YgdGhlIGZpbGUgdG8gdXBsb2FkXG4gICAqIEBwYXJhbSB7SnNvbn0gbWV0YWRhdGEgSlNPTi1wYXJzZWFibGUgbWV0YWRhdGEgdG8gYXR0YWNoIHRvIHRoZSB1cGxvYWRlZCBmaWxlKHMpXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGF3YWl0IHVwbG9hZEZpbGVGcm9tVXJsKFwiaHR0cHM6Ly91cGxvYWR0aGluZy5jb20vZi8yZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIpO1xuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBhd2FpdCB1cGxvYWRGaWxlRnJvbVVybChbXG4gICAqICAgXCJodHRwczovL3VwbG9hZHRoaW5nLmNvbS9mLzJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIixcbiAgICogICBcImh0dHBzOi8vdXBsb2FkdGhpbmcuY29tL2YvMTY0OTM1M2ItMDRlYS00OGEyLTlkYjctMzFkZTdmNTYyYzhkX2ltYWdlMi5qcGdcIlxuICAgKiBdKVxuICAgKi9cbiAgYXN5bmMgdXBsb2FkRmlsZXNGcm9tVXJsKHVybHMsIG9wdHMpIHtcbiAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICBjb25zdCBmaWxlVXJscyA9IEFycmF5LmlzQXJyYXkodXJscykgPyB1cmxzIDogW3VybHNdO1xuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgZm9ybURhdGEuYXBwZW5kKFwibWV0YWRhdGFcIiwgSlNPTi5zdHJpbmdpZnkoKG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMubWV0YWRhdGEpID8/IHt9KSk7XG4gICAgY29uc3QgZmlsZXNUb1VwbG9hZCA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgZmlsZVVybHMubWFwKGFzeW5jICh1cmwpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB1cmwgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgdXJsID0gbmV3IFVSTCh1cmwpO1xuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IHVybC5wYXRobmFtZS5zcGxpdChcIi9cIikucG9wKCkgPz8gXCJ1bmtub3duLWZpbGVuYW1lXCI7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcIkRvd25sb2FkaW5nIGZpbGU6XCIsIHVybCk7XG4gICAgICAgIGNvbnN0IGZpbGVSZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG4gICAgICAgIGlmICghZmlsZVJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3IyKHtcbiAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGRvd25sb2FkIHJlcXVlc3RlZCBmaWxlLlwiLFxuICAgICAgICAgICAgY2F1c2U6IGZpbGVSZXNwb25zZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcIkZpbmlzaGVkIGRvd25sb2FkaW5nIGZpbGUuIFJlYWRpbmcgYmxvYi4uLlwiKTtcbiAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IGZpbGVSZXNwb25zZS5ibG9iKCk7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcIkZpbmlzaGVkIHJlYWRpbmcgYmxvYi5cIik7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKGJsb2IsIHsgbmFtZTogZmlsZW5hbWUgfSk7XG4gICAgICB9KVxuICAgICk7XG4gICAgbG9nZ2VyLmRlYnVnKFwiQWxsIGZpbGVzIGRvd25sb2FkZWQsIHVwbG9hZGluZy4uLlwiKTtcbiAgICBjb25zdCB1cGxvYWRzID0gYXdhaXQgdXBsb2FkRmlsZXNJbnRlcm5hbChcbiAgICAgIHtcbiAgICAgICAgZmlsZXM6IGZpbGVzVG9VcGxvYWQsXG4gICAgICAgIG1ldGFkYXRhOiAob3B0cyA9PSBudWxsID8gdm9pZCAwIDogb3B0cy5tZXRhZGF0YSkgPz8ge30sXG4gICAgICAgIGNvbnRlbnREaXNwb3NpdGlvbjogKG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMuY29udGVudERpc3Bvc2l0aW9uKSA/PyBcImlubGluZVwiLFxuICAgICAgICBhY2w6IG9wdHMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdHMuYWNsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBmZXRjaDogdGhpcy5mZXRjaCxcbiAgICAgICAgdXRSZXF1ZXN0SGVhZGVyczogdGhpcy5kZWZhdWx0SGVhZGVyc1xuICAgICAgfVxuICAgICk7XG4gICAgY29uc3QgdXBsb2FkRmlsZVJlc3BvbnNlID0gQXJyYXkuaXNBcnJheSh1cmxzKSA/IHVwbG9hZHMgOiB1cGxvYWRzWzBdO1xuICAgIGxvZ2dlci5kZWJ1ZyhcIkZpbmlzaGVkIHVwbG9hZGluZzpcIiwgdXBsb2FkRmlsZVJlc3BvbnNlKTtcbiAgICByZXR1cm4gdXBsb2FkRmlsZVJlc3BvbnNlO1xuICB9XG4gIC8qKlxuICAgKiBSZXF1ZXN0IHRvIGRlbGV0ZSBmaWxlcyBmcm9tIFVwbG9hZFRoaW5nIHN0b3JhZ2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgc3RyaW5nW119IGZpbGVLZXlzXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGF3YWl0IGRlbGV0ZUZpbGVzKFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiKTtcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYXdhaXQgZGVsZXRlRmlsZXMoW1wiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLFwiMTY0OTM1M2ItMDRlYS00OGEyLTlkYjctMzFkZTdmNTYyYzhkX2ltYWdlMi5qcGdcIl0pXG4gICAqL1xuICBhc3luYyBkZWxldGVGaWxlcyhmaWxlS2V5cykge1xuICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgIGlmICghQXJyYXkuaXNBcnJheShmaWxlS2V5cykpXG4gICAgICBmaWxlS2V5cyA9IFtmaWxlS2V5c107XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nKFxuICAgICAgXCIvYXBpL2RlbGV0ZUZpbGVcIixcbiAgICAgIHsgZmlsZUtleXMgfSxcbiAgICAgIFwiQW4gdW5rbm93biBlcnJvciBvY2N1cmVkIHdoaWxlIGRlbGV0aW5nIGZpbGVzLlwiXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogUmVxdWVzdCBmaWxlIFVSTHMgZnJvbSBVcGxvYWRUaGluZyBzdG9yYWdlLlxuICAgKiBAcGFyYW0ge3N0cmluZyB8IHN0cmluZ1tdfSBmaWxlS2V5c1xuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCBkYXRhID0gYXdhaXQgZ2V0RmlsZVVybHMoXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIpO1xuICAgKiBjb25zb2xlLmxvZyhkYXRhKTsgLy8gW3trZXk6IFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLCB1cmw6IFwiaHR0cHM6Ly91cGxvYWR0aGluZy5jb20vZi8yZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCJ9XVxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCBkYXRhID0gYXdhaXQgZ2V0RmlsZVVybHMoW1wiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLFwiMTY0OTM1M2ItMDRlYS00OGEyLTlkYjctMzFkZTdmNTYyYzhkX2ltYWdlMi5qcGdcIl0pXG4gICAqIGNvbnNvbGUubG9nKGRhdGEpIC8vIFt7a2V5OiBcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIiwgdXJsOiBcImh0dHBzOi8vdXBsb2FkdGhpbmcuY29tL2YvMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiIH0se2tleTogXCIxNjQ5MzUzYi0wNGVhLTQ4YTItOWRiNy0zMWRlN2Y1NjJjOGRfaW1hZ2UyLmpwZ1wiLCB1cmw6IFwiaHR0cHM6Ly91cGxvYWR0aGluZy5jb20vZi8xNjQ5MzUzYi0wNGVhLTQ4YTItOWRiNy0zMWRlN2Y1NjJjOGRfaW1hZ2UyLmpwZ1wifV1cbiAgICovXG4gIGFzeW5jIGdldEZpbGVVcmxzKGZpbGVLZXlzKSB7XG4gICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGZpbGVLZXlzKSlcbiAgICAgIGZpbGVLZXlzID0gW2ZpbGVLZXlzXTtcbiAgICBjb25zdCBqc29uID0gYXdhaXQgdGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXG4gICAgICBcIi9hcGkvZ2V0RmlsZVVybFwiLFxuICAgICAgeyBmaWxlS2V5cyB9LFxuICAgICAgXCJBbiB1bmtub3duIGVycm9yIG9jY3VyZWQgd2hpbGUgcmV0cmlldmluZyBmaWxlIFVSTHMuXCJcbiAgICApO1xuICAgIHJldHVybiBqc29uLmRhdGE7XG4gIH1cbiAgLyoqXG4gICAqIFJlcXVlc3QgZmlsZSBsaXN0IGZyb20gVXBsb2FkVGhpbmcgc3RvcmFnZS5cbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdHNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9wdHMubGltaXQgVGhlIG1heGltdW0gbnVtYmVyIG9mIGZpbGVzIHRvIHJldHVyblxuICAgKiBAcGFyYW0ge251bWJlcn0gb3B0cy5vZmZzZXQgVGhlIG51bWJlciBvZiBmaWxlcyB0byBza2lwXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IGRhdGEgPSBhd2FpdCBsaXN0RmlsZXMoeyBsaW1pdDogMSB9KTtcbiAgICogY29uc29sZS5sb2coZGF0YSk7IC8vIHsga2V5OiBcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIiwgaWQ6IFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4XCIgfVxuICAgKi9cbiAgYXN5bmMgbGlzdEZpbGVzKG9wdHMpIHtcbiAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICBjb25zdCBqc29uID0gYXdhaXQgdGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXCIvYXBpL2xpc3RGaWxlc1wiLCBvcHRzLCBcIkFuIHVua25vd24gZXJyb3Igb2NjdXJlZCB3aGlsZSBsaXN0aW5nIGZpbGVzLlwiKTtcbiAgICByZXR1cm4ganNvbi5maWxlcztcbiAgfVxuICBhc3luYyByZW5hbWVGaWxlcyh1cGRhdGVzKSB7XG4gICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHVwZGF0ZXMpKVxuICAgICAgdXBkYXRlcyA9IFt1cGRhdGVzXTtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXG4gICAgICBcIi9hcGkvcmVuYW1lRmlsZXNcIixcbiAgICAgIHsgdXBkYXRlcyB9LFxuICAgICAgXCJBbiB1bmtub3duIGVycm9yIG9jY3VyZWQgd2hpbGUgcmVuYW1pbmcgZmlsZXMuXCJcbiAgICApO1xuICB9XG4gIGFzeW5jIGdldFVzYWdlSW5mbygpIHtcbiAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXG4gICAgICBcIi9hcGkvZ2V0VXNhZ2VJbmZvXCIsXG4gICAgICB7fSxcbiAgICAgIFwiQW4gdW5rbm93biBlcnJvciBvY2N1cmVkIHdoaWxlIGdldHRpbmcgdXNhZ2UgaW5mby5cIlxuICAgICk7XG4gIH1cbiAgLyoqIFJlcXVlc3QgYSBwcmVzaWduZWQgdXJsIGZvciBhIHByaXZhdGUgZmlsZShzKSAqL1xuICBhc3luYyBnZXRTaWduZWRVUkwoZmlsZUtleSwgb3B0cykge1xuICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgIGNvbnN0IGV4cGlyZXNJbiA9IChvcHRzID09IG51bGwgPyB2b2lkIDAgOiBvcHRzLmV4cGlyZXNJbikgPyBwYXJzZVRpbWVUb1NlY29uZHMob3B0cy5leHBpcmVzSW4pIDogdm9pZCAwO1xuICAgIGlmICgob3B0cyA9PSBudWxsID8gdm9pZCAwIDogb3B0cy5leHBpcmVzSW4pICYmIGlzTmFOKGV4cGlyZXNJbikpIHtcbiAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yMih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogXCJleHBpcmVzSW4gbXVzdCBiZSBhIHZhbGlkIHRpbWUgc3RyaW5nLCBmb3IgZXhhbXBsZSAnMWQnLCAnMiBkYXlzJywgb3IgYSBudW1iZXIgb2Ygc2Vjb25kcy5cIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChleHBpcmVzSW4gJiYgZXhwaXJlc0luID4gODY0MDAgKiA3KSB7XG4gICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcjIoe1xuICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiZXhwaXJlc0luIG11c3QgYmUgbGVzcyB0aGFuIDcgZGF5cyAoNjA0ODAwIHNlY29uZHMpLlwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nKFxuICAgICAgXCIvYXBpL3JlcXVlc3RGaWxlQWNjZXNzXCIsXG4gICAgICB7IGZpbGVLZXksIGV4cGlyZXNJbiB9LFxuICAgICAgXCJBbiB1bmtub3duIGVycm9yIG9jY3VyZWQgd2hpbGUgcmV0cmlldmluZyBwcmVzaWduZWQgVVJMcy5cIlxuICAgICk7XG4gICAgcmV0dXJuIGpzb24udXJsO1xuICB9XG59O1xuXG4vLyBzcmMvc2VydmVyLnRzXG52YXIgY3JlYXRlVXBsb2FkdGhpbmcgPSAob3B0cykgPT4gY3JlYXRlQnVpbGRlcihvcHRzKTtcbnZhciBjcmVhdGVTZXJ2ZXJIYW5kbGVyID0gKG9wdHMpID0+IHtcbiAgdmFyIF9hO1xuICBpbml0TG9nZ2VyKChfYSA9IG9wdHMuY29uZmlnKSA9PSBudWxsID8gdm9pZCAwIDogX2EubG9nTGV2ZWwpO1xuICBpbmNvbXBhdGlibGVOb2RlR3VhcmQoKTtcbiAgY29uc3QgcmVxdWVzdEhhbmRsZXIgPSBidWlsZFJlcXVlc3RIYW5kbGVyKG9wdHMpO1xuICBjb25zdCBnZXRCdWlsZFBlcm1zID0gYnVpbGRQZXJtaXNzaW9uc0luZm9IYW5kbGVyKG9wdHMpO1xuICBjb25zdCBQT1NUID0gYXN5bmMgKHJlcXVlc3QpID0+IHtcbiAgICBjb25zdCByZXEgPSByZXF1ZXN0IGluc3RhbmNlb2YgUmVxdWVzdCA/IHJlcXVlc3QgOiByZXF1ZXN0LnJlcXVlc3Q7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0SGFuZGxlcih7IHJlcSB9KTtcbiAgICBpZiAocmVzcG9uc2UgaW5zdGFuY2VvZiBVcGxvYWRUaGluZ0Vycm9yMykge1xuICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeShmb3JtYXRFcnJvcihyZXNwb25zZSwgb3B0cy5yb3V0ZXIpKSwge1xuICAgICAgICBzdGF0dXM6IGdldFN0YXR1c0NvZGVGcm9tRXJyb3IocmVzcG9uc2UpLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogVVBMT0FEVEhJTkdfVkVSU0lPTlxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFwiQW4gdW5rbm93biBlcnJvciBvY2N1cmVkXCIsIHtcbiAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiOiBVUExPQURUSElOR19WRVJTSU9OXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmJvZHkpLCB7XG4gICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogVVBMT0FEVEhJTkdfVkVSU0lPTlxuICAgICAgfVxuICAgIH0pO1xuICB9O1xuICBjb25zdCBHRVQgPSAocmVxdWVzdCkgPT4ge1xuICAgIGNvbnN0IF9yZXEgPSByZXF1ZXN0IGluc3RhbmNlb2YgUmVxdWVzdCA/IHJlcXVlc3QgOiByZXF1ZXN0LnJlcXVlc3Q7XG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeShnZXRCdWlsZFBlcm1zKCkpLCB7XG4gICAgICBzdGF0dXM6IDIwMCxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogVVBMT0FEVEhJTkdfVkVSU0lPTlxuICAgICAgfVxuICAgIH0pO1xuICB9O1xuICByZXR1cm4geyBHRVQsIFBPU1QgfTtcbn07XG52YXIgZXh0cmFjdFJvdXRlckNvbmZpZyA9IChyb3V0ZXIpID0+IGJ1aWxkUGVybWlzc2lvbnNJbmZvSGFuZGxlcih7IHJvdXRlciB9KSgpO1xuXG5leHBvcnQge1xuICBVVEFwaSxcbiAgY3JlYXRlVXBsb2FkdGhpbmcsXG4gIGNyZWF0ZVNlcnZlckhhbmRsZXIsXG4gIGV4dHJhY3RSb3V0ZXJDb25maWdcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaHVuay1aVVNYQUhXUy5tanMubWFwIl0sIm5hbWVzIjpbInVwbG9hZFBhcnQiLCJVUExPQURUSElOR19WRVJTSU9OIiwiYnVpbGRQZXJtaXNzaW9uc0luZm9IYW5kbGVyIiwiYnVpbGRSZXF1ZXN0SGFuZGxlciIsImNyZWF0ZUJ1aWxkZXIiLCJmb3JtYXRFcnJvciIsImluY29tcGF0aWJsZU5vZGVHdWFyZCIsImluaXRMb2dnZXIiLCJsb2dnZXIiLCJnZXRTdGF0dXNDb2RlRnJvbUVycm9yIiwiVXBsb2FkVGhpbmdFcnJvciIsIlVwbG9hZFRoaW5nRXJyb3IzIiwiZ2VuZXJhdGVVcGxvYWRUaGluZ1VSTCIsImdlbmVyYXRlVXBsb2FkVGhpbmdVUkwyIiwiVXBsb2FkVGhpbmdFcnJvcjIiLCJwb2xsRm9yRmlsZURhdGEiLCJndWFyZFNlcnZlck9ubHkiLCJjb2RlIiwibWVzc2FnZSIsImdldEFwaUtleU9yVGhyb3ciLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiVVBMT0FEVEhJTkdfU0VDUkVUIiwidXBsb2FkRmlsZXNJbnRlcm5hbCIsImRhdGEiLCJvcHRzIiwiZmlsZURhdGEiLCJmaWxlcyIsIm1hcCIsImZpbGUiLCJuYW1lIiwidHlwZSIsInNpemUiLCJkZWJ1ZyIsInJlcyIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsInV0UmVxdWVzdEhlYWRlcnMiLCJjYWNoZSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibWV0YWRhdGEiLCJjb250ZW50RGlzcG9zaXRpb24iLCJhY2wiLCJvayIsImVycm9yIiwiZnJvbVJlc3BvbnNlIiwiY2xvbmVkUmVzIiwiY2xvbmUiLCJqc29uIiwidXBsb2FkcyIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwiaSIsInByZXNpZ25lZFVybHMiLCJrZXkiLCJmaWxlVXJsIiwidXBsb2FkSWQiLCJjaHVua1NpemUiLCJBcnJheSIsImlzQXJyYXkiLCJjYXVzZSIsImxlbmd0aCIsImV0YWdzIiwiYWxsIiwidXJsIiwiaW5kZXgiLCJvZmZzZXQiLCJlbmQiLCJNYXRoIiwibWluIiwiY2h1bmsiLCJzbGljZSIsImV0YWciLCJjb250ZW50VHlwZSIsImZpbGVOYW1lIiwibWF4UmV0cmllcyIsInRhZyIsInBhcnROdW1iZXIiLCJjb21wbGV0aW9uUmVzIiwiZmlsZUtleSIsInN0YXR1cyIsInNka1ZlcnNpb24iLCJ1cGxvYWQiLCJkYXRhMiIsInZhbHVlIiwicmVhc29uIiwidG9PYmplY3QiLCJwYXJzZVRpbWVUb1NlY29uZHMiLCJ0aW1lIiwibWF0Y2giLCJ0b1N0cmluZyIsInNwbGl0IiwiZmlsdGVyIiwiQm9vbGVhbiIsIm51bSIsIk51bWJlciIsInVuaXQiLCJ0cmltIiwibXVsdGlwbGllciIsInMiLCJtIiwiaCIsImQiLCJVVEFwaSIsImNvbnN0cnVjdG9yIiwicmVuYW1lRmlsZSIsInJlbmFtZUZpbGVzIiwiX2EiLCJnbG9iYWxUaGlzIiwiZGVmYXVsdEhlYWRlcnMiLCJsb2dMZXZlbCIsInN0YXJ0c1dpdGgiLCJyZXF1ZXN0VXBsb2FkVGhpbmciLCJwYXRobmFtZSIsImZhbGxiYWNrRXJyb3JNZXNzYWdlIiwidXBsb2FkRmlsZXMiLCJmaWxlc1RvVXBsb2FkIiwidXBsb2FkRmlsZVJlc3BvbnNlIiwidXBsb2FkRmlsZXNGcm9tVXJsIiwidXJscyIsImZpbGVVcmxzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsIlVSTCIsImZpbGVuYW1lIiwicG9wIiwiZmlsZVJlc3BvbnNlIiwiYmxvYiIsIk9iamVjdCIsImFzc2lnbiIsImRlbGV0ZUZpbGVzIiwiZmlsZUtleXMiLCJnZXRGaWxlVXJscyIsImxpc3RGaWxlcyIsInVwZGF0ZXMiLCJnZXRVc2FnZUluZm8iLCJnZXRTaWduZWRVUkwiLCJleHBpcmVzSW4iLCJpc05hTiIsImNyZWF0ZVVwbG9hZHRoaW5nIiwiY3JlYXRlU2VydmVySGFuZGxlciIsImNvbmZpZyIsInJlcXVlc3RIYW5kbGVyIiwiZ2V0QnVpbGRQZXJtcyIsIlBPU1QiLCJyZXF1ZXN0IiwicmVxIiwiUmVxdWVzdCIsInJlc3BvbnNlIiwiUmVzcG9uc2UiLCJyb3V0ZXIiLCJHRVQiLCJfcmVxIiwiZXh0cmFjdFJvdXRlckNvbmZpZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/chunk-ZUSXAHWS.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/next.mjs":
/*!************************************************!*\
  !*** ./node_modules/uploadthing/dist/next.mjs ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createNextRouteHandler: () => (/* binding */ createNextRouteHandler),\n/* harmony export */   createUploadthing: () => (/* binding */ createUploadthing)\n/* harmony export */ });\n/* harmony import */ var _chunk_ZUSXAHWS_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-ZUSXAHWS.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-ZUSXAHWS.mjs\");\n/* harmony import */ var _chunk_S3R3VXRK_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chunk-S3R3VXRK.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-S3R3VXRK.mjs\");\n/* harmony import */ var _chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chunk-K4BQP7SE.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-K4BQP7SE.mjs\");\n/* harmony import */ var _chunk_4PDGVH57_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunk-4PDGVH57.mjs */ \"(rsc)/./node_modules/uploadthing/dist/chunk-4PDGVH57.mjs\");\n\n\n\n\n// src/next.ts\nvar createUploadthing = (opts)=>(0,_chunk_K4BQP7SE_mjs__WEBPACK_IMPORTED_MODULE_2__.createBuilder)(opts);\nvar createNextRouteHandler = (opts)=>{\n    const handlers = (0,_chunk_ZUSXAHWS_mjs__WEBPACK_IMPORTED_MODULE_0__.createServerHandler)(opts);\n    return {\n        POST: (req)=>handlers.POST(req),\n        GET: (req)=>handlers.GET(req)\n    };\n};\n //# sourceMappingURL=next.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9uZXh0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFFOEI7QUFDQTtBQUdBO0FBQ0E7QUFFOUIsY0FBYztBQUNkLElBQUlFLG9CQUFvQixDQUFDQyxPQUFTRixrRUFBYUEsQ0FBQ0U7QUFDaEQsSUFBSUMseUJBQXlCLENBQUNEO0lBQzVCLE1BQU1FLFdBQVdMLHdFQUFtQkEsQ0FBQ0c7SUFDckMsT0FBTztRQUNMRyxNQUFNLENBQUNDLE1BQVFGLFNBQVNDLElBQUksQ0FBQ0M7UUFDN0JDLEtBQUssQ0FBQ0QsTUFBUUYsU0FBU0csR0FBRyxDQUFDRDtJQUM3QjtBQUNGO0FBSUUsQ0FDRixpQ0FBaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pc29tb3JwaGljLy4vbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvbmV4dC5tanM/YzU1ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBjcmVhdGVTZXJ2ZXJIYW5kbGVyXG59IGZyb20gXCIuL2NodW5rLVpVU1hBSFdTLm1qc1wiO1xuaW1wb3J0IFwiLi9jaHVuay1TM1IzVlhSSy5tanNcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZUJ1aWxkZXJcbn0gZnJvbSBcIi4vY2h1bmstSzRCUVA3U0UubWpzXCI7XG5pbXBvcnQgXCIuL2NodW5rLTRQREdWSDU3Lm1qc1wiO1xuXG4vLyBzcmMvbmV4dC50c1xudmFyIGNyZWF0ZVVwbG9hZHRoaW5nID0gKG9wdHMpID0+IGNyZWF0ZUJ1aWxkZXIob3B0cyk7XG52YXIgY3JlYXRlTmV4dFJvdXRlSGFuZGxlciA9IChvcHRzKSA9PiB7XG4gIGNvbnN0IGhhbmRsZXJzID0gY3JlYXRlU2VydmVySGFuZGxlcihvcHRzKTtcbiAgcmV0dXJuIHtcbiAgICBQT1NUOiAocmVxKSA9PiBoYW5kbGVycy5QT1NUKHJlcSksXG4gICAgR0VUOiAocmVxKSA9PiBoYW5kbGVycy5HRVQocmVxKVxuICB9O1xufTtcbmV4cG9ydCB7XG4gIGNyZWF0ZU5leHRSb3V0ZUhhbmRsZXIsXG4gIGNyZWF0ZVVwbG9hZHRoaW5nXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bmV4dC5tanMubWFwIl0sIm5hbWVzIjpbImNyZWF0ZVNlcnZlckhhbmRsZXIiLCJjcmVhdGVCdWlsZGVyIiwiY3JlYXRlVXBsb2FkdGhpbmciLCJvcHRzIiwiY3JlYXRlTmV4dFJvdXRlSGFuZGxlciIsImhhbmRsZXJzIiwiUE9TVCIsInJlcSIsIkdFVCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/next.mjs\n");

/***/ })

};
;